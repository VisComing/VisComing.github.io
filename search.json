[{"title":"本地上传到algolia","url":"/2021/01/13/algolia/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>hexo clean?</p>\n<p>set HEXO_ALGOLIA_INDEXING_KEY=</p>\n<p>后面这个key要是admin key，可以upload</p>\n<p>search key只能搜索</p>\n"},{"title":"C++ STL 简介","url":"/2020/09/12/c++%20stl%20%E7%AE%80%E4%BB%8B/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"C-STL-简介\"><a href=\"#C-STL-简介\" class=\"headerlink\" title=\"C++ STL 简介\"></a>C++ STL 简介</h1><h2 id=\"vector\"><a href=\"#vector\" class=\"headerlink\" title=\"vector\"></a>vector</h2><a id=\"more\"></a>\n<h3 id=\"头文件\"><a href=\"#头文件\" class=\"headerlink\" title=\"头文件\"></a>头文件</h3><p><code>#include &lt;vector&gt;</code></p>\n<p><code>using std::vector</code></p>\n<h3 id=\"初始化\"><a href=\"#初始化\" class=\"headerlink\" title=\"初始化\"></a>初始化</h3><p><code>vector&lt;int&gt;  a</code>//初始化一个空vector</p>\n<p><code>vector&lt;int&gt; a(10, 3)</code>/10个int型元素，它们的值均为3</p>\n<p><code>vector&lt;int&gt; a(10)</code>//10个int型元素，执行类的默认初始化，这里10个元素均被初始化为0</p>\n<p><code>vector&lt;int&gt; b = a</code>//b中包含a中所有元素的副本</p>\n<p><code>vector&lt;int&gt; b(a)</code>//同上</p>\n<p><code>vector&lt;int&gt; a&#123;1,2,3,4&#125;</code>//列表初始化，</p>\n<h3 id=\"常用操作\"><a href=\"#常用操作\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h3><h4 id=\"a-push-back-x\"><a href=\"#a-push-back-x\" class=\"headerlink\" title=\"a.push_back(x)\"></a>a.push_back(x)</h4><p>向a末尾插入元素x</p>\n<h4 id=\"a-empty\"><a href=\"#a-empty\" class=\"headerlink\" title=\"a.empty()\"></a>a.empty()</h4><p>判断a是否为空，空则返回true</p>\n<h4 id=\"a-size\"><a href=\"#a-size\" class=\"headerlink\" title=\"a.size()\"></a>a.size()</h4><p>返回a中元素的个数</p>\n<h4 id=\"a-n\"><a href=\"#a-n\" class=\"headerlink\" title=\"a[n]\"></a>a[n]</h4><p>支持随机寻址，返回a中第n个元素的引用，相当于对数组的操作</p>\n<h4 id=\"a-b-a-b\"><a href=\"#a-b-a-b\" class=\"headerlink\" title=\"a==b    a!=b\"></a>a==b    a!=b</h4><p>判断a和b是否相等（当且仅当它们的元素数量相同且相同位置的元素值都相同）</p>\n<h4 id=\"lt-lt-gt-gt\"><a href=\"#lt-lt-gt-gt\" class=\"headerlink\" title=\"&lt;    &lt;=    &gt;    &gt;=\"></a>&lt;    &lt;=    &gt;    &gt;=</h4><p>按照字典序比较两个vector</p>\n<h4 id=\"a-clear\"><a href=\"#a-clear\" class=\"headerlink\" title=\"a.clear()\"></a>a.clear()</h4><p>删除a中所有的元素</p>\n<h4 id=\"a-front-a-back\"><a href=\"#a-front-a-back\" class=\"headerlink\" title=\"a.front()    a.back()\"></a>a.front()    a.back()</h4><p>返回a中的第一个数 返回a中的最后一个数</p>\n<h4 id=\"a-begin-a-end\"><a href=\"#a-begin-a-end\" class=\"headerlink\" title=\"a.begin()    a.end()\"></a>a.begin()    a.end()</h4><p>指向a中的第一个元素，指向a中最后一个元素的下一个位置</p>\n<h3 id=\"遍历方式\"><a href=\"#遍历方式\" class=\"headerlink\" title=\"遍历方式\"></a>遍历方式</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; a.size(); i ++) <span class=\"built_in\">cout</span> &lt;&lt; a[i] &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;<span class=\"comment\">//使用下标来遍历</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;::iterator it = a.begin(); it != a.end(); it ++) <span class=\"built_in\">cout</span> &lt;&lt; *it &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;<span class=\"comment\">//使用迭代器来遍历</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x:a) <span class=\"built_in\">cout</span> &lt;&lt; x &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;<span class=\"comment\">//范围遍历</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"vector的增长\"><a href=\"#vector的增长\" class=\"headerlink\" title=\"vector的增长\"></a>vector的增长</h3><p>vector可以理解为动态数组，为了减少分配空间的次数，vector大概是在每次需要分配新的内存空间时讲当前容量翻倍</p>\n<blockquote>\n<p>使用vector时不建议先指定好vector的大小，而是应该先创建一个空的vector对象，然后在运行时利用push_back向其中添加元素。</p>\n</blockquote>\n<h3 id=\"二维vector\"><a href=\"#二维vector\" class=\"headerlink\" title=\"二维vector\"></a>二维vector</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; a;</span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i ++) &#123;<span class=\"comment\">//将二维数组array的元素插入到二维vector中</span></span><br><span class=\"line\">\t<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; temp;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; n; j ++) &#123;</span><br><span class=\"line\">\t\ttemp.push_back(<span class=\"built_in\">array</span>[m][n]);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\ta.push_back(temp);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//遍历二维vector</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;::iterator it = a.begin(); it != a.end(); it ++) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;::iterator t = (*it).begin(); t != (*it).end(); t ++) &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; *t &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"string\"><a href=\"#string\" class=\"headerlink\" title=\"string\"></a>string</h2><h3 id=\"头文件-1\"><a href=\"#头文件-1\" class=\"headerlink\" title=\"头文件\"></a>头文件</h3><p><code>#include &lt;string&gt;</code></p>\n<p><code>using std::string</code></p>\n<h3 id=\"初始化-1\"><a href=\"#初始化-1\" class=\"headerlink\" title=\"初始化\"></a>初始化</h3><p><code>string s</code>//默认初始化，s是一个空字符串</p>\n<p><code>string s = &quot;nihaoya&quot;</code>//拷贝初始化，s是该字符串字面值的副本</p>\n<p><code>string s(&quot;nihaoya&quot;)</code>//直接初始化</p>\n<p><code>string s(10,&#39;c&#39;)</code>//s包含10个重复的c</p>\n<h3 id=\"常用操作-1\"><a href=\"#常用操作-1\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h3><h4 id=\"s-size\"><a href=\"#s-size\" class=\"headerlink\" title=\"s.size()\"></a>s.size()</h4><p>返回s中字符的个数</p>\n<h4 id=\"s-empty\"><a href=\"#s-empty\" class=\"headerlink\" title=\"s.empty()\"></a>s.empty()</h4><p>判断s是否为空，空则返回true</p>\n<h4 id=\"s-clear\"><a href=\"#s-clear\" class=\"headerlink\" title=\"s.clear()\"></a>s.clear()</h4><p>删除字符串的所有字符</p>\n<h4 id=\"s-n\"><a href=\"#s-n\" class=\"headerlink\" title=\"s[n]\"></a>s[n]</h4><p>string支持随机访问</p>\n<h4 id><a href=\"#\" class=\"headerlink\" title=\"+\"></a>+</h4><p>在字符串末尾追加字符串，注意必须确保每个加号的两侧的运算对象至少有一个是string</p>\n<h4 id=\"s-substr-pos-n\"><a href=\"#s-substr-pos-n\" class=\"headerlink\" title=\"s.substr(pos, n)\"></a>s.substr(pos, n)</h4><p>返回从s字符串的pos位置（从0开始）开始的向后n个字符的字符串，如果不写第二个参数，则默认返回从pos位置开始到最后一个字符的字符串</p>\n<h4 id=\"s-c-str\"><a href=\"#s-c-str\" class=\"headerlink\" title=\"s.c_str()\"></a>s.c_str()</h4><p>该函数返回一个const char*，指向以空值结尾的字符串（即c风格的字符串）。当你想要将一个string对象传递给需要c风格字符串的函数的时候，就可以使用该函数</p>\n<h4 id=\"stoi-s\"><a href=\"#stoi-s\" class=\"headerlink\" title=\"stoi(s)\"></a>stoi(s)</h4><p>将字符串转换为int型，stoi()会做范围检查，默认范围是在int的范围内的，如果超出范围的话则会出现runtime error</p>\n<h4 id=\"to-string-val\"><a href=\"#to-string-val\" class=\"headerlink\" title=\"to_string(val)\"></a>to_string(val)</h4><p>将数字转化成字符串</p>\n<h3 id=\"遍历方式-1\"><a href=\"#遍历方式-1\" class=\"headerlink\" title=\"遍历方式\"></a>遍历方式</h3><p><code>for(int i = 0; i &lt; s.size(); i ++) cout &lt;&lt; s[i] &lt;&lt; &#39; &#39;; </code></p>\n<p><code>for(string::iterator it = s.begin(); it != s.end(); i ++) cout &lt;&lt; *it &lt;&lt; endl;</code></p>\n<p><code>for(auto c:s) cout &lt;&lt; c &lt;&lt; &#39; &#39;;</code></p>\n<h2 id=\"queue\"><a href=\"#queue\" class=\"headerlink\" title=\"queue\"></a>queue</h2><h3 id=\"头文件-2\"><a href=\"#头文件-2\" class=\"headerlink\" title=\"头文件\"></a>头文件</h3><p><code>#include&lt;vector&gt;</code></p>\n<p><code>using std::vector</code></p>\n<h3 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h3><p><code>queue&lt;int&gt; q</code></p>\n<h3 id=\"常用操作-2\"><a href=\"#常用操作-2\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h3><h4 id=\"q-front\"><a href=\"#q-front\" class=\"headerlink\" title=\"q.front()\"></a>q.front()</h4><p>返回队列第一个元素的引用</p>\n<h4 id=\"q-back\"><a href=\"#q-back\" class=\"headerlink\" title=\"q.back()\"></a>q.back()</h4><p>返回队列的最后一个元素的引用</p>\n<h4 id=\"q-push-i\"><a href=\"#q-push-i\" class=\"headerlink\" title=\"q.push(i)\"></a>q.push(i)</h4><p>向队尾添加元素</p>\n<h4 id=\"q-pop\"><a href=\"#q-pop\" class=\"headerlink\" title=\"q.pop()\"></a>q.pop()</h4><p>删除队列中第一个元素</p>\n<h4 id=\"q-size\"><a href=\"#q-size\" class=\"headerlink\" title=\"q.size()\"></a>q.size()</h4><p>返回队列元素的个数</p>\n<h4 id=\"q-empty\"><a href=\"#q-empty\" class=\"headerlink\" title=\"q.empty()\"></a>q.empty()</h4><p>判断队列是否为空，如果为空，则返回true</p>\n<h2 id=\"priority-queue\"><a href=\"#priority-queue\" class=\"headerlink\" title=\"priority_queue\"></a>priority_queue</h2><p>优先队列，底层是用堆实现的</p>\n<h3 id=\"头文件-3\"><a href=\"#头文件-3\" class=\"headerlink\" title=\"头文件\"></a>头文件</h3><p><code>#include &lt;queue&gt;</code></p>\n<p><code>using std::queue</code></p>\n<h3 id=\"定义-1\"><a href=\"#定义-1\" class=\"headerlink\" title=\"定义\"></a>定义</h3><p><code>priority_queue&lt;int&gt; p</code>//默认是大根堆</p>\n<p><code>priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;)</code>//小根堆</p>\n<h3 id=\"常用操作-3\"><a href=\"#常用操作-3\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h3><h4 id=\"p-push\"><a href=\"#p-push\" class=\"headerlink\" title=\"p.push()\"></a>p.push()</h4><p>向堆中插入一个元素</p>\n<h4 id=\"p-top\"><a href=\"#p-top\" class=\"headerlink\" title=\"p.top()\"></a>p.top()</h4><p>返回堆顶元素</p>\n<h4 id=\"p-pop\"><a href=\"#p-pop\" class=\"headerlink\" title=\"p.pop()\"></a>p.pop()</h4><p>弹出堆顶元素</p>\n<h4 id=\"p-empty\"><a href=\"#p-empty\" class=\"headerlink\" title=\"p.empty()\"></a>p.empty()</h4><p>判断优先队列是否为空，空则返回true</p>\n<h4 id=\"p-size\"><a href=\"#p-size\" class=\"headerlink\" title=\"p.size()\"></a>p.size()</h4><p>返回优先队列中元素的个数</p>\n<h4 id=\"p-push-i\"><a href=\"#p-push-i\" class=\"headerlink\" title=\"p.push(i)\"></a>p.push(i)</h4><p>向堆中插入一个元素</p>\n<h2 id=\"stack\"><a href=\"#stack\" class=\"headerlink\" title=\"stack\"></a>stack</h2><h3 id=\"头文件-4\"><a href=\"#头文件-4\" class=\"headerlink\" title=\"头文件\"></a>头文件</h3><p><code>#include &lt;stack&gt;</code></p>\n<p><code>using std::stack</code></p>\n<h3 id=\"定义-2\"><a href=\"#定义-2\" class=\"headerlink\" title=\"定义\"></a>定义</h3><p><code>stack&lt;int&gt; s</code></p>\n<h3 id=\"常用操作-4\"><a href=\"#常用操作-4\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h3><h4 id=\"s-push-i\"><a href=\"#s-push-i\" class=\"headerlink\" title=\"s.push(i)\"></a>s.push(i)</h4><p>向栈顶插入一个元素</p>\n<h4 id=\"s-pop\"><a href=\"#s-pop\" class=\"headerlink\" title=\"s.pop()\"></a>s.pop()</h4><p>弹出栈顶元素</p>\n<h4 id=\"s-top\"><a href=\"#s-top\" class=\"headerlink\" title=\"s.top()\"></a>s.top()</h4><p>返回栈顶元素</p>\n<h4 id=\"s-empty-1\"><a href=\"#s-empty-1\" class=\"headerlink\" title=\"s.empty()\"></a>s.empty()</h4><p>判断栈是否为空，空则返回true</p>\n<h4 id=\"s-size-1\"><a href=\"#s-size-1\" class=\"headerlink\" title=\"s.size()\"></a>s.size()</h4><p>返回栈中元素的个数</p>\n<h2 id=\"deque\"><a href=\"#deque\" class=\"headerlink\" title=\"deque\"></a>deque</h2><p>双端队列</p>\n<h3 id=\"定义-3\"><a href=\"#定义-3\" class=\"headerlink\" title=\"定义\"></a>定义</h3><p>deque<int> d;</int></p>\n<h3 id=\"常用操作-5\"><a href=\"#常用操作-5\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h3><h4 id=\"d-size\"><a href=\"#d-size\" class=\"headerlink\" title=\"d.size()\"></a>d.size()</h4><p>返回双端队列的大小</p>\n<h4 id=\"d-empty\"><a href=\"#d-empty\" class=\"headerlink\" title=\"d.empty()\"></a>d.empty()</h4><p>判断双端队列是否为空</p>\n<h4 id=\"d-clear\"><a href=\"#d-clear\" class=\"headerlink\" title=\"d.clear()\"></a>d.clear()</h4><p>删除双端队列的所有元素</p>\n<h4 id=\"d-front-d-back\"><a href=\"#d-front-d-back\" class=\"headerlink\" title=\"d.front()/d.back()\"></a>d.front()/d.back()</h4><p>返回双端队列的队头/队尾元素</p>\n<h4 id=\"d-push-back-d-pop-back\"><a href=\"#d-push-back-d-pop-back\" class=\"headerlink\" title=\"d.push_back/d.pop_back()\"></a>d.push_back/d.pop_back()</h4><p>插入队尾/弹出队尾元素</p>\n<h4 id=\"d-push-front-d-pop-front\"><a href=\"#d-push-front-d-pop-front\" class=\"headerlink\" title=\"d.push_front()/d.pop_front()\"></a>d.push_front()/d.pop_front()</h4><p>插入队首/弹出队首元素</p>\n<h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"[]\"></a>[]</h4><p>支持随机访问</p>\n<h2 id=\"set-multiset\"><a href=\"#set-multiset\" class=\"headerlink\" title=\"set/multiset\"></a>set/multiset</h2><p>set是一个内部自动有序且不含重复元素的容器 ,multiset可以含重复元素</p>\n<h3 id=\"常用操作-6\"><a href=\"#常用操作-6\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h3><h4 id=\"begin-end-size-empty\"><a href=\"#begin-end-size-empty\" class=\"headerlink\" title=\"begin()    end()    size()    empty()\"></a>begin()    end()    size()    empty()</h4><h4 id=\"s-insert-x\"><a href=\"#s-insert-x\" class=\"headerlink\" title=\"s.insert(x)\"></a>s.insert(x)</h4><p>将x插入set容器中，并且自动递增排序和去重，时间复杂度为logn</p>\n<h4 id=\"s-find-x\"><a href=\"#s-find-x\" class=\"headerlink\" title=\"s.find(x)\"></a>s.find(x)</h4><p>返回set中对应值为x的迭代器，时间复杂度为logn，如果找不到，则返回end迭代器</p>\n<h4 id=\"s-count-x\"><a href=\"#s-count-x\" class=\"headerlink\" title=\"s.count(x)\"></a>s.count(x)</h4><p>返回值为x数的个数</p>\n<h4 id=\"s-erase\"><a href=\"#s-erase\" class=\"headerlink\" title=\"s.erase()\"></a>s.erase()</h4><p>输入是一个数x，删除所有x，时间复杂度为</p>\n<p>输入一个迭代器，则删除该迭代器</p>\n<h4 id=\"lower-bound-upper-bound\"><a href=\"#lower-bound-upper-bound\" class=\"headerlink\" title=\"lower_bound()/upper_bound\"></a>lower_bound()/upper_bound</h4><p>lower_bound(x) 返回大于等于x的最小的数的迭代器</p>\n<p>upper_bound(x)返回大于x的最小的数的迭代器</p>\n<h2 id=\"pair\"><a href=\"#pair\" class=\"headerlink\" title=\"pair\"></a>pair</h2><h3 id=\"头文件-5\"><a href=\"#头文件-5\" class=\"headerlink\" title=\"头文件\"></a>头文件</h3><p><code>#include &lt;utility&gt;</code></p>\n<h3 id=\"初始化-2\"><a href=\"#初始化-2\" class=\"headerlink\" title=\"初始化\"></a>初始化</h3><p><code>pair&lt;string, int&gt; p</code>;</p>\n<p><code>pair&lt;string, int&gt; p(&quot;zrf&quot;, 1)</code></p>\n<p><code>pair&lt;string, int&gt; p = &#123;&quot;zrf&quot;, 1&#125;</code></p>\n<p><code>pair&lt;string, int&gt; p = make_pair(&quot;zrf&quot;, 1)</code></p>\n<h3 id=\"常用操作-7\"><a href=\"#常用操作-7\" class=\"headerlink\" title=\"常用操作\"></a>常用操作</h3><h4 id=\"p-first\"><a href=\"#p-first\" class=\"headerlink\" title=\"p.first\"></a>p.first</h4><p>返回p的第一个数据成员</p>\n<h4 id=\"p-second\"><a href=\"#p-second\" class=\"headerlink\" title=\"p.second\"></a>p.second</h4><p>返回p的第二个数据成员</p>\n<h4 id=\"make-pair-v1-v2\"><a href=\"#make-pair-v1-v2\" class=\"headerlink\" title=\"make_pair(v1, v2)\"></a>make_pair(v1, v2)</h4><p>返回一个用v1，v2初始化的pair</p>\n<h4 id=\"p1-p2-p1-p2\"><a href=\"#p1-p2-p1-p2\" class=\"headerlink\" title=\"p1 == p2    p1 != p2\"></a>p1 == p2    p1 != p2</h4><p>当first和second成员分别相等时，两个pair相等</p>\n<h2 id=\"map-multimap\"><a href=\"#map-multimap\" class=\"headerlink\" title=\"map/multimap\"></a>map/multimap</h2><h4 id=\"insert\"><a href=\"#insert\" class=\"headerlink\" title=\"insert()\"></a>insert()</h4><p>插入的数是一个pair</p>\n<h4 id=\"erase\"><a href=\"#erase\" class=\"headerlink\" title=\"erase()\"></a>erase()</h4><p>c.erase(k)    从c中删除每个关键字为k的元素。返回一个size_type值，指出删除的元素的数量</p>\n<p>c.erase(p)    从c中删除迭代器p指定的元素。p不能指向尾后迭代器，返回一个指向p之后元素的迭代器</p>\n<h4 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find()\"></a>find()</h4><p>返回一个迭代器，指向第一个关键字为k的元素，若k不在容器中，则返回尾后迭代器</p>\n<h4 id=\"count-k\"><a href=\"#count-k\" class=\"headerlink\" title=\"count(k)\"></a>count(k)</h4><p>返回关键字等于k的元素的数量</p>\n<h4 id=\"clear\"><a href=\"#clear\" class=\"headerlink\" title=\"clear()\"></a>clear()</h4><p>删除map中所有的元素</p>\n<h4 id=\"size-empty\"><a href=\"#size-empty\" class=\"headerlink\" title=\"size()    empty()\"></a>size()    empty()</h4><h4 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"[]\"></a>[]</h4><p>可以像数组一样使用，时间复杂度是O(logn)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">map&lt;string,int&gt; m;</span><br><span class=\"line\">m[&quot;zrf&quot;] &#x3D; 1;&#x2F;&#x2F;插入</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"lower-bound-k-upper-bound-k\"><a href=\"#lower-bound-k-upper-bound-k\" class=\"headerlink\" title=\"lower_bound(k)/upper_bound(k)\"></a>lower_bound(k)/upper_bound(k)</h4><p>返回一个迭代器，指向第一个关键字大于等于/大于k的元素</p>\n<h2 id=\"unorder-set-unorder-multiset-unorder-map-unorder-multimap\"><a href=\"#unorder-set-unorder-multiset-unorder-map-unorder-multimap\" class=\"headerlink\" title=\"unorder_set    unorder_multiset    unorder_map    unorder_multimap\"></a>unorder_set    unorder_multiset    unorder_map    unorder_multimap</h2><p>优点：增删改查时间复杂度是O(1)</p>\n<p>缺点：不支持lower_bound()    upper_bound()</p>\n"},{"title":"Hello World","url":"/2020/09/12/hello-world/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"keil5 mdk arm和cubemx的安装","url":"/2021/01/20/keil5%E5%92%8Ccubemx%E7%9A%84%E5%AE%89%E8%A3%85/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>keil5去官网下载最新版</p>\n<p>然后用破解算key，汉化</p>\n<p>还要一个固件库，<img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210120123157789.png\" alt=\"image-20210120123157789\"></p>\n<p>cubemx不要最新版，我装的是5.5</p>\n"},{"title":"i2c OLED需要选择fast mode","url":"/2021/01/20/i2cFastMode/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>用cubemx i2c时，一开始我就用的是默认的配置</p>\n<p>发现oled花屏</p>\n<p>后来改为fast mode,问题解决了</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210120163326838.png\" alt=\"image-20210120163326838\"></p>\n<p>注意在选用不同的i2c时（1和2），在ssd1306.c选择对应的 hi2c2 、hi2c1</p>\n","categories":["STM32"]},{"title":"kmp","url":"/2020/09/15/kmp/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>, M = <span class=\"number\">10010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> ne[N];</span><br><span class=\"line\"><span class=\"keyword\">char</span> n[N], p[M];<span class=\"comment\">//n是字符串，p是模式</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//求next过程，字符串下标从1开始</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>, j =<span class=\"number\">0</span>; i &lt;= <span class=\"keyword\">sizeof</span>(p); i ++ ) </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (j &amp;&amp; p[i] != p[j + <span class=\"number\">1</span>]) j = ne[j];</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(p[i] == p[j + <span class=\"number\">1</span>]) j ++;</span><br><span class=\"line\">    ne[i] = j;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//匹配过程,字符串下标从1开始</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>, j = <span class=\"number\">0</span>; i &lt;= <span class=\"keyword\">sizeof</span>(n); i ++ )</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(j &amp;&amp; s[i] != p[j + <span class=\"number\">1</span>]) j = ne[j];</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(s[i] == p[j + <span class=\"number\">1</span>]) j ++;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(j == <span class=\"keyword\">sizeof</span>(n))</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//匹配成功</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"listen music","url":"/2020/11/10/listen-music/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>\n        <div id=\"aplayer-vtxZbnRm\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\">\n            <pre class=\"aplayer-lrc-content\"></pre>\n        </div>\n        <script>\n          var ap = new APlayer({\n            element: document.getElementById(\"aplayer-vtxZbnRm\"),\n            narrow: false,\n            autoplay: false,\n            showlrc: false,\n            music: {\n              title: \"雨幕\",\n              author: \"许嵩\",\n              url: \"许嵩-雨幕-新天龙八部端游主题曲.mp3\",\n              pic: \"\",\n              lrc: \"\"\n            }\n          });\n          window.aplayers || (window.aplayers = []);\n          window.aplayers.push(ap);\n        </script>\n\n        <div id=\"aplayer-ipnmNGOb\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\">\n            <pre class=\"aplayer-lrc-content\"></pre>\n        </div>\n        <script>\n          var ap = new APlayer({\n            element: document.getElementById(\"aplayer-ipnmNGOb\"),\n            narrow: false,\n            autoplay: false,\n            showlrc: false,\n            music: {\n              title: \"放肆\",\n              author: \"许嵩\",\n              url: \"许嵩-放肆.mp3\",\n              pic: \"\",\n              lrc: \"\"\n            }\n          });\n          window.aplayers || (window.aplayers = []);\n          window.aplayers.push(ap);\n        </script>\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=\"330\" height=\"86\" src=\"//music.163.com/outchain/player?type=2&id=1488737309&auto=1&height=66\"></iframe>\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=\"330\" height=\"86\" src=\"//music.163.com/outchain/player?type=2&id=28747068&auto=1&height=66\"></iframe>\n\n        <div id=\"aplayer-bnPzSmOU\" class=\"aplayer aplayer-tag-marker\" style=\"margin-bottom: 20px;\"></div>\n\t\t\t  <script>\n\t\t\t\t  var options = {\"narrow\":false,\"autoplay\":false,\"showlrc\":0,\"music\":[{\"title\":\"彩券\",\"author\":\"薛之谦\",\"url\":\"/2020/11/10/listen-music/薛之谦-彩券.mp3\",\"pic\":\"\"},{\"title\":\"摩天大楼\",\"author\":\"薛之谦\",\"url\":\"/2020/11/10/listen-music/薛之谦-摩天大楼.mp3\",\"pic\":\"\"},{\"title\":\"那是你离开了北京的生活\",\"author\":\"薛之谦\",\"url\":\"/2020/11/10/listen-music/薛之谦-那是你离开了北京的生活.mp3\",\"pic\":\"\"},{\"title\":\"肆无忌惮\",\"author\":\"薛之谦\",\"url\":\"/2020/11/10/listen-music/薛之谦-肆无忌惮.mp3\",\"pic\":\"\"},{\"title\":\"天份\",\"author\":\"薛之谦\",\"url\":\"/2020/11/10/listen-music/薛之谦-天份.mp3\",\"pic\":\"\"},{\"title\":\"天外来物\",\"author\":\"薛之谦\",\"url\":\"/2020/11/10/listen-music/薛之谦-天外来物.mp3\",\"pic\":\"\"},{\"title\":\"哑巴\",\"author\":\"薛之谦\",\"url\":\"/2020/11/10/listen-music/薛之谦-哑巴.mp3\",\"pic\":\"\"},{\"title\":\"最好\",\"author\":\"薛之谦\",\"url\":\"/2020/11/10/listen-music/薛之谦-最好.mp3\",\"pic\":\"\"}]};\n\t\t\t\t  options.element = document.getElementById(\"aplayer-bnPzSmOU\");\n\t\t\t\t  var ap = new APlayer(options);\n\t\t\t    window.aplayers || (window.aplayers = []);\n\t\t\t\t  window.aplayers.push(ap);\n\t\t\t  </script>\n\n<p>nini</p>\n"},{"title":"picture-test","url":"/2020/11/10/picture-test/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"/2020/11/10/picture-test/1.png\" alt=\"测试图片\"></p>\n"},{"title":"Python程序设计作业#1","url":"/2020/11/10/py1-2018211308-2018211430-%E5%91%A8%E7%91%9E%E5%8F%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Python程序设计作业-1\"><a href=\"#Python程序设计作业-1\" class=\"headerlink\" title=\"Python程序设计作业#1\"></a>Python程序设计作业#1</h1><p>提交邮箱：<a href=\"mailto:&#x62;&#x75;&#112;&#116;&#110;&#x65;&#64;&#x67;&#109;&#x61;&#x69;&#x6c;&#x2e;&#99;&#111;&#109;\">&#x62;&#x75;&#112;&#116;&#110;&#x65;&#64;&#x67;&#109;&#x61;&#x69;&#x6c;&#x2e;&#99;&#111;&#109;</a></p>\n<p>邮件标题：py1-班级-学号-姓名</p>\n<p>邮件附件：py1-班级-学号-姓名.md（即本文件）</p>\n<p>截止时间：2020年10月26日23:59:59</p>\n<h2 id=\"作业题目\"><a href=\"#作业题目\" class=\"headerlink\" title=\"作业题目\"></a>作业题目</h2><p>使用asyncio的streams（coroutine based API）实现SOCKS5服务器。</p>\n<p>协议参考：RFC 1928 - SOCKS Protocol Verison 5</p>\n<p>只需要实现CMD X‘01’（即CONNECT）</p>\n<p>只需要实现METHOD X‘00’（即NO AUTHENTICATION REQUIRED）</p>\n<h2 id=\"作业内容\"><a href=\"#作业内容\" class=\"headerlink\" title=\"作业内容\"></a>作业内容</h2><p>程序源代码嵌入下方的code block中。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\">VERSION = <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">handle</span>(<span class=\"params\">reader, writer</span>):</span></span><br><span class=\"line\">    addr_from = writer.get_extra_info(<span class=\"string\">&#x27;peername&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;connect from<span class=\"subst\">&#123;addr_from&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    header = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">2</span>)</span><br><span class=\"line\">    ver, num_method = struct.unpack(<span class=\"string\">&quot;!BB&quot;</span>, header)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;ver == VERSION:<span class=\"subst\">&#123;ver == VERSION&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;num_method = %d&#x27;</span> % num_method)</span><br><span class=\"line\">    methods = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(num_method):</span><br><span class=\"line\">        methods.append(ord(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> methods:<span class=\"comment\">#无需认证</span></span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"comment\">#回应一个数据包，包括协议版本号，指定认证方法</span></span><br><span class=\"line\">    writer.write(struct.pack(<span class=\"string\">&quot;!BB&quot;</span>, VERSION, <span class=\"number\">0</span>))</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>)</span><br><span class=\"line\">    ver, cmd, rsv, atype = struct.unpack(<span class=\"string\">&quot;!BBBB&quot;</span>, request)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> ver == VERSION</span><br><span class=\"line\">    <span class=\"comment\">#ipv4</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> atype == <span class=\"number\">1</span>:</span><br><span class=\"line\">        address = socket.inet_ntoa(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>))</span><br><span class=\"line\">    <span class=\"comment\">#域名</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">3</span>:</span><br><span class=\"line\">        domain_length = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">        address = <span class=\"keyword\">await</span> reader.read(domain_length[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#ipv6</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">4</span>:</span><br><span class=\"line\">        address = socket.inet_ntop(socket.AF_INET6, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">16</span>))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    port = struct.unpack(<span class=\"string\">&#x27;!H&#x27;</span>, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">2</span>))</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span>:</span><br><span class=\"line\">            reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(address,port[<span class=\"number\">0</span>])</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            writer.close()</span><br><span class=\"line\">            writer.wait_closed()</span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> error:</span><br><span class=\"line\">        logging.error(error)</span><br><span class=\"line\">    reply = struct.pack(<span class=\"string\">&quot;!BBBBIH&quot;</span>, VERSION, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">#第一个字节为0表示成功代理</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span> <span class=\"keyword\">and</span> reply[<span class=\"number\">1</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">        tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(handle, <span class=\"string\">&#x27;0.0.0.0&#x27;</span>, <span class=\"number\">10086</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\">        </span><br><span class=\"line\">asyncio.run(main())</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码说明（可选）\"><a href=\"#代码说明（可选）\" class=\"headerlink\" title=\"代码说明（可选）\"></a>代码说明（可选）</h2><p>源代码中不要出现大段的说明注释，如果需要可以可以在本节中加上说明。</p>\n"},{"title":"Python程序设计作业#2","url":"/2020/11/10/py2-2018211308-2018211430-%E5%91%A8%E7%91%9E%E5%8F%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Python程序设计-2作业\"><a href=\"#Python程序设计-2作业\" class=\"headerlink\" title=\"Python程序设计#2作业\"></a>Python程序设计#2作业</h1><p>截止时间：2020年11月02日23:59:59</p>\n<h2 id=\"作业题目\"><a href=\"#作业题目\" class=\"headerlink\" title=\"作业题目\"></a>作业题目</h2><p>实现localProxy双协议（SOCKS5和HTTP tunnel）本地代理。</p>\n<p>支持（SOCKS5代理）基于#1作业的成果。</p>\n<p>支持HTTP tunnel（ 即HTTP CONNECT method）可用于HTTPS代理。</p>\n<p>关于HTTP tunnel可以参见：<a href=\"https://www.zhihu.com/question/21955083\">https://www.zhihu.com/question/21955083</a></p>\n<h2 id=\"作业内容\"><a href=\"#作业内容\" class=\"headerlink\" title=\"作业内容\"></a>作业内容</h2><p>程序源代码嵌入下方的code block中。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\">VERSION = <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socks5</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    addr_from = writer.get_extra_info(<span class=\"string\">&#x27;peername&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;connect from<span class=\"subst\">&#123;addr_from&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    header = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    header = first + header</span><br><span class=\"line\">    ver, num_method = struct.unpack(<span class=\"string\">&quot;!BB&quot;</span>, header)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;ver == VERSION:<span class=\"subst\">&#123;ver == VERSION&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;num_method = %d&#x27;</span> % num_method)</span><br><span class=\"line\">    methods = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(num_method):</span><br><span class=\"line\">        methods.append(ord(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> methods:<span class=\"comment\">#无需认证</span></span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"comment\">#回应一个数据包，包括协议版本号，指定认证方法</span></span><br><span class=\"line\">    writer.write(struct.pack(<span class=\"string\">&quot;!BB&quot;</span>, VERSION, <span class=\"number\">0</span>))</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>)</span><br><span class=\"line\">    ver, cmd, rsv, atype = struct.unpack(<span class=\"string\">&quot;!BBBB&quot;</span>, request)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> ver == VERSION</span><br><span class=\"line\">    <span class=\"comment\">#ipv4</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> atype == <span class=\"number\">1</span>:</span><br><span class=\"line\">        address = socket.inet_ntoa(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>))</span><br><span class=\"line\">    <span class=\"comment\">#域名</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">3</span>:</span><br><span class=\"line\">        domain_length = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">        address = <span class=\"keyword\">await</span> reader.read(domain_length[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#ipv6</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">4</span>:</span><br><span class=\"line\">        address = socket.inet_ntop(socket.AF_INET6, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">16</span>))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    port = struct.unpack(<span class=\"string\">&#x27;!H&#x27;</span>, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">2</span>))</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span>:</span><br><span class=\"line\">            reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(address,port[<span class=\"number\">0</span>])</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            writer.close()</span><br><span class=\"line\">            writer.wait_closed()</span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> error:</span><br><span class=\"line\">        logging.error(error)</span><br><span class=\"line\">    reply = struct.pack(<span class=\"string\">&quot;!BBBBIH&quot;</span>, VERSION, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">#第一个字节为0表示成功代理</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span> <span class=\"keyword\">and</span> reply[<span class=\"number\">1</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">        tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">httptunnel</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = (first + http_connect).decode()</span><br><span class=\"line\"></span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;:&#x27;</span>): </span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    domain_name = http_connect[<span class=\"number\">8</span> : i]</span><br><span class=\"line\">    j = i</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27; &#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    port = http_connect[i + <span class=\"number\">1</span> : j]</span><br><span class=\"line\">    </span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;domain_name:%s &#x27;</span> % domain_name)</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;port:%s&#x27;</span> % port)</span><br><span class=\"line\">    reply = <span class=\"string\">&#x27;HTTP/1.1 200 OK\\r\\n\\r\\n&#x27;</span></span><br><span class=\"line\">    writer.write(reply.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(domain_name,port)</span><br><span class=\"line\">    tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span>(<span class=\"params\">reader, writer</span>):</span></span><br><span class=\"line\">    first = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(first == <span class=\"string\">b&#x27;\\x05&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> socks5(first, reader, writer)</span><br><span class=\"line\">    <span class=\"keyword\">elif</span>(first == <span class=\"string\">b&#x27;C&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> httptunnel(first, reader, writer)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(test, <span class=\"string\">&#x27;0.0.0.0&#x27;</span>, <span class=\"number\">10086</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\">        </span><br><span class=\"line\">asyncio.run(main())</span><br><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码说明（可选）\"><a href=\"#代码说明（可选）\" class=\"headerlink\" title=\"代码说明（可选）\"></a>代码说明（可选）</h2><p>源代码中不要出现大段的说明注释，如果需要可以可以在本节中加上说明。</p>\n"},{"title":"Python程序设计作业#3","url":"/2020/11/10/py3-2018211308-2018211430-%E5%91%A8%E7%91%9E%E5%8F%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Python程序设计-3作业\"><a href=\"#Python程序设计-3作业\" class=\"headerlink\" title=\"Python程序设计#3作业\"></a>Python程序设计#3作业</h1><p>截止时间：2020年11月09日23:59:59</p>\n<h2 id=\"作业题目\"><a href=\"#作业题目\" class=\"headerlink\" title=\"作业题目\"></a>作业题目</h2><p>实现localProxy和remoteProxy分离式代理。</p>\n<p>支持SOCKS5代理和HTTPS代理（基于#2作业的成果）。</p>\n<p>localProxy收到的每个TCP连接单独建立代理TCP连接。</p>\n<h2 id=\"作业内容\"><a href=\"#作业内容\" class=\"headerlink\" title=\"作业内容\"></a>作业内容</h2><p>程序源代码嵌入下方的code block中。</p>\n<p>local proxy</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\">VERSION = <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socks5</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    addr_from = writer.get_extra_info(<span class=\"string\">&#x27;peername&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;connect from<span class=\"subst\">&#123;addr_from&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    header = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    header = first + header</span><br><span class=\"line\">    ver, num_method = struct.unpack(<span class=\"string\">&quot;!BB&quot;</span>, header)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;ver == VERSION:<span class=\"subst\">&#123;ver == VERSION&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;num_method = %d&#x27;</span> % num_method)</span><br><span class=\"line\">    methods = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(num_method):</span><br><span class=\"line\">        methods.append(ord(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> methods:<span class=\"comment\">#无需认证</span></span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"comment\">#回应一个数据包，包括协议版本号，指定认证方法</span></span><br><span class=\"line\">    writer.write(struct.pack(<span class=\"string\">&quot;!BB&quot;</span>, VERSION, <span class=\"number\">0</span>))</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>)</span><br><span class=\"line\">    ver, cmd, rsv, atype = struct.unpack(<span class=\"string\">&quot;!BBBB&quot;</span>, request)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> ver == VERSION</span><br><span class=\"line\">    <span class=\"comment\">#ipv4</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> atype == <span class=\"number\">1</span>:</span><br><span class=\"line\">        address = socket.inet_ntoa(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>))</span><br><span class=\"line\">    <span class=\"comment\">#域名</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">3</span>:</span><br><span class=\"line\">        domain_length = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">        address = <span class=\"keyword\">await</span> reader.read(domain_length[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#ipv6</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">4</span>:</span><br><span class=\"line\">        address = socket.inet_ntop(socket.AF_INET6, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">16</span>))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    port = struct.unpack(<span class=\"string\">&#x27;!H&#x27;</span>, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">2</span>))</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span>:</span><br><span class=\"line\">            reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(<span class=\"string\">&#x27;127.0.0.1&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">            http_connect = <span class=\"string\">&#x27;CONNECT &#x27;</span> + address.decode() + <span class=\"string\">&#x27;:&#x27;</span> + str(port[<span class=\"number\">0</span>]) + <span class=\"string\">&#x27; HTTP/1.1&#x27;</span></span><br><span class=\"line\">            print(<span class=\"string\">&#x27;http_connect&#x27;</span>)</span><br><span class=\"line\">            print(http_connect)</span><br><span class=\"line\">            writer_remote.write(http_connect.encode())</span><br><span class=\"line\">            <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">            reply = <span class=\"keyword\">await</span> (reader_remote.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            writer.close()</span><br><span class=\"line\">            writer.wait_closed()</span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> error:</span><br><span class=\"line\">        logging.error(error)</span><br><span class=\"line\">    reply = struct.pack(<span class=\"string\">&quot;!BBBBIH&quot;</span>, VERSION, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">#第一个字节为0表示成功代理</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span> <span class=\"keyword\">and</span> reply[<span class=\"number\">1</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">        tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">httptunnel</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = (first + http_connect).decode()</span><br><span class=\"line\"></span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\"></span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(<span class=\"string\">&#x27;127.0.0.1&#x27;</span>,<span class=\"number\">10010</span>)</span><br><span class=\"line\">    writer_remote.write(http_connect.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">    reply = <span class=\"keyword\">await</span> (reader_remote.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    <span class=\"comment\">#连接建立成功</span></span><br><span class=\"line\">    tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span>(<span class=\"params\">reader, writer</span>):</span></span><br><span class=\"line\">    first = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(first == <span class=\"string\">b&#x27;\\x05&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> socks5(first, reader, writer)</span><br><span class=\"line\">    <span class=\"keyword\">elif</span>(first == <span class=\"string\">b&#x27;C&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> httptunnel(first, reader, writer)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(test, <span class=\"string\">&#x27;127.0.0.1&#x27;</span>, <span class=\"number\">10086</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\">        </span><br><span class=\"line\">asyncio.run(main())</span><br></pre></td></tr></table></figure>\n\n<p>remote proxy</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">handle</span>(<span class=\"params\">reader_local, writer_local</span>):</span></span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader_local.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = http_connect.decode()</span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;:&#x27;</span>): </span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    domain_name = http_connect[<span class=\"number\">8</span> : i]</span><br><span class=\"line\">    j = i</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27; &#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    port = http_connect[i + <span class=\"number\">1</span> : j]</span><br><span class=\"line\"></span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(domain_name,port)</span><br><span class=\"line\"></span><br><span class=\"line\">    reply = <span class=\"string\">&#x27;HTTP/1.1 200 OK\\r\\n\\r\\n&#x27;</span></span><br><span class=\"line\">    writer_local.write(reply.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_local.drain()</span><br><span class=\"line\"></span><br><span class=\"line\">    tasks = [read_trans(reader_local, writer_remote), write_trans(reader_remote, writer_local)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(handle, <span class=\"string\">&#x27;127.0.0.1&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\">        </span><br><span class=\"line\">asyncio.run(main())</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"代码说明（可选）\"><a href=\"#代码说明（可选）\" class=\"headerlink\" title=\"代码说明（可选）\"></a>代码说明（可选）</h2><p>源代码中不要出现大段的说明注释，如果需要可以可以在本节中加上说明。</p>\n"},{"title":"Python程序设计作业#4","url":"/2020/11/18/py4-2018211308-2018211430-%E5%91%A8%E7%91%9E%E5%8F%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Python程序设计-4作业\"><a href=\"#Python程序设计-4作业\" class=\"headerlink\" title=\"Python程序设计#4作业\"></a>Python程序设计#4作业</h1><p>截止时间：2020年11月16日23:59:59</p>\n<h2 id=\"作业题目\"><a href=\"#作业题目\" class=\"headerlink\" title=\"作业题目\"></a>作业题目</h2><p>在作业#3的基础上实现localProxy命令行参数账号登录</p>\n<p>在作业#3的基础上实现remoteProxy多账号认证</p>\n<p>remoteProxy采用SQLite3数据库进行用户账号管理（用户名、密码）</p>\n<p>remoteProxy使用aiosqlite操作SQLite3数据库</p>\n<h2 id=\"作业内容\"><a href=\"#作业内容\" class=\"headerlink\" title=\"作业内容\"></a>作业内容</h2><p>程序源代码嵌入下方的code block中。</p>\n<p><strong>local_proxy</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> getopt</span><br><span class=\"line\">VERSION = <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socks5</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    addr_from = writer.get_extra_info(<span class=\"string\">&#x27;peername&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;connect from<span class=\"subst\">&#123;addr_from&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    header = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    header = first + header</span><br><span class=\"line\">    ver, num_method = struct.unpack(<span class=\"string\">&quot;!BB&quot;</span>, header)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;ver == VERSION:<span class=\"subst\">&#123;ver == VERSION&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;num_method = %d&#x27;</span> % num_method)</span><br><span class=\"line\">    methods = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(num_method):</span><br><span class=\"line\">        methods.append(ord(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> methods:<span class=\"comment\">#无需认证</span></span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"comment\">#回应一个数据包，包括协议版本号，指定认证方法</span></span><br><span class=\"line\">    writer.write(struct.pack(<span class=\"string\">&quot;!BB&quot;</span>, VERSION, <span class=\"number\">0</span>))</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>)</span><br><span class=\"line\">    ver, cmd, rsv, atype = struct.unpack(<span class=\"string\">&quot;!BBBB&quot;</span>, request)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> ver == VERSION</span><br><span class=\"line\">    <span class=\"comment\">#ipv4</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> atype == <span class=\"number\">1</span>:</span><br><span class=\"line\">        address = socket.inet_ntoa(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>))</span><br><span class=\"line\">    <span class=\"comment\">#域名</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">3</span>:</span><br><span class=\"line\">        domain_length = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">        address = <span class=\"keyword\">await</span> reader.read(domain_length[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#ipv6</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">4</span>:</span><br><span class=\"line\">        address = socket.inet_ntop(socket.AF_INET6, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">16</span>))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    port = struct.unpack(<span class=\"string\">&#x27;!H&#x27;</span>, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">2</span>))</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span>:</span><br><span class=\"line\">            reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(<span class=\"string\">&#x27;127.0.0.1&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">            http_connect = <span class=\"string\">&#x27;CONNECT &#x27;</span> + address.decode() + <span class=\"string\">&#x27;:&#x27;</span> + str(port[<span class=\"number\">0</span>]) + <span class=\"string\">&#x27; HTTP/1.1&#x27;</span></span><br><span class=\"line\">            print(<span class=\"string\">&#x27;http_connect&#x27;</span>)</span><br><span class=\"line\">            </span><br><span class=\"line\">            http_connect += <span class=\"string\">&#x27; %&#x27;</span> + username + <span class=\"string\">&#x27;%&#x27;</span> + password + <span class=\"string\">&#x27;%&#x27;</span></span><br><span class=\"line\">            print(http_connect)</span><br><span class=\"line\">            writer_remote.write(http_connect.encode())</span><br><span class=\"line\">            <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">            reply = <span class=\"keyword\">await</span> (reader_remote.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            writer.close()</span><br><span class=\"line\">            writer.wait_closed()</span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> error:</span><br><span class=\"line\">        logging.error(error)</span><br><span class=\"line\">    reply = struct.pack(<span class=\"string\">&quot;!BBBBIH&quot;</span>, VERSION, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">#第一个字节为0表示成功代理</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span> <span class=\"keyword\">and</span> reply[<span class=\"number\">1</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">        tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">httptunnel</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = (first + http_connect).decode()</span><br><span class=\"line\">    http_connect += <span class=\"string\">&#x27; %&#x27;</span> + username + <span class=\"string\">&#x27;%&#x27;</span> + password + <span class=\"string\">&#x27;%&#x27;</span></span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\"></span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(<span class=\"string\">&#x27;127.0.0.1&#x27;</span>,<span class=\"number\">10010</span>)</span><br><span class=\"line\">    writer_remote.write(http_connect.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">    reply = <span class=\"keyword\">await</span> (reader_remote.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    <span class=\"comment\">#连接建立成功</span></span><br><span class=\"line\">    tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span>(<span class=\"params\">reader, writer</span>):</span></span><br><span class=\"line\">    first = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(first == <span class=\"string\">b&#x27;\\x05&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> socks5(first, reader, writer)</span><br><span class=\"line\">    <span class=\"keyword\">elif</span>(first == <span class=\"string\">b&#x27;C&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> httptunnel(first, reader, writer)</span><br><span class=\"line\"></span><br><span class=\"line\">username = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">password = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username, password</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(sys.argv) != <span class=\"number\">3</span>):</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;usage: local-proxy.py username, password&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        username = sys.argv[<span class=\"number\">1</span>]</span><br><span class=\"line\">        password = sys.argv[<span class=\"number\">2</span>]</span><br><span class=\"line\">    print(username)</span><br><span class=\"line\"></span><br><span class=\"line\">    print(password)</span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(test, <span class=\"string\">&#x27;0.0.0.0&#x27;</span>, <span class=\"number\">10086</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\">        </span><br><span class=\"line\">asyncio.run(main())</span><br></pre></td></tr></table></figure>\n\n<p><strong>remote-proxy</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\"><span class=\"keyword\">import</span> aiosqlite</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">handle</span>(<span class=\"params\">reader_local, writer_local</span>):</span></span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(<span class=\"string\">&#x27;account.db&#x27;</span>)</span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader_local.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = http_connect.decode()</span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\"></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;:&#x27;</span>): </span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    domain_name = http_connect[<span class=\"number\">8</span> : i]</span><br><span class=\"line\">    j = i</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27; &#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    port = http_connect[i + <span class=\"number\">1</span> : j]</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    j = i + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    k = j + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[k] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        k += <span class=\"number\">1</span></span><br><span class=\"line\">    username = http_connect[i + <span class=\"number\">1</span>: j]</span><br><span class=\"line\">    password = http_connect[j + <span class=\"number\">1</span>: k]</span><br><span class=\"line\">    print(username)</span><br><span class=\"line\">    print(password)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;SELECT * FROM accout where username = \\&#x27;&#x27;</span> + username + <span class=\"string\">&#x27;\\&#x27; and password = \\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;&#x27;</span></span><br><span class=\"line\">    print(sql)</span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) != <span class=\"number\">1</span>):</span><br><span class=\"line\">        logging.error(<span class=\"string\">&#x27;wrong account&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;right account&#x27;</span>)</span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(domain_name,port)</span><br><span class=\"line\"></span><br><span class=\"line\">    reply = <span class=\"string\">&#x27;HTTP/1.1 200 OK\\r\\n\\r\\n&#x27;</span></span><br><span class=\"line\">    writer_local.write(reply.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_local.drain()</span><br><span class=\"line\"></span><br><span class=\"line\">    tasks = [read_trans(reader_local, writer_remote), write_trans(reader_remote, writer_local)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\">\t<span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(handle, <span class=\"string\">&#x27;127.0.0.1&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\">        </span><br><span class=\"line\">asyncio.run(main())</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"代码说明（可选）\"><a href=\"#代码说明（可选）\" class=\"headerlink\" title=\"代码说明（可选）\"></a>代码说明（可选）</h2><p>源代码中不要出现大段的说明注释，如果需要可以可以在本节中加上说明。</p>\n"},{"title":"Python程序设计作业#5","url":"/2020/11/30/py5-2018211308-2018211430-%E5%91%A8%E7%91%9E%E5%8F%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Python程序设计-5作业\"><a href=\"#Python程序设计-5作业\" class=\"headerlink\" title=\"Python程序设计#5作业\"></a>Python程序设计#5作业</h1><p>截止时间：2020年11月23日23:59:59</p>\n<h2 id=\"作业题目\"><a href=\"#作业题目\" class=\"headerlink\" title=\"作业题目\"></a>作业题目</h2><p>在作业#4的基础上实现remoteProxy对每个用户进行单独流控</p>\n<p>SQLite3数据库的每个用户的账号信息中增加带宽信息（用户名、密码、带宽）</p>\n<p>带宽的单位为BPS（Bytes / Second，字节每秒），该带宽为某个用户的所有连接的转发数据总和带宽。</p>\n<p>此次作业需要在【代码说明】中陈述流控的技术方案和实现机制。</p>\n<h2 id=\"作业内容\"><a href=\"#作业内容\" class=\"headerlink\" title=\"作业内容\"></a>作业内容</h2><p>程序源代码嵌入下方的code block中。</p>\n<p>local-proxy</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> getopt</span><br><span class=\"line\">VERSION = <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socks5</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    addr_from = writer.get_extra_info(<span class=\"string\">&#x27;peername&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;connect from<span class=\"subst\">&#123;addr_from&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    header = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    header = first + header</span><br><span class=\"line\">    ver, num_method = struct.unpack(<span class=\"string\">&quot;!BB&quot;</span>, header)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;ver == VERSION:<span class=\"subst\">&#123;ver == VERSION&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;num_method = %d&#x27;</span> % num_method)</span><br><span class=\"line\">    methods = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(num_method):</span><br><span class=\"line\">        methods.append(ord(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> methods:<span class=\"comment\">#无需认证</span></span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"comment\">#回应一个数据包，包括协议版本号，指定认证方法</span></span><br><span class=\"line\">    writer.write(struct.pack(<span class=\"string\">&quot;!BB&quot;</span>, VERSION, <span class=\"number\">0</span>))</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>)</span><br><span class=\"line\">    ver, cmd, rsv, atype = struct.unpack(<span class=\"string\">&quot;!BBBB&quot;</span>, request)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> ver == VERSION</span><br><span class=\"line\">    <span class=\"comment\">#ipv4</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> atype == <span class=\"number\">1</span>:</span><br><span class=\"line\">        address = socket.inet_ntoa(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>))</span><br><span class=\"line\">    <span class=\"comment\">#域名</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">3</span>:</span><br><span class=\"line\">        domain_length = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">        address = <span class=\"keyword\">await</span> reader.read(domain_length[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#ipv6</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">4</span>:</span><br><span class=\"line\">        address = socket.inet_ntop(socket.AF_INET6, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">16</span>))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    port = struct.unpack(<span class=\"string\">&#x27;!H&#x27;</span>, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">2</span>))</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span>:</span><br><span class=\"line\">            reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(<span class=\"string\">&#x27;127.0.0.1&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">            http_connect = <span class=\"string\">&#x27;CONNECT &#x27;</span> + address + <span class=\"string\">&#x27;:&#x27;</span> + str(port[<span class=\"number\">0</span>]) + <span class=\"string\">&#x27; HTTP/1.1&#x27;</span></span><br><span class=\"line\">            print(<span class=\"string\">&#x27;http_connect&#x27;</span>)</span><br><span class=\"line\">            </span><br><span class=\"line\">            http_connect += <span class=\"string\">&#x27; %&#x27;</span> + username + <span class=\"string\">&#x27;%&#x27;</span> + password + <span class=\"string\">&#x27;%&#x27;</span></span><br><span class=\"line\">            print(http_connect)</span><br><span class=\"line\">            writer_remote.write(http_connect.encode())</span><br><span class=\"line\">            <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">            reply = <span class=\"keyword\">await</span> (reader_remote.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            writer.close()</span><br><span class=\"line\">            writer.wait_closed()</span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> error:</span><br><span class=\"line\">        logging.error(error)</span><br><span class=\"line\">    reply = struct.pack(<span class=\"string\">&quot;!BBBBIH&quot;</span>, VERSION, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">#第一个字节为0表示成功代理</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span> <span class=\"keyword\">and</span> reply[<span class=\"number\">1</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">        tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">httptunnel</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = (first + http_connect).decode()</span><br><span class=\"line\">    http_connect += <span class=\"string\">&#x27; %&#x27;</span> + username + <span class=\"string\">&#x27;%&#x27;</span> + password + <span class=\"string\">&#x27;%&#x27;</span></span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\"></span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(<span class=\"string\">&#x27;127.0.0.1&#x27;</span>,<span class=\"number\">10010</span>)</span><br><span class=\"line\">    writer_remote.write(http_connect.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">    reply = <span class=\"keyword\">await</span> (reader_remote.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    <span class=\"comment\">#连接建立成功</span></span><br><span class=\"line\">    tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span>(<span class=\"params\">reader, writer</span>):</span></span><br><span class=\"line\">    first = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(first == <span class=\"string\">b&#x27;\\x05&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> socks5(first, reader, writer)</span><br><span class=\"line\">    <span class=\"keyword\">elif</span>(first == <span class=\"string\">b&#x27;C&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> httptunnel(first, reader, writer)</span><br><span class=\"line\"></span><br><span class=\"line\">username = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">password = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username, password</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(sys.argv) != <span class=\"number\">3</span>):</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;usage: local-proxy.py username, password&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        username = sys.argv[<span class=\"number\">1</span>]</span><br><span class=\"line\">        password = sys.argv[<span class=\"number\">2</span>]</span><br><span class=\"line\">    print(username)</span><br><span class=\"line\"></span><br><span class=\"line\">    print(password)</span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(test, <span class=\"string\">&#x27;0.0.0.0&#x27;</span>, <span class=\"number\">10086</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\">        </span><br><span class=\"line\">asyncio.run(main())</span><br></pre></td></tr></table></figure>\n\n<p>remote-proxy</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\"><span class=\"keyword\">import</span> aiosqlite</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">handle</span>(<span class=\"params\">reader_local, writer_local</span>):</span></span><br><span class=\"line\">    print(<span class=\"string\">&#x27;start working&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(<span class=\"string\">&#x27;account.db&#x27;</span>)</span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader_local.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = http_connect.decode()</span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\"></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;:&#x27;</span>): </span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    domain_name = http_connect[<span class=\"number\">8</span> : i]</span><br><span class=\"line\">    j = i</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27; &#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    port = http_connect[i + <span class=\"number\">1</span> : j]</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    j = i + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    k = j + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[k] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        k += <span class=\"number\">1</span></span><br><span class=\"line\">    username = http_connect[i + <span class=\"number\">1</span>: j]</span><br><span class=\"line\">    password = http_connect[j + <span class=\"number\">1</span>: k]</span><br><span class=\"line\">    print(username)</span><br><span class=\"line\">    print(password)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;SELECT * FROM accout where username = \\&#x27;&#x27;</span> + username + <span class=\"string\">&#x27;\\&#x27; and password = \\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;&#x27;</span></span><br><span class=\"line\">    print(sql)</span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) != <span class=\"number\">1</span>):</span><br><span class=\"line\">        logging.error(<span class=\"string\">&#x27;wrong account&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;right account&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(username <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> username_to_token_bucket.keys()):<span class=\"comment\">#用户名不在dict中，要创建令牌桶</span></span><br><span class=\"line\">        username_to_token_bucket[username] = <span class=\"number\">0</span></span><br><span class=\"line\">        print(<span class=\"string\">&#x27;init bucket&#x27;</span>)</span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(domain_name,port)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select speed FROM accout where username = \\&#x27;&#x27;</span> + username + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> </span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">    speed = row[<span class=\"number\">0</span>][<span class=\"number\">0</span>]</span><br><span class=\"line\">    reply = <span class=\"string\">&#x27;HTTP/1.1 200 OK\\r\\n\\r\\n&#x27;</span></span><br><span class=\"line\">    writer_local.write(reply.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_local.drain()</span><br><span class=\"line\"></span><br><span class=\"line\">    tasks = [read_trans(reader_local, writer_remote), write_trans(reader_remote, writer_local, username, speed)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks,return_when=asyncio.FIRST_COMPLETED)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect from clinet&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer, username, speed</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    data = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(data == <span class=\"string\">&#x27;&#x27;</span>):</span><br><span class=\"line\">            data = <span class=\"keyword\">await</span> reader_remote.read(int(<span class=\"number\">0.01</span> * speed))<span class=\"comment\"># 10.01s    speed  Bytes/s</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect from server&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(username_to_token_bucket[username] &lt; <span class=\"number\">10</span>):<span class=\"comment\">#如果桶里的令牌不够那么就等待，注意，这里用了asyncio.sleep(0)</span></span><br><span class=\"line\">            <span class=\"comment\"># 目的是让cpu去执行其他部分的代码，防止在此处阻塞</span></span><br><span class=\"line\">            <span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:<span class=\"comment\">#令牌够了，把data发出去，同时把data清空</span></span><br><span class=\"line\">            username_to_token_bucket[username] -= <span class=\"number\">10</span></span><br><span class=\"line\">            writer.write(data)</span><br><span class=\"line\">            <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">            data = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">token_bucket_plus_one</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> username_to_token_bucket.keys():<span class=\"comment\"># 每1秒可以攒够1000个令牌，所以平均速率为100KB/s</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> username_to_token_bucket[k] &lt; <span class=\"number\">10000</span>:</span><br><span class=\"line\">                username_to_token_bucket[k] += <span class=\"number\">10</span></span><br><span class=\"line\">                print(username_to_token_bucket[k])</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">0.01</span>)</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_task</span>():</span></span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(handle, <span class=\"string\">&#x27;127.0.0.1&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    tasks = [_task(), token_bucket_plus_one()]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\">username_to_token_bucket = &#123;&#125;</span><br><span class=\"line\">asyncio.run(main())</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"代码说明\"><a href=\"#代码说明\" class=\"headerlink\" title=\"代码说明\"></a>代码说明</h2><p>源代码中不要出现大段的说明注释，所有文字描述在本节中以行号引用说明。</p>\n<p><strong>用一个全局变量username_to_token_bucket{username, bucket}表示某个用户对应令牌桶的令牌数量</strong></p>\n<p>这样就解决了同一用户的所有连接的总速率不会超过限制的速率</p>\n<p>每个用户的令牌桶令牌数每隔一段时间自动增加，一旦加到桶满了，就不加了</p>\n<p>当有数据要发送时，首先检查令牌够不够，如果够，直接发送，然后把桶里的令牌数减少</p>\n<p>如果桶里令牌数不够，那么就等待，注意，为了不使程序阻塞，这里使用了</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"keyword\">continue</span></span><br></pre></td></tr></table></figure>\n\n<p>来让出cpu，使cpu去执行程序的其他部分</p>\n"},{"title":"Python程序设计作业#7","url":"/2020/12/07/py7-2018211308-2018211430-%E5%91%A8%E7%91%9E%E5%8F%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Python程序设计-7作业\"><a href=\"#Python程序设计-7作业\" class=\"headerlink\" title=\"Python程序设计#7作业\"></a>Python程序设计#7作业</h1><p>截止时间：2020年12月7日23:59:59</p>\n<h2 id=\"作业题目\"><a href=\"#作业题目\" class=\"headerlink\" title=\"作业题目\"></a>作业题目</h2><p>实现remoteProxy的用户数据库的REST管理接口</p>\n<p>基于Sanic实现对user.db数据库（SQLite）的管理接口</p>\n<p>支持对user用户的增、删、改、查操作。</p>\n<p>初步掌握Sanic的使用方法。</p>\n<h2 id=\"remoteRest代码\"><a href=\"#remoteRest代码\" class=\"headerlink\" title=\"remoteRest代码\"></a>remoteRest代码</h2><p>remoteRest代码嵌入下方的code block中。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sanic <span class=\"keyword\">import</span> Sanic</span><br><span class=\"line\"><span class=\"keyword\">from</span> sanic <span class=\"keyword\">import</span> response</span><br><span class=\"line\"><span class=\"keyword\">from</span> sanic <span class=\"keyword\">import</span> exceptions</span><br><span class=\"line\"><span class=\"keyword\">from</span> sanic.response <span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> aiosqlite</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> signal</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\">app = Sanic(<span class=\"string\">&quot;RemoteProxyAdmin&quot;</span>)</span><br><span class=\"line\">app.config.DB_NAME = <span class=\"string\">&#x27;user.db&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">@app.exception(exceptions.NotFound)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">ignore_404</span>(<span class=\"params\">req, exc</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.text(<span class=\"string\">&#x27;errUrl&#x27;</span>, status=<span class=\"number\">404</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.get(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">userList</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    userList = list()</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> aiosqlite.connect(app.config.DB_NAME) <span class=\"keyword\">as</span> db:</span><br><span class=\"line\">        <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> db.execute(<span class=\"string\">&quot;SELECT name, password, dataRate FROM user;&quot;</span>) <span class=\"keyword\">as</span> cursor:</span><br><span class=\"line\">            <span class=\"keyword\">async</span> <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> cursor:</span><br><span class=\"line\">                user = &#123;<span class=\"string\">&#x27;name&#x27;</span> : row[<span class=\"number\">0</span>], <span class=\"string\">&#x27;password&#x27;</span> : row[<span class=\"number\">1</span>], <span class=\"string\">&#x27;dataRate:&#x27;</span> : row[<span class=\"number\">2</span>]&#125;</span><br><span class=\"line\">                logging.debug(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;user&#125;</span>&#x27;</span>)</span><br><span class=\"line\">                userList.append(user)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(userList)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.put(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">updateUserInfo</span>(<span class=\"params\">req</span>):</span><span class=\"comment\">#每次只能更新一条用户的数据</span></span><br><span class=\"line\">    update_user_info = req.json</span><br><span class=\"line\">    name = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    password = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    dataRate = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> update_user_info.items():</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(k == <span class=\"string\">&#x27;name&#x27;</span>):</span><br><span class=\"line\">            name = v</span><br><span class=\"line\">        <span class=\"keyword\">elif</span>(k == <span class=\"string\">&#x27;password&#x27;</span>):</span><br><span class=\"line\">            password = v</span><br><span class=\"line\">        <span class=\"keyword\">elif</span>(k == <span class=\"string\">&#x27;dataRate&#x27;</span>):</span><br><span class=\"line\">            dataRate = v</span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(app.config.DB_NAME)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select * from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span></span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) == <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;user not exist&quot;</span>&#125;)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;update user set password = \\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;, dataRate = &#x27;</span> + str(dataRate) + <span class=\"string\">&#x27; where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;update successful&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.post(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insertUserInfo</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    insert_user_info = req.json</span><br><span class=\"line\">    name = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    password = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    dataRate = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> k,v <span class=\"keyword\">in</span> insert_user_info.items():</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(k == <span class=\"string\">&#x27;name&#x27;</span>):</span><br><span class=\"line\">            name = v</span><br><span class=\"line\">        <span class=\"keyword\">elif</span>(k == <span class=\"string\">&#x27;password&#x27;</span>):</span><br><span class=\"line\">            password = v</span><br><span class=\"line\">        <span class=\"keyword\">elif</span>(k == <span class=\"string\">&#x27;dataRate&#x27;</span>):</span><br><span class=\"line\">            dataRate = v</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select * from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span>    </span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(app.config.DB_NAME)</span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) != <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;user already exist&quot;</span>&#125;)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;insert into user values(\\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;,\\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;,&#x27;</span> + str(dataRate) + <span class=\"string\">&#x27;);&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;insert successful&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.delete(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">deleteUserInfo</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    delete_user_info = req.json</span><br><span class=\"line\">    name = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> v <span class=\"keyword\">in</span> delete_user_info.values():</span><br><span class=\"line\">        name = v</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select * from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span>  </span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(app.config.DB_NAME)</span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) == <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;user not exist&quot;</span>&#125;)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;delete from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;delete successful&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(&quot;/zrf&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span>(<span class=\"params\">request</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;hello&quot;</span>: <span class=\"string\">&quot;world&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app.run(host=<span class=\"string\">&quot;0.0.0.0&quot;</span>, port=<span class=\"number\">8000</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码说明\"><a href=\"#代码说明\" class=\"headerlink\" title=\"代码说明\"></a>代码说明</h2><p>源代码中不要出现大段的说明注释，所有文字描述在本节中以行号引用说明。</p>\n"},{"title":"Python程序设计作业#8","url":"/2020/12/08/py8-2018211308-2018211430-%E5%91%A8%E7%91%9E%E5%8F%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Python程序设计-8作业\"><a href=\"#Python程序设计-8作业\" class=\"headerlink\" title=\"Python程序设计#8作业\"></a>Python程序设计#8作业</h1><p>截止时间：2020年12月14日23:59:59</p>\n<h2 id=\"作业题目\"><a href=\"#作业题目\" class=\"headerlink\" title=\"作业题目\"></a>作业题目</h2><p>使用venv创建开发环境</p>\n<p>使用命令冻结依赖关系生成 requirements.txt</p>\n<p>测试使用requirements.txt 重新部署在其他环境位置</p>\n<p>将以上内容写成报告写在Markdown文档中提交作业</p>\n<h2 id=\"报告内容\"><a href=\"#报告内容\" class=\"headerlink\" title=\"报告内容\"></a>报告内容</h2><p>本次作业不涉及代码，格式不做要求。</p>\n<p>我的环境为ubuntu 18.04  python3.7</p>\n<p>1、使用venv创建开发环境</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">python3 -m venv myenv</span><br></pre></td></tr></table></figure>\n\n<p>提示要安装python3-venv</p>\n<p>执行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">apt install python3.7-venv</span><br></pre></td></tr></table></figure>\n\n<p>安装好后虚拟开发环境就搭建好了，然后我随意安装了几个pip包，供接下来的测试使用</p>\n<p>2、使用命令冻结依赖关系生成 requirements.txt</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>\n\n<p>可以查看requirements.txt里的内容</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">cat requirements.txt</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">aiosqlite&#x3D;&#x3D;0.16.0</span><br><span class=\"line\">certifi&#x3D;&#x3D;2020.12.5</span><br><span class=\"line\">h11&#x3D;&#x3D;0.9.0</span><br><span class=\"line\">httpcore&#x3D;&#x3D;0.11.1</span><br><span class=\"line\">httpx&#x3D;&#x3D;0.15.4</span><br><span class=\"line\">idna&#x3D;&#x3D;2.10</span><br><span class=\"line\">pkg-resources&#x3D;&#x3D;0.0.0</span><br><span class=\"line\">rfc3986&#x3D;&#x3D;1.4.0</span><br><span class=\"line\">sniffio&#x3D;&#x3D;1.2.0</span><br><span class=\"line\">typing-extensions&#x3D;&#x3D;3.7.4.3</span><br><span class=\"line\">websockets&#x3D;&#x3D;8.1</span><br></pre></td></tr></table></figure>\n\n<p>3、在新建一个虚拟环境</p>\n<p>​    首先退出该虚拟环境</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">deactivate</span><br></pre></td></tr></table></figure>\n\n<p>​    然后新建一个虚拟环境</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">python3 -m venv newenv</span><br><span class=\"line\">source newenv&#x2F;bin&#x2F;activate</span><br></pre></td></tr></table></figure>\n\n<p>4、使用requirements.txt 重新部署在其他环境位置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>\n\n<p>执行后发现正在安装许多包</p>\n<p>安装完成后，查看当前安装了哪些包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pip list</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">aiosqlite (0.16.0)</span><br><span class=\"line\">certifi (2020.12.5)</span><br><span class=\"line\">h11 (0.9.0)</span><br><span class=\"line\">httpcore (0.11.1)</span><br><span class=\"line\">httpx (0.15.4)</span><br><span class=\"line\">idna (2.10)</span><br><span class=\"line\">pip (9.0.1)</span><br><span class=\"line\">pkg-resources (0.0.0)</span><br><span class=\"line\">rfc3986 (1.4.0)</span><br><span class=\"line\">setuptools (39.0.1)</span><br><span class=\"line\">sniffio (1.2.0)</span><br><span class=\"line\">typing-extensions (3.7.4.3)</span><br><span class=\"line\">websockets (8.1)</span><br></pre></td></tr></table></figure>\n\n<p>发现把requirements.txt全部包部署到了新环境中</p>\n<p>测试成功</p>\n"},{"title":"pyenv安装","url":"/2021/01/22/pyenv%E5%AE%89%E8%A3%85/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>pyenv可以管理python版本</p>\n<p><a href=\"https://github.com/pyenv/pyenv\">官网</a></p>\n<p>以我的系统ubuntu18.04为例</p>\n<p>首先要配置好环境</p>\n<p><code>sudo apt-get update; sudo apt-get install --no-install-recommends make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev</code></p>\n<p>然后安装pyenv</p>\n<p><code>url https://pyenv.run | bash</code></p>\n<p>执行完成后</p>\n<p>将</p>\n<p><code>export PATH=&quot;/root/.pyenv/bin:$PATH&quot; eval &quot;$(pyenv init -)&quot; eval &quot;$(pyenv virtualenv-init -)&quot;</code></p>\n<p>加入~/.bashrc中</p>\n<p>然后</p>\n<p><code>source ~/.bashrc</code></p>\n<p>pyenv就安装好了</p>\n<p>参考这个<a href=\"http://einverne.github.io/post/2017/04/pyenv.html\">博客</a></p>\n<p>参考<a href=\"http://101.200.186.158/2021/01/22/pyenv%E6%8D%A2%E6%BA%90/\">pyenv换源</a></p>\n<p>参考<a href=\"http://101.200.186.158/2021/01/22/%E9%98%BF%E9%87%8C%E4%BA%91%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5github/\">阿里云无法连接github</a></p>\n"},{"title":"pyenv换源加速下载","url":"/2021/01/22/pyenv%E6%8D%A2%E6%BA%90/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>安装好pyenv后执行<code>pyenv install 3.7.3</code>会发现是从python官方源下载的很慢</p>\n<p>因此我们需要换源</p>\n<p>首先从国内源下载好，放进~/.pyenv/cache中</p>\n<p>如果没有cache这个文件夹就新建一个<code>mkdir ~/.pyenv/cache</code></p>\n<p>然后执行<code>pyenv install 3.7.3</code>就可以不用下载，直接用我们下载好的进行安装了</p>\n<p>可以直接用以下命令</p>\n<p><code>v=3.7.3;wget https://npm.taobao.org/mirrors/python/$v/Python-$v.tar.xz -P ~/.pyenv/cache/;pyenv install $v</code></p>\n<p>修改v = 版本号，即可安装相应的版本</p>\n<p>v是一个变量</p>\n<p>然后从国内淘宝源下载对应的版本并放入<code>~/.pyenv/cache</code>后，</p>\n<p>执行pyenv install 3.7.3</p>\n"},{"title":"常用shell命令","url":"/2020/09/13/shell/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"date\"><a href=\"#date\" class=\"headerlink\" title=\"date\"></a>date</h2><p>会显示当前的时间</p>\n<h2 id=\"echo\"><a href=\"#echo\" class=\"headerlink\" title=\"echo\"></a>echo</h2><p>回显，</p>\n<p><code>$echo hello</code></p>\n<p><code>hello</code></p>\n<p>如果想要显示多个单词怎么办呢</p>\n<p><code>$echo “hello wordl”</code></p>\n<p>用引号即可</p>\n<p><code>$echo hello\\ world</code></p>\n<h3 id=\"echo-PATH\"><a href=\"#echo-PATH\" class=\"headerlink\" title=\"echo $PATH\"></a>echo $PATH</h3><p>显示出命令执行的路径。shell是一个编程环境，就像python一样。那么shell在执行echo或者date程序时，它就要找到程序的位置，就会询问环境变量，包含在$PATH中</p>\n<h3 id=\"which-echo\"><a href=\"#which-echo\" class=\"headerlink\" title=\"which echo\"></a>which echo</h3><p>显示执行echo命令的路径</p>\n<h2 id=\"pwd\"><a href=\"#pwd\" class=\"headerlink\" title=\"pwd\"></a>pwd</h2><p>print working directory打印当前工作路径</p>\n<h2 id=\"cd\"><a href=\"#cd\" class=\"headerlink\" title=\"cd\"></a>cd</h2><p>change directory 改变工作路径</p>\n<h3 id><a href=\"#\" class=\"headerlink\" title=\".\"></a>.</h3><p>当前路径</p>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"..\"></a>..</h3><p>当前路径的父目录</p>\n<p>绝对路径，相对路径</p>\n<h3 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"~\"></a>~</h3><p>回到用户目录</p>\n<h3 id=\"-3\"><a href=\"#-3\" class=\"headerlink\" title=\"-\"></a>-</h3><p>回到上一个路径</p>\n<h2 id=\"ls\"><a href=\"#ls\" class=\"headerlink\" title=\"ls\"></a>ls</h2><h3 id=\"ls-l\"><a href=\"#ls-l\" class=\"headerlink\" title=\"ls -l\"></a>ls -l</h3><p>drwxr-xr-x</p>\n<p>第一个字母如果是d，表示是一个目录，如果是-，表示是一个文件</p>\n<p>第一个字母表示文件类型</p>\n<p>d:目录</p>\n<p>-:普通文件</p>\n<p>l:符号链接文件</p>\n<p>b:块设备</p>\n<p>c:字符设备</p>\n<p>p:命令管道文件</p>\n<p>s:套接字文件</p>\n<p>接下来是三组，每组有三个字母</p>\n<p>r:read读权限    w:write写权限    x:excute执行权限</p>\n<p>也可以用数字表示r=4,w=2,x=1，把每一组的rwx对应的数字加起来，上面的即为755</p>\n<p>第一组表示文件拥有者权限，第二组表示同组用户权限，最后一组表示其他用户权限（不包括root）</p>\n<p>对于目录来说，为了进入目录，你需要有执行权限，为了列出目录的内容，你需要有读权限</p>\n<h2 id=\"mv\"><a href=\"#mv\" class=\"headerlink\" title=\"mv\"></a>mv</h2><p>将一个文件从一个路径移动并重命名到另一个路径下</p>\n<h2 id=\"cp\"><a href=\"#cp\" class=\"headerlink\" title=\"cp\"></a>cp</h2><p>将一个文件从一个路径拷贝并重命名到另一个路径下</p>\n<h2 id=\"rm\"><a href=\"#rm\" class=\"headerlink\" title=\"rm\"></a>rm</h2><p>移除一个文件</p>\n<p>rm只能移除当个文件，如果你想移除目录，加上-r递归移除</p>\n<h2 id=\"rmdir\"><a href=\"#rmdir\" class=\"headerlink\" title=\"rmdir\"></a>rmdir</h2><p>移除一个空目录</p>\n<h2 id=\"mkdir\"><a href=\"#mkdir\" class=\"headerlink\" title=\"mkdir\"></a>mkdir</h2><p>创建一个目录，如果目录已存在，则会报错</p>\n<p>如果想创建一个有空格的目录怎么办</p>\n<p><code>$mkdir hello world</code></p>\n<p>这样会创建两个目录</p>\n<p><code>mkdir &quot;hello world&quot;</code></p>\n<p>这样就可以了</p>\n<h2 id=\"man\"><a href=\"#man\" class=\"headerlink\" title=\"man\"></a>man</h2><p>查看某个命令的手册，按q退出</p>\n<p><code>$man ls</code></p>\n<h2 id=\"ctrl-L\"><a href=\"#ctrl-L\" class=\"headerlink\" title=\"ctrl L\"></a>ctrl L</h2><p>清空控制台</p>\n<h2 id=\"cat\"><a href=\"#cat\" class=\"headerlink\" title=\"cat\"></a>cat</h2><p>打印文件的内容</p>\n<h3 id=\"重定向\"><a href=\"#重定向\" class=\"headerlink\" title=\"重定向\"></a>重定向</h3><p><code>$echo hello &gt; hello.txt</code></p>\n<p>echo本来会将其输出写入到标准输出，默认情况下就是终端；使用&gt;将其输出重定向到hello.tex文件中，如果hello.txt文件不存在，则会新建一个hello.txt；如果存在hello.txt则会覆盖里面原有的内容。</p>\n<p>使用&gt;&gt;将输出以追加方式重定向到hello.txt中</p>\n<p>也有输入重定向</p>\n<p><code>$cat &lt; hello.txt</code></p>\n<p>将cat的输入重定向到hello.txt,输出为</p>\n<p><code>hello</code></p>\n<p><code>$cat &lt; hello.txt &gt; hello2.txt</code></p>\n<p>将hello.txt中的内容拷贝到hello2.txt中</p>\n<p>cat对重定向的过程一无所知</p>\n<h2 id=\"-4\"><a href=\"#-4\" class=\"headerlink\" title=\"|\"></a>|</h2><p>管道，将|左边的输出作为右边的输入</p>\n<p><code>$ls -l /</code></p>\n<p>会输出/目录下的详细信息，如果我只想要最后一行信息怎么办呢</p>\n<p><code>$tail -n1</code></p>\n<p>可以输出最后一行</p>\n<p><code>$ls -l / | tail -n1</code></p>\n<p>左边的输出作为右边的输入，则会输出最后一行</p>\n<p>ls和tail对彼此的存在毫不知情</p>\n<h2 id=\"grep\"><a href=\"#grep\" class=\"headerlink\" title=\"grep\"></a>grep</h2><p>用于查找文件中符合条件的字符串，如果发现某文件含有指定的字符，则会把含有字符的这一行打印出来；如果不指定任何文件名称，或者给予的文件名是-，则grep命令会从标准输入设备读取数据</p>\n<p><code>$curl --head www.baidu.com</code></p>\n<p><img src=\"/2020/09/13/shell/Users\\dell\\AppData\\Roaming\\Typora\\typora-user-images\\image-20200913150417575.png\" alt=\"image-20200913150417575\"></p>\n<p><code>curl --head www.baidu.com | grep -i content-length</code></p>\n<p><img src=\"/2020/09/13/shell/Users\\dell\\AppData\\Roaming\\Typora\\typora-user-images\\image-20200913150514334.png\" alt=\"image-20200913150514334\"></p>\n<h2 id=\"tee\"><a href=\"#tee\" class=\"headerlink\" title=\"tee\"></a>tee</h2><p>从标准输入设备读取数据，将其内容输出到标准输出设备，同时保存到文件，</p>\n<h2 id=\"chmod\"><a href=\"#chmod\" class=\"headerlink\" title=\"chmod\"></a>chmod</h2><p>change mode,修改用户对文件的权限</p>\n<p>只有文件所有者和root用户可以修改权限</p>\n<p>chmod mode file</p>\n<p>mode：</p>\n<p>[ugoa] [+-=] [rwx]</p>\n<p>u表示该文件拥有者，g表示与该文件的拥有者属于同一个群组的用户，o表示其他用户，a表示所有用户</p>\n<p>+表示增加权限，-表示取消权限，=表示唯一设定权限</p>\n<p>r表示可读取，w表示可写入，x表示可执行</p>\n<p><code>chomd u+x foo.bar</code></p>\n<p><code>chmod ug+w, o-w foo.bar</code></p>\n<p>此外chmod也可以用数字来表示权限</p>\n<p><code>chmod 777 foo.bar</code></p>\n"},{"title":"test_my_blog","url":"/2020/09/12/test-my-blog/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>"},{"title":"typora行内公式","url":"/2021/01/08/typora%E8%A1%8C%E5%86%85%E5%85%AC%E5%BC%8F/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>这个是需要先设置一下的</p>\n<p>点击文件-偏好设置-markdown</p>\n<p>在内联公式打勾即可</p>\n<p><img src=\"https://i.loli.net/2021/01/08/ajFDUSG4O2QNKV3.png\" alt=\"image-20210108105517989\"></p>\n<p>如果还是不行，重启typora就可以了</p>\n"},{"title":"tire树","url":"/2020/09/16/trie/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"comment\">//son表示子节点，这里仅考虑26个小写字母。</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> son[N][<span class=\"number\">26</span>], cnt[N], idx;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"keyword\">char</span> str[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> p  = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; str[i]; i ++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> u = str[i] - <span class=\"string\">&#x27;a&#x27;</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(!son[p][u]) son[p][u] = ++ idx;</span><br><span class=\"line\">        p = son[p][u];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    cnt[p] ++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"keyword\">char</span> str[])</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> p = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; str[i]; i ++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> u = str[i] - <span class=\"string\">&#x27;a&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!son[p][u]) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        p = son[p][u];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> cnt[p];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"二维vector","url":"/2021/01/08/%E4%BA%8C%E7%BB%B4vector/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>vector&lt; vector<int> &gt; v(n，vector<int>(m))；</int></int></p>\n<p>它有n个元素，每个元素都是包含m个int型元素的一维向量</p>\n"},{"title":"数组模拟单链表","url":"/2020/09/13/%E6%95%B0%E7%BB%84%E6%A8%A1%E6%8B%9F%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"数组模拟单链表\"><a href=\"#数组模拟单链表\" class=\"headerlink\" title=\"数组模拟单链表\"></a>数组模拟单链表</h2><figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> e[N], ne[N], idx, head;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    head = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    idx = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//往链表头部插入元素</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insert_head</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    e[idx] = x;<span class=\"comment\">//首先将元素的值保存起来</span></span><br><span class=\"line\">    ne[idx] = head;</span><br><span class=\"line\">    head = idx;</span><br><span class=\"line\">    idx ++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//在k位置的后面插入x</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"keyword\">int</span> k, <span class=\"keyword\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    e[idx] = x;</span><br><span class=\"line\">    ne[idx] = ne[k];</span><br><span class=\"line\">    ne[k] = idx;</span><br><span class=\"line\">    idx ++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//移除k位置后面的x元素</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">(<span class=\"keyword\">int</span> k, <span class=\"keyword\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ne[k] = ne[ne[k]];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//移除头节点</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">remove_head</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    head = ne[head];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"数组模拟双链表\"><a href=\"#数组模拟双链表\" class=\"headerlink\" title=\"数组模拟双链表\"></a>数组模拟双链表</h2><figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">int</span> idx, l[N], r[N], e[N];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    l[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    r[<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//在a的右边插入一个数x</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insert_right</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> x)</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    e[idx] = x;</span><br><span class=\"line\">    r[idx] = r[a];</span><br><span class=\"line\">    l[idx] = a;</span><br><span class=\"line\">    l[r[a]] = idx;</span><br><span class=\"line\">    r[a] = idx;</span><br><span class=\"line\">    idx ++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//在a的左边插入一个数x</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insert_left</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    insert_right(l[a], x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//删除节点a</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">(<span class=\"keyword\">int</span> a)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    l[r[a]] = l[a];</span><br><span class=\"line\">    r[l[a]] = r[a];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"数组模拟栈、队列\"><a href=\"#数组模拟栈、队列\" class=\"headerlink\" title=\"数组模拟栈、队列\"></a>数组模拟栈、队列</h2><figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"comment\">/************栈*************/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//tt表示栈顶</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> stk[N], tt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//进栈</span></span><br><span class=\"line\">stk[++ tt] = x;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//出栈</span></span><br><span class=\"line\">tt --;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//判断栈是否为空</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(tt &gt; <span class=\"number\">0</span>) 不空</span><br><span class=\"line\"><span class=\"keyword\">else</span> 空</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">//栈顶元素</span></span><br><span class=\"line\">stk[tt];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**********队列***************/</span></span><br><span class=\"line\"><span class=\"comment\">//hh表示队头，tt表示队尾，在队尾插入元素，在队头弹出元素</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N], hh, tt = <span class=\"number\">-1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//插入</span></span><br><span class=\"line\">q[++ tt] = x;</span><br><span class=\"line\"><span class=\"comment\">//弹出</span></span><br><span class=\"line\">hh ++;</span><br><span class=\"line\"><span class=\"comment\">//判断是否为空</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(hh &lt;= tt)非空</span><br><span class=\"line\"><span class=\"keyword\">else</span> 空</span><br><span class=\"line\"><span class=\"comment\">//取出队头元素</span></span><br><span class=\"line\">q[hh];</span><br><span class=\"line\"><span class=\"comment\">//取出队尾元素</span></span><br><span class=\"line\">q[tt];</span><br></pre></td></tr></table></figure>"},{"title":"重写PVZ","url":"/2021/01/23/%E6%96%B0PVZ%E6%80%9D%E8%B7%AF/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>植物基类是一个节点，SkeletonAnimation是一个节点</p>\n<p>把动画节点添加到植物节点上  xxxplant-&gt;addchile(SkeletonAnimation)</p>\n<p>关于植物动作的在暂停切换与继续，这些函数就不能作用于植物本身了，而是要作用于动作SkeletonAnimation上</p>\n"},{"title":"植物大战僵尸制作说明","url":"/2020/11/12/%E6%A4%8D%E7%89%A9%E5%A4%A7%E6%88%98%E5%83%B5%E5%B0%B8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"植物大战僵尸制作说明\"><a href=\"#植物大战僵尸制作说明\" class=\"headerlink\" title=\"植物大战僵尸制作说明\"></a>植物大战僵尸制作说明</h1><h2 id=\"目标\"><a href=\"#目标\" class=\"headerlink\" title=\"目标\"></a>目标</h2><p>双人网络对战游戏，一人摆植物，一人摆僵尸。</p>\n<h2 id=\"用户的注册和登录\"><a href=\"#用户的注册和登录\" class=\"headerlink\" title=\"用户的注册和登录\"></a>用户的注册和登录</h2><p>要有一张背景图，尺寸1400 * 600像素，设计几个按钮，显示登录，注册</p>\n<p>比如，就像许多软件的登录注册</p>\n<p>用户名输入框</p>\n<p>密码输入框</p>\n<p>  登录按钮</p>\n<p>​                —没有账号？注册一个！</p>\n<p>如果点击登录按钮，那么来到游戏主界面；如果点击注册按钮，来到注册界面。</p>\n<p>注册时要求用户名不能重复，密码复杂度要求（自己设计）。点击注册按钮后，提示注册是否成功，如果失败，则提示失败。如果成功，则提示成功，然后回到登录界面。</p>\n<p>以上为一个场景，登录界面、注册界面用不同的层来表示。</p>\n<p>数据库的设计—mysql</p>\n<p>目前需要保存用户名和密码，可以再添加一些胜率等信息</p>\n<h2 id=\"服务器端\"><a href=\"#服务器端\" class=\"headerlink\" title=\"服务器端\"></a>服务器端</h2><p>数据库保存在linux服务器上，服务器上运行程序，接收来自客户端的tcp连接 ， 我们要在此处体现多线程，高并发</p>\n<p>用python 的 async io来写？这是异步io，可能无法满足老师要求</p>\n<p>处理客户端发来的sql查询，插入请求，将结果返回客户端。</p>\n<p>当用户进行双人对战时，如何显示对方的信息。可以当对方每放一个植物/僵尸时，向服务器发送放植物的种类和位置，服务器发送给另一客户端</p>\n<p>多线程？采用线程池</p>\n<p>NO！采用python的async IO，可以减少很多不必要的麻烦。当然如果你的C++很好，并且可以很好的控制多线程的同步问题以及很好的使用TCP，也可以采用C++。</p>\n<p>python的异步IO可以满足并发要求，利用python课学到的知识即可。</p>\n<h3 id=\"需求：\"><a href=\"#需求：\" class=\"headerlink\" title=\"需求：\"></a>需求：</h3><h4 id=\"1、登录：\"><a href=\"#1、登录：\" class=\"headerlink\" title=\"1、登录：\"></a>1、登录：</h4><p><strong>不允许一个账号多人登录</strong></p>\n<p>你会收到来自客户端的登录请求 </p>\n<p>格式为 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">LOGIN;username;password;\\n</span><br></pre></td></tr></table></figure>\n\n<p>​        比如:    </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">LOGIN;zrf;123456;\\n</span><br></pre></td></tr></table></figure>\n\n<p>你需要根据收到的用户名和密码，查询sql数据库，并且返回登录成功或失败。</p>\n<p>登录成功，返回  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">LOGIN;1;\\n    </span><br></pre></td></tr></table></figure>\n\n<p>登陆失败（用户名或密码错误） </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">LOGIN;0;\\n</span><br></pre></td></tr></table></figure>\n\n<p>账户已经登录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">LOGIN;2;\\n</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"2、注册：\"><a href=\"#2、注册：\" class=\"headerlink\" title=\"2、注册：\"></a>2、注册：</h4><p>你会收到来自客户端的注册请求   </p>\n<p>格式为  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">REGISTER;username;password;\\n</span><br></pre></td></tr></table></figure>\n\n<p>  比如</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">REGISTER;zrf;123456;\\n</span><br></pre></td></tr></table></figure>\n\n<p>根据得到的用户名和密码，查询用户名是否已经存在，</p>\n<p>若存在，返回错误   </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">REGISTER;0;\\n  </span><br></pre></td></tr></table></figure>\n\n<p> 如果不存在，注册成功，返回 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">REGISTER;1;\\n</span><br></pre></td></tr></table></figure>\n\n<p> 并且把用户名密码存入数据库中</p>\n<h4 id=\"3、匹配\"><a href=\"#3、匹配\" class=\"headerlink\" title=\"3、匹配\"></a>3、匹配</h4><p>当用户点击主界面的匹配按钮时，就会向服务器发送  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MATCH;\\n</span><br></pre></td></tr></table></figure>\n\n<p>再还未匹配到对手之前，用户可以点击取消匹配按钮，然后客户端重新回到主界面</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CANCELMATCH;\\n</span><br></pre></td></tr></table></figure>\n\n<p>当匹配成功后，服务器向客户端发送</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MATCHSUCCESS;0;\\n</span><br></pre></td></tr></table></figure>\n\n<p>客户端收到后，则自己为植物</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MATCHSUCCESS;1;\\n</span><br></pre></td></tr></table></figure>\n\n<p>客户端收到后，则自己为僵尸</p>\n<p>2020/11/14</p>\n<p>由于程序切换场景时要加载很多东西，麻烦服务器在匹配好对手后，<strong>延迟3秒</strong>再向客户端发送MATCHSUCCESS信息  ？（是否可以在客户端解决这个问题）</p>\n<p>同步问题，由于从匹配场景切换到对战场景需要加载好几秒中，并且不同电脑加载时间也不一样，为了同步两个客户端的信息，服务器需要在发送过MATCHSUCCESS信息后，<strong>过5秒后</strong>（这段时间留给客户端加载信息），向两个客户端<strong>同时</strong>发送</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">START;\\n</span><br></pre></td></tr></table></figure>\n\n\n\n<p>注意，服务器收到两个客户端的匹配请求后，要随机向其中一个客户端发送MATCHSUCCESS;0;向另一个客户端发送MATCHSUCCESS;1;</p>\n<h4 id=\"4、对战过程\"><a href=\"#4、对战过程\" class=\"headerlink\" title=\"4、对战过程\"></a>4、对战过程</h4><p>两个客户端匹配成功后，服务器保持与这两个客户端的连接</p>\n<p>每个客户端每隔0.5秒会向服务器发送自己方（植物方或僵尸方）的信息，以此来同步两个客户端</p>\n<p>你不需要处理其中的内容，只需要将信息发送个另一个客户端</p>\n<p>1、植物方，发送植物的信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">PLANT:PeaShooter:x,y;Peashooter:x,y;.....\\n</span><br></pre></td></tr></table></figure>\n\n<p>2、僵尸端</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ZOMBIE:NormalZombie:x,y;NormalZombie:x,y;......\\n</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5、比赛结果\"><a href=\"#5、比赛结果\" class=\"headerlink\" title=\"5、比赛结果\"></a>5、比赛结果</h4><p>如果一方获胜，则会向服务器发送；注意，失败方不会向服务器发送任何信息；注意，服务器判定第一次收到发送WIN的客户端是胜利方。如果客户端收到WIN则胜利了，如果客户端收到LOSE则失败。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">WIN;\\n</span><br></pre></td></tr></table></figure>\n\n<p>判定那一方胜利后，向胜利的客户端发送</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">WIN;\\n</span><br></pre></td></tr></table></figure>\n\n<p>然后服务器向失败的客户端发送</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">LOSE;\\n</span><br></pre></td></tr></table></figure>\n\n<p>其中一个客户端收到LOSE后，再向服务器发送一个LOSE</p>\n<p>这次比赛结束，服务器释放与这两个客户端的连接。</p>\n<h4 id=\"6、TCP心跳包\"><a href=\"#6、TCP心跳包\" class=\"headerlink\" title=\"6、TCP心跳包\"></a>6、TCP心跳包</h4><p>客户端每隔一秒向服务器发送一个心跳包，内容为，服务器每隔一段时间也向客户端发送同样的内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">HeartBeat;\\n</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"7、同步方案\"><a href=\"#7、同步方案\" class=\"headerlink\" title=\"7、同步方案\"></a>7、同步方案</h4><p>以植物方的为准，植物方决定僵尸何时行走、攻击、掉头、死亡，以及僵尸的位置。</p>\n<p>僵尸方不进行任何计算，只展示僵尸的位置和动作。</p>\n<p>植物方植物死亡时，向僵尸方发送植物死亡的信息。</p>\n<h2 id=\"ISSUE\"><a href=\"#ISSUE\" class=\"headerlink\" title=\"ISSUE\"></a>ISSUE</h2><p>1、土豆地雷只能炸死完全重合的多只僵尸，邻近的僵尸不能同时炸死</p>\n<p>​    //目前只能炸掉一个僵尸，以后再做调整</p>\n<p>2、土豆地雷的价格为25，每次应该减去25  <strong>已解决</strong></p>\n<p>3、僵尸掉头动作与前进动作一块执行时，会发生闪烁，是否要删除僵尸死亡动画？</p>\n<p>4、缓存？每当创建一个精灵时，都是从硬盘里读plist，是否应该做成缓存以加快图片绘制速度？</p>\n<p>5、食人花吃僵尸时，僵尸会停顿一下，主要原因是把僵尸从总僵尸数组中删除了，于是僵尸就停止运动了   <strong>已解决</strong> 2020/11/16</p>\n"},{"title":"算法笔记笔记","url":"/2020/09/12/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0%E7%AC%94%E8%AE%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"第二章\"><a href=\"#第二章\" class=\"headerlink\" title=\"第二章\"></a>第二章</h2><p>1、用double, 不用 float, double的精度为15-16位， float 的精度为6-7位</p>\n<p>2、c语言用字符数组保存字符串    字符串常量使用双引号标注的字符集合     char str[30] = “wo ai zhong guo”;</p>\n<p>3、尽量不要使用宏定义（#define）定义除了定义常量之外的事情</p>\n<p>4、i ++ 先使用i再将i加一        ++ i 先将i加一再使用i</p>\n<p>5、条件运算符（?   :）三目运算符    A ? B : C     判断A， 如果为真，执行B，如果为假，执行C</p>\n<p>6、int的上限为2的32次方减1            INT_MAX =（1 &lt;&lt; 31）- 1 = 2147483647    左移相当于乘法</p>\n<p>7、^ 运算符 异或 相异为1， 相同为0</p>\n<p>8、连续等号 m = n = 10      赋值m, n均为10</p>\n<p>9、scanf(“%d:%d:%d”, &amp;hour, &amp;minute, &amp;second);                10:27:54    scanf中的双引号内容就是整个输入</p>\n<p>​      scanf(“%d,%lf,%d”, &amp;a, &amp;b, &amp;c);                    输入数据：12,17.2,23</p>\n<p>10、除%c之外，scanf对其他格式符的输入是以空白符（空格、Tab）为结束判断标志的</p>\n<p>​        注意，scanf的%c格式是可以读入空格跟空行的</p>\n<p>​                scanf(“%d%c%s”, &amp;a, &amp;ch, &amp; str);            输入：8 q nihao            结果： a = 8; ch =  ; str = q;</p>\n<p>​        所以，读入字符时，最好用字符串的方式读入，比如读入一个字符，int st[2]; scanf(“%s”, st);//%s遇到空格就会停止读入</p>\n<p>11、%.mf，让浮点数保留m位进行输出</p>\n<p>12、getchar()用来输入单个字符， putchar用来输出单个字符</p>\n<p>13、typedef 给数据类型起一个别名      如 ：typedef long long LL;</p>\n<p>14、常用math函数</p>\n<p>​                fabs(double x)  对double变量取绝对值</p>\n<p>​                floor(double x) 对double变量向下取整            ceil(double x) double变量向上取整</p>\n<p>​                double pow(double a, double b) 计算a的b次方，参数和返回值都是double</p>\n<p>​                double sqrt(double x)  计算x的算术平方根， 参数和返回值均为double</p>\n<p>​                double log(double x) 计算x以自然对数为底的对数</p>\n<p>​                sin(double x)    cos(double x)    tan(double x)  参数和返回值都是double</p>\n<p>15、每个case后，必须加上break，否则执行完该case后，不会break，会继续向下执行，执行下面的case</p>\n<p>16、一维数组初始化 int a[10] = {0}; 注意 int a[10] = {1} 不会将数组全初始化为1！memset(a, 1, sizeof a) 依然不能将数组置为1，memset按字节对内存进行初始化，所以内存里存的其实是0x0101 0101……，也就是16843009。</p>\n<p>17、建议只用memset置0或者-1.memset是按字节赋值</p>\n<p>18、gets用来输入一行字符串，注意识别\\n作为输入结束标志</p>\n<p>19、字符数组以\\0结尾，开字符数组的时候一定要至少比要存储的字符串长度多1，int数组则不需要多1</p>\n<p>20、如果不是用scanf的%s或者gets输入字符串的，则务必要在字符串后加上\\0</p>\n<p>21、strlen, 注意返回类型是无符号整型（unsigned int），strlen(str) &lt; -1可能为真， 无符号数和有符号数比较大小时，会转换为无符号数比较</p>\n<p>22、strcmp(字符串1， 字符串2) 按照字典序比较， 如果等于，返回0，如果大于，返回正整数，如果小于，返回负整数</p>\n<p>23、strcpy(字符数组1， 字符数组2) ，把字符数组2赋给字符数组1</p>\n<p>24、strcat(字符数组1， 字符数组2)，把字符数组2接在字符数组1后面</p>\n<p>25、数组作为函数的参数，int func(int a[], int b[][5] [] [8]), 注意 二维数组的第二维需要填写个数</p>\n<p>26、在函数中对数组修改就相当于对原数组修改</p>\n<p>27、指针是一个unsigned类型的整数</p>\n<p>28、浮点数的比较</p>\n<p>​                const double esp = 1e-8</p>\n<p>​                if(fabs(a - b) &lt; esp)  则可说明两个浮点数相等</p>\n<p>29、const double pi = acos(-1.0)</p>\n<p>30、while(scanf(“%d”, &amp;a) != EOF) 如果没有读到文件末尾，就继续读</p>\n<p>31、while(gets(str) != NULL) 使用gets读取字符串时</p>\n<h2 id=\"第三章\"><a href=\"#第三章\" class=\"headerlink\" title=\"第三章\"></a>第三章</h2><p>1、简单模拟：不需要什么算法，题目怎么说，我就怎么做，就好像把题目翻译成了代码语言</p>\n<p>2、闰年：if ((year % 4 == 0 &amp;&amp; year %100 != 0)  || (year % 400 == 0))</p>\n<p>3、product ：乘积</p>\n<h2 id=\"第四章\"><a href=\"#第四章\" class=\"headerlink\" title=\"第四章\"></a>第四章</h2><p>​    </p>\n"},{"title":"计算机基础知识","url":"/2020/09/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>字：计算机一次存取、加工、传送的数据长度称为字</p>\n<p>字长：计算机每个字所包含的位数称为字长</p>\n<h2 id=\"ROM\"><a href=\"#ROM\" class=\"headerlink\" title=\"ROM\"></a>ROM</h2><p>掩膜只读存储器（Mask ROM）：掉电后依然存在，可靠性高。缺点是信息只能一次写入（在制造的过程中），不灵活</p>\n<p>可编程只读存储器（PROM）：允许用户通过专用的色号被一次性写入自己所需要的东西，一般只可编程一次</p>\n<p>可编程可擦除只读存储器（EPROM）：可读可写，用紫外线或脉冲电流先将原有的信息擦除，然后重新写入</p>\n<p>电可擦除可编程只读存储器（EEPROM）：随时可以写入而无需擦除原先内容</p>\n<p>快擦除读写存储器（Flash）：闪存，广泛用于制作各种移动存储器，如U盘以及存储卡</p>\n<p>严格意义上：机械硬盘不属于ROM</p>\n<p>固态硬盘和U盘属于ROM</p>\n<h2 id=\"RAM\"><a href=\"#RAM\" class=\"headerlink\" title=\"RAM\"></a>RAM</h2><p>SRAM：静态随机存储器，利用双稳态触发器来存储信息，即使信息被读出后，它仍保持其原状态而不需要再生（非破坏性读出）。SRAM存取速度快，但是集成度低，功耗大，价格昂贵（价格是DRAM的几十倍），一般用来组成高速缓冲存储器。</p>\n<p>DRAM：动态随机存储器是利用存储元电路中的栅极电容上的电荷来存储信息的，电容上的电荷一般只能维持1-2ms，即使电源不断电，信息也会自动消失，因此每隔一段时间需要刷新。</p>\n<p>打开任务管理器即可看到L1、L2、L3缓存</p>\n<h2 id=\"机械硬盘\"><a href=\"#机械硬盘\" class=\"headerlink\" title=\"机械硬盘\"></a>机械硬盘</h2><p>HDD，数据通过离磁性表面很近的磁头由电磁流来改变极性的方式被写入到磁盘上</p>\n<p>接口：一种是IDE，一种是SATA，现在大多数都是SATA</p>\n<p>固态硬盘接口：市面上销售的大多是m.2接口和sata接口</p>\n<h2 id=\"BIOS\"><a href=\"#BIOS\" class=\"headerlink\" title=\"BIOS\"></a>BIOS</h2><p>基本输入输出系统，预安装在个人电脑的主板上，是个人电脑启动时加载的第一个软件。现在，BIOS的作用是初始化和测试<a href=\"https://zh.wikipedia.org/wiki/%E7%A1%AC%E9%AB%94\">硬件</a>组件，以及从大容量存储设备（如硬盘）加载<a href=\"https://zh.wikipedia.org/wiki/%E5%95%9F%E5%8B%95%E7%A8%8B%E5%BC%8F\">引导程序</a>，并由<a href=\"https://zh.wikipedia.org/wiki/%E5%95%9F%E5%8B%95%E7%A8%8B%E5%BC%8F\">引导程序</a>加载操作系统。现在BIOS大多存储在flash芯片上。</p>\n<p>以前BIOS存储在CMOS中，没电信息就会丢失。</p>\n<p>CMOS中存储的内容掉电就会丢失，主板上通常有一块电池给CMOS供电。电脑关机后，过段时间再开机，发现时间依然是正确的，这就是这快电池在为时钟模块供电</p>\n<h2 id=\"大端法-小端法\"><a href=\"#大端法-小端法\" class=\"headerlink\" title=\"大端法/小端法\"></a>大端法/小端法</h2><p>假设一个int型变量x的地址为0x100,那么x的4个字节将被存储在内存的0x100,0x101,0x102,0x103的位置。</p>\n<p>字节序即为多字节对象在内存中的字节顺序</p>\n<p>大端法：</p>\n<p>最高有效字节在最前面的方式称为大端法，假设x的值为0x12345678。对于大端法的机器来说</p>\n<p>0x100:12    0x101:34    0x102:56    0x103:78</p>\n<p>小端法：</p>\n<p>0x100:78    0x101:56    0x102:34    0x103:12</p>\n<h2 id=\"括弧匹配\"><a href=\"#括弧匹配\" class=\"headerlink\" title=\"括弧匹配\"></a>括弧匹配</h2><p>1、任意前缀中，左括号数量大于右括号数量</p>\n<p>2、左右括号数量相等</p>\n<h2 id=\"KMP\"><a href=\"#KMP\" class=\"headerlink\" title=\"KMP\"></a>KMP</h2><p>next[i] :在str[1~i]中，前缀和后缀相等的最长子串的长度</p>\n<h2 id=\"C\"><a href=\"#C\" class=\"headerlink\" title=\"C++\"></a>C++</h2><p>1s可以算10的7次方到10的8次方次</p>\n<h2 id=\"电脑开机过程\"><a href=\"#电脑开机过程\" class=\"headerlink\" title=\"电脑开机过程\"></a>电脑开机过程</h2>"},{"title":"算法设计与分析期末复习","url":"/2021/01/08/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%86%E6%9E%90%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"算法设计与分析期末复习\"><a href=\"#算法设计与分析期末复习\" class=\"headerlink\" title=\"算法设计与分析期末复习\"></a>算法设计与分析期末复习</h1><h2 id=\"一、分治法\"><a href=\"#一、分治法\" class=\"headerlink\" title=\"一、分治法\"></a>一、分治法</h2><h3 id=\"1、二分搜索\"><a href=\"#1、二分搜索\" class=\"headerlink\" title=\"1、二分搜索\"></a>1、二分搜索</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(m--)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> x;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;x);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = n - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(q[mid] &gt;= x) r = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(q[l] != x) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;-1 -1\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, l);</span><br><span class=\"line\">            l = <span class=\"number\">0</span>, r = n - <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(l &lt; r)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> mid = l + r + <span class=\"number\">1</span> &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(q[mid] &lt;= x) l = mid;</span><br><span class=\"line\">                <span class=\"keyword\">else</span> r = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, l);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2、快速排序\"><a href=\"#2、快速排序\" class=\"headerlink\" title=\"2、快速排序\"></a>2、快速排序</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">quick_sort</span><span class=\"params\">(<span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l &gt;= r) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> x = q[l + r &gt;&gt; <span class=\"number\">1</span>], i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt; j)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[++i] &lt; x);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[--j] &gt; x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i &lt; j) <span class=\"built_in\">std</span>::swap(q[i], q[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    quick_sort(q, l, j);</span><br><span class=\"line\">    quick_sort(q, j + <span class=\"number\">1</span>, r);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">    quick_sort(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, q[i]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3、归并排序\"><a href=\"#3、归并排序\" class=\"headerlink\" title=\"3、归并排序\"></a>3、归并排序</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N], temp[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">merge_sort</span><span class=\"params\">(<span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l &gt;= r) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    merge_sort(q, l, mid);</span><br><span class=\"line\">    merge_sort(q, mid + <span class=\"number\">1</span>, r);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = l, j = mid + <span class=\"number\">1</span>, k = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt;= mid &amp;&amp; j &lt;= r)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(q[i] &lt;= q[j]) temp[k++] = q[i++];</span><br><span class=\"line\">        <span class=\"keyword\">else</span> temp[k++] = q[j++];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt;= mid) temp[k++] = q[i++];</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(j &lt;= r) temp[k++] = q[j++];</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i = l, k = <span class=\"number\">0</span>;i &lt;= r; k++, i++) q[i] = temp[k];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">    merge_sort(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, q[i]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"4、线性时间选择\"><a href=\"#4、线性时间选择\" class=\"headerlink\" title=\"4、线性时间选择\"></a>4、线性时间选择</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">quick_sort</span><span class=\"params\">(<span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r, <span class=\"keyword\">int</span> k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l == r) <span class=\"keyword\">return</span> q[l];</span><br><span class=\"line\">    <span class=\"keyword\">int</span> x = q[l + r &gt;&gt; <span class=\"number\">1</span>], i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt; j)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[++i] &lt; x);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[--j] &gt; x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i &lt; j) <span class=\"built_in\">std</span>::swap(q[i], q[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> sl = j - l + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(k &lt;= sl) <span class=\"keyword\">return</span> quick_sort(l, j, k);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> quick_sort(j + <span class=\"number\">1</span>, r, k - sl);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n, k;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;k);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = quick_sort(<span class=\"number\">0</span>, n - <span class=\"number\">1</span>, k);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"二、动态规划\"><a href=\"#二、动态规划\" class=\"headerlink\" title=\"二、动态规划\"></a>二、动态规划</h2><h3 id=\"1、矩阵连乘\"><a href=\"#1、矩阵连乘\" class=\"headerlink\" title=\"1、矩阵连乘\"></a>1、矩阵连乘</h3><h3 id=\"2、最长公共子序列\"><a href=\"#2、最长公共子序列\" class=\"headerlink\" title=\"2、最长公共子序列\"></a>2、最长公共子序列</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1010</span>;</span><br><span class=\"line\"><span class=\"keyword\">char</span> a[N], b[N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> f[N][N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%s%s&quot;</span>, a + <span class=\"number\">1</span>, b + <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            f[i][j] = <span class=\"built_in\">std</span>::max(f[i - <span class=\"number\">1</span>][j], f[i][j - <span class=\"number\">1</span>]);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a[i] == b[j]) f[i][j] = <span class=\"built_in\">std</span>::max(f[i][j], f[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>] + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, f[n][m]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3、最大子段和\"><a href=\"#3、最大子段和\" class=\"headerlink\" title=\"3、最大子段和\"></a>3、最大子段和</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1000010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> a[N], f[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = <span class=\"number\">-1e9</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        f[i] = <span class=\"built_in\">std</span>::max(a[i], f[i - <span class=\"number\">1</span>] + a[i]);</span><br><span class=\"line\">        res = <span class=\"built_in\">std</span>::max(res, f[i]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"4、0-1背包问题\"><a href=\"#4、0-1背包问题\" class=\"headerlink\" title=\"4、0/1背包问题\"></a>4、0/1背包问题</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> f[N][N], v[N], w[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;v[i], &amp;w[i]);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt;= m; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            f[i][j] = f[i - <span class=\"number\">1</span>][j];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(j &gt;= v[i])</span><br><span class=\"line\">                f[i][j] = <span class=\"built_in\">std</span>::max(f[i][j], f[i - <span class=\"number\">1</span>][j - v[i]] + w[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, f[n][m]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5、数字三角形\"><a href=\"#5、数字三角形\" class=\"headerlink\" title=\"5、数字三角形\"></a>5、数字三角形</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">510</span>, INF = <span class=\"number\">1e9</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> f[N][N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N][N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= i; j++)</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i][j]);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt;= n; j++)</span><br><span class=\"line\">            f[i][j] = -INF;</span><br><span class=\"line\">    f[<span class=\"number\">1</span>][<span class=\"number\">1</span>] = q[<span class=\"number\">1</span>][<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= i; j++)</span><br><span class=\"line\">            f[i][j] = <span class=\"built_in\">std</span>::max(f[i <span class=\"number\">-1</span>][j - <span class=\"number\">1</span>], f[i - <span class=\"number\">1</span>][j]) + q[i][j];</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = -INF;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) res = <span class=\"built_in\">std</span>::max(res, f[n][i]);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6、最长上升子序列\"><a href=\"#6、最长上升子序列\" class=\"headerlink\" title=\"6、最长上升子序列\"></a>6、最长上升子序列</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> f[N], a[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;a[i]);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt; i; j++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a[j] &lt; a[i])</span><br><span class=\"line\">                f[i] = <span class=\"built_in\">std</span>::max(f[i], f[j]);</span><br><span class=\"line\">        f[i] += <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) res = <span class=\"built_in\">std</span>::max(res, f[i]);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"三、贪心算法\"><a href=\"#三、贪心算法\" class=\"headerlink\" title=\"三、贪心算法\"></a>三、贪心算法</h2><h3 id=\"1、哈夫曼编码\"><a href=\"#1、哈夫曼编码\" class=\"headerlink\" title=\"1、哈夫曼编码\"></a>1、哈夫曼编码</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;queue&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1000010</span>;</span><br><span class=\"line\"><span class=\"keyword\">double</span> a[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%lf&quot;</span>, &amp;a[i]);</span><br><span class=\"line\">    <span class=\"built_in\">priority_queue</span>&lt;<span class=\"keyword\">double</span>, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">double</span>&gt;, greater&lt;<span class=\"keyword\">double</span>&gt;&gt;heap;<span class=\"comment\">//小根堆</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) heap.push(a[i]);</span><br><span class=\"line\">    <span class=\"keyword\">double</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(heap.size() &gt; <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">double</span> x = heap.top();</span><br><span class=\"line\">        heap.pop();</span><br><span class=\"line\">        <span class=\"keyword\">double</span> y = heap.top();</span><br><span class=\"line\">        heap.pop();</span><br><span class=\"line\">        heap.push(x + y);</span><br><span class=\"line\">        res += x + y;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%lf&quot;</span>, res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2、prim算法\"><a href=\"#2、prim算法\" class=\"headerlink\" title=\"2、prim算法\"></a>2、prim算法</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">510</span>, INF = <span class=\"number\">0x3f3f3f3f</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\"><span class=\"keyword\">int</span> g[N][N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> dist[N];</span><br><span class=\"line\"><span class=\"keyword\">bool</span> st[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">prim</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(dist, <span class=\"number\">0x3f</span>, <span class=\"keyword\">sizeof</span> dist);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t = <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!st[j] &amp;&amp; (t == <span class=\"number\">-1</span> || dist[j] &lt; dist[t]))</span><br><span class=\"line\">                t = j;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i &amp;&amp; dist[t] == INF) <span class=\"keyword\">return</span> INF;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i) res += dist[t];</span><br><span class=\"line\">        st[t] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++) dist[j] = <span class=\"built_in\">std</span>::min(dist[j], g[t][j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(g, <span class=\"number\">0x3f</span>, <span class=\"keyword\">sizeof</span> g);</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(m--)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a, b, w;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;w);</span><br><span class=\"line\">        g[a][b] = g[b][a] = <span class=\"built_in\">std</span>::min(g[a][b], w);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> ans = prim();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(ans == INF) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;impossible&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, ans);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3、kruskal算法\"><a href=\"#3、kruskal算法\" class=\"headerlink\" title=\"3、kruskal算法\"></a>3、kruskal算法</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">200010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> p[N];</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Edge</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> a, b, w;</span><br><span class=\"line\">    <span class=\"keyword\">bool</span> <span class=\"keyword\">operator</span> &lt; (<span class=\"keyword\">const</span> Edge &amp; rhs) <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> w &lt; rhs.w;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;edges[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(p[x] != x) p[x] = find(p[x]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt;m; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a, b, w;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;w);</span><br><span class=\"line\">        edges[i] = &#123;a, b, w&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;=n; i++) p[i] = i;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>, cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::sort(edges, edges + m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = edges[i].a, b = edges[i].b, w = edges[i].w;</span><br><span class=\"line\">        a = find(a), b = find(b);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(a != b)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            p[a] = b;</span><br><span class=\"line\">            res += w;</span><br><span class=\"line\">            cnt++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(cnt &lt; n - <span class=\"number\">1</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;impossible&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"4、dijkstra算法\"><a href=\"#4、dijkstra算法\" class=\"headerlink\" title=\"4、dijkstra算法\"></a>4、dijkstra算法</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">510</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> g[N][N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> dist[N];</span><br><span class=\"line\"><span class=\"keyword\">bool</span> st[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">dijkstra</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(dist, <span class=\"number\">0x3f</span>, <span class=\"keyword\">sizeof</span> dist);</span><br><span class=\"line\">    dist[<span class=\"number\">1</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t = <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!st[j] &amp;&amp; (t == <span class=\"number\">-1</span> || dist[t] &gt; dist[j]))</span><br><span class=\"line\">                t = j;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        st[t] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            dist[j] = <span class=\"built_in\">std</span>::min(dist[j], dist[t] + g[t][j]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(dist[n] == <span class=\"number\">0x3f3f3f3f</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> dist[n];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(g, <span class=\"number\">0x3f</span>, <span class=\"keyword\">sizeof</span> g);</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(m--)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a, b, w;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;w);</span><br><span class=\"line\">        g[a][b] = <span class=\"built_in\">std</span>::min(g[a][b], w);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> ans = dijkstra();</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, ans);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"四、回溯法\"><a href=\"#四、回溯法\" class=\"headerlink\" title=\"四、回溯法\"></a>四、回溯法</h2><h3 id=\"1、N皇后问题\"><a href=\"#1、N皇后问题\" class=\"headerlink\" title=\"1、N皇后问题\"></a>1、N皇后问题</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cmath&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">50</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> total = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> n;</span><br><span class=\"line\"><span class=\"keyword\">int</span> c[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">is_ok</span><span class=\"params\">(<span class=\"keyword\">int</span> row)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j != row; j++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(c[row] == c[j] || row - c[row] == j - c[j] || row + c[row] == j + c[j])</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">queen</span><span class=\"params\">(<span class=\"keyword\">int</span> row)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(row == n) total++;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> col = <span class=\"number\">0</span>; col != n; col++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            c[row] = col;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(is_ok(row)) queen(row + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n)</span><br><span class=\"line\">    queen(<span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, total);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2、旅行售货员问题\"><a href=\"#2、旅行售货员问题\" class=\"headerlink\" title=\"2、旅行售货员问题\"></a>2、旅行售货员问题</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">20</span>;</span><br><span class=\"line\"><span class=\"keyword\">bool</span> st[N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> graph[N][N], path[N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> n, res = <span class=\"number\">0x3f3f3f3f</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"keyword\">int</span> u, <span class=\"keyword\">int</span> dist, <span class=\"keyword\">int</span> pos)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(u == n) &#123;</span><br><span class=\"line\">        res = <span class=\"built_in\">std</span>::min(res, dist + graph[pos][<span class=\"number\">0</span>]);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!st[i] &amp;&amp; dist &lt; res) &#123;<span class=\"comment\">//当前的路径长度如果大于最优解，那么跳过该子树</span></span><br><span class=\"line\">            st[i] = <span class=\"literal\">true</span>;            </span><br><span class=\"line\">            dfs(u + <span class=\"number\">1</span>, dist + graph[pos][i], i);</span><br><span class=\"line\">            st[i] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n - <span class=\"number\">1</span>; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i + <span class=\"number\">1</span>; j &lt; n; j++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> m;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;m);</span><br><span class=\"line\">            graph[i][j] = graph[j][i] = m;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    st[<span class=\"number\">0</span>] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    dfs(<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3、排列数字\"><a href=\"#3、排列数字\" class=\"headerlink\" title=\"3、排列数字\"></a>3、排列数字</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> path[N];</span><br><span class=\"line\"><span class=\"keyword\">bool</span> st[N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> n;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"keyword\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(u == n)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, path[i]);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!st[i])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            st[i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            path[u] = i;</span><br><span class=\"line\">            dfs(u + <span class=\"number\">1</span>);</span><br><span class=\"line\">            st[i] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    dfs(<span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"2020-2021算法设计与分析期中考试参考答案","url":"/2020/11/10/%E7%AE%97%E6%B3%95%E7%AD%94%E6%A1%88/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"2020-2021算法设计与分析期中考试参考答案\"><a href=\"#2020-2021算法设计与分析期中考试参考答案\" class=\"headerlink\" title=\"2020-2021算法设计与分析期中考试参考答案\"></a>2020-2021算法设计与分析期中考试参考答案</h1><h3 id=\"一、写出O，Θ，Ω的含义\"><a href=\"#一、写出O，Θ，Ω的含义\" class=\"headerlink\" title=\"一、写出O，Θ，Ω的含义\"></a>一、写出O，Θ，Ω的含义</h3><p>O(g(n)) = {f(n):  存在正常量c和n0，使得对所有n≥ n0，有0≤f(n)≤cg(n)}</p>\n<p>Θ(g(n)) = {f(n):  存在正常量c1、c2和n0，使得对所有n≥ n0，有c1g(n)≤f(n)≤c2g(n)}</p>\n<p>Ω(g(n)) = {f(n):  存在正常量c和n0，使得对所有n≥ n0，有f(n)≥cg(n)≥0}</p>\n<h3 id=\"二、写出快速排序的Partition方法\"><a href=\"#二、写出快速排序的Partition方法\" class=\"headerlink\" title=\"二、写出快速排序的Partition方法\"></a>二、写出快速排序的Partition方法</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">Partition</span><span class=\"params\">(<span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> x = q[(l + r) &gt;&gt; <span class=\"number\">1</span>], i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt; j)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[++i] &lt; x);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[--j] &gt; x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i &lt; j)</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::swap(q[i], q[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> j;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>附：快速排序</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1000010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">quick_sort</span><span class=\"params\">(<span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l &gt;= r) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"comment\">//一、确定边界点，一般是左边界q[l]，中间值q[l + r &gt;&gt; 1]，右边界q[r]，或者随机取</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> x = q[l + r &gt;&gt; <span class=\"number\">1</span>], i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"comment\">//二、调整区间，根据边界点的值x将整个区间分为两部分，使得左半边所有数均小于等于x，右半边所有数均大于等于x</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt; j)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[++i] &lt; x);<span class=\"comment\">//从左边开始，找出第一个大于等于x的数</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[--j] &gt; x);<span class=\"comment\">//从右边开始，找出第一个小于等于x的数</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i &lt; j)</span><br><span class=\"line\">            <span class=\"built_in\">std</span>::swap(q[i], q[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//三、递归处理左右两个区间</span></span><br><span class=\"line\">    quick_sort(q, l, j);</span><br><span class=\"line\">    quick_sort(q, j + <span class=\"number\">1</span>, r);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">    quick_sort(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, q[i]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"三、按照渐进阶从低到高的顺序排列以下表达式：\"><a href=\"#三、按照渐进阶从低到高的顺序排列以下表达式：\" class=\"headerlink\" title=\"三、按照渐进阶从低到高的顺序排列以下表达式：\"></a>三、按照渐进阶从低到高的顺序排列以下表达式：</h3><p>$$<br>4n^2, logn, 3^n, 20n, 2, n^{2/3}, n!<br>$$</p>\n<p>答案：<br>$$<br>2, logn, n^{2/3}, 20n, 4n^2, 3^n, n!<br>$$</p>\n<h3 id=\"四、逆序对\"><a href=\"#四、逆序对\" class=\"headerlink\" title=\"四、逆序对\"></a>四、逆序对</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"comment\">//逆序对</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1000010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N], temp[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">reverse_pair</span><span class=\"params\">(<span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l &gt;= r) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = reverse_pair(q, l, mid) + reverse_pair(q, mid + <span class=\"number\">1</span>, r);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = l, j = mid + <span class=\"number\">1</span>, k = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (q[i] &lt;= q[j]) temp[k++] = q[i++];</span><br><span class=\"line\">        <span class=\"keyword\">else</span> temp[k++] = q[j++], res += mid - i + <span class=\"number\">1</span>;<span class=\"comment\">//仅此处与归并排序不同</span></span><br><span class=\"line\">        <span class=\"comment\">/*左边和右边均已排好序，如果q[i] &gt; q[j]，那么i~mid之间的数字都会大于q[j],所以</span></span><br><span class=\"line\"><span class=\"comment\">        *对于左边第i个数，右边有mid - i + 1个数小于q[i]，逆序对数量要加上mid - i + 1</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid) temp[k++] = q[i++];</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (j &lt;= r) temp[k++] = q[j++];</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i = l, k = <span class=\"number\">0</span>; i &lt;= r; i++, k++) q[i] = temp[k];</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = reverse_pair(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, res);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>复杂度分析 T(n) = 2T(n / 2) + O(n)</p>\n<p>由主定理得：T(n) = O(nlogn)</p>\n<p>附：归并排序</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1000010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N], temp[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">merge_sort</span><span class=\"params\">(<span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l &gt;= r) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">    merge_sort(q, l, mid);<span class=\"comment\">//左边排序</span></span><br><span class=\"line\">    merge_sort(q, mid + <span class=\"number\">1</span>, r);<span class=\"comment\">//右边排序</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = l, j = mid + <span class=\"number\">1</span>, k = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)<span class=\"comment\">//合并，依次比较左右两边的数，较小的填入temp数组中</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(q[i] &lt;= q[j]) temp[k++] = q[i++];<span class=\"comment\">//为了保证归并排序的稳定性，如果左右两边有相同的数，那么把左边的数先放入temp数组中</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> temp[k++] = q[j++];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt;= mid) temp[k++] = q[i++];<span class=\"comment\">//将左边剩余的数填入temp数组中</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(j &lt;= r) temp[k++] = q[j++];<span class=\"comment\">//将右边剩余的数字填入temp数组中</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i = l, k = <span class=\"number\">0</span>; i &lt;= r; i++, k++) q[i] = temp[k];<span class=\"comment\">//将temp的数组移到原来的数组中</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">    merge_sort(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, q[i]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"五、摆花\"><a href=\"#五、摆花\" class=\"headerlink\" title=\"五、摆花\"></a>五、摆花</h3><p>设f[i][j]表示前i个<strong>花瓶</strong>里放了j朵花的最大价值，对于第i个花瓶，只有放与不放两种选择</p>\n<p>状态转移方程：<br>$$<br>f[i][j] = max(f[i - 1][j], f[i - 1][j - 1] + w[j][i])<br>$$<br>时间复杂度O(mn)，假设价值均大于0</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">10010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> w[N][N], f[N][N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> m, n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;m, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= m; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++)</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;w[i][j]);</span><br><span class=\"line\">    <span class=\"comment\">//f[i][j]表示前i个花瓶里放前j束花的价值</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= <span class=\"built_in\">std</span>::min(m, i); j++)</span><br><span class=\"line\">            f[i][j] = <span class=\"built_in\">std</span>::max(f[i - <span class=\"number\">1</span>][j], f[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>] + w[j][i]);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, f[n][m]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"质数","url":"/2020/09/12/%E8%B4%A8%E6%95%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"质数\"><a href=\"#质数\" class=\"headerlink\" title=\"质数\"></a>质数</h1><h2 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h2><p>在大于1的整数中，如果只包含1和本身这两个约数，就被称为质数（素数）</p>\n<h3 id=\"质数的判定–试除法\"><a href=\"#质数的判定–试除法\" class=\"headerlink\" title=\"质数的判定–试除法\"></a>质数的判定–试除法</h3><p>时间复杂度O(n)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">is_prime</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(n &lt; <span class=\"number\">2</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i&lt; n; i ++) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(n % i == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>若d|n,则（n/d)|n,不妨设d &lt;= n/d,则d2 &lt;= n,则d&lt;=根号n</p>\n<p>那么d只需要枚举到根号n，时间复杂度O(根号n)</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">is_prime</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(n &lt; <span class=\"number\">2</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= n / i; i ++) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//注意 写法 i &lt;= sqrt(n)，每次都要执行开方函数，速度较慢</span></span><br><span class=\"line\">    <span class=\"comment\">//写法 i * i &lt;= n， 存在溢出风险</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(n % i == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"分解质因数–试除法\"><a href=\"#分解质因数–试除法\" class=\"headerlink\" title=\"分解质因数–试除法\"></a>分解质因数–试除法</h3><p>从小到大枚举所有数</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">divide</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i ++) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(n % i == <span class=\"number\">0</span>) &#123;<span class=\"comment\">//如果成立，则i一定是质数；若i不是质数，则i存在小于i并且大于1的因子k，1 &lt; k &lt; i,并且n % k == 0,</span></span><br><span class=\"line\">            <span class=\"comment\">//易证，k在该循环前一定被筛掉了，不可能是n的因子。</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> s = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span>(n%i==<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tn /= i;</span><br><span class=\"line\">\t\t\t\ts ++;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;质因数:%d 个数:%d&quot;</span>,i,s);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>n中最多只包含一个大于根号n的质因子，如果有两个，则它们的乘积会大于n，不成立</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">divide</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= n / i; i ++) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(n % i == <span class=\"number\">0</span>) &#123;<span class=\"comment\">//如果成立，则i一定是质数；若i不是质数，则i存在小于i并且大于1的因子k，1 &lt; k &lt; i,并且n % k == 0,</span></span><br><span class=\"line\">            <span class=\"comment\">//易证，k在该循环前一定被筛掉了，不可能是n的因子。</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> s = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span>(n%i==<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tn /= i;</span><br><span class=\"line\">\t\t\t\ts ++;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;质因数:%d 个数:%d\\n&quot;</span>,i,s);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(n &gt; <span class=\"number\">1</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;质因数:%d 个数:%d\\n&quot;</span>,n,<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n"},{"title":"阿里云无法连接github","url":"/2021/01/22/%E9%98%BF%E9%87%8C%E4%BA%91%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5github/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>无法连接raw.github…等网站，提示443.</p>\n<p>原因是dns污染，去<a href=\"https://www.ipaddress.com/\">网站</a>查找你访问不了域名的ip，将ip和域名添加到你的hosts中，这样访问网站时就会优先访问本机hosts中的dns</p>\n<p>ubuntu修改hosts</p>\n<p><code>vim /etc/hosts</code></p>\n<p>将ip,域名添加进去即可</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210122111849673.png\" alt=\"image-20210122111849673\"></p>\n"},{"url":"/2021/03/07/%E8%AE%A1%E7%BD%91%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>1、传输层提供进程与进程之间的逻辑通信</p>\n<p>网络层提供主机之间的逻辑通信</p>\n<p>2、面向连接的传输控制协议TCP</p>\n<p>无连接的用户数据报协议UDP，腾讯QQ，TCP和UDP都有使用，UDP为主</p>\n<p>3、二进制反码求和</p>\n<p>先按位取反，此时检验和为0，求和，填入校验位</p>\n<p>接受数据后同样按位取反求和</p>\n<p>相当于自己和自己的取反 相加，结果为1（如果传输正确的话）</p>\n<p>4、TCP是面向连接的传输层协议，不是物理连接，是虚连接</p>\n<p>每一条TCP连接只能有两个端点</p>\n<p>可靠交付的服务。可靠有序，不丢不重</p>\n<p>TCP提供全双工通信  发送缓存：准备发送的，已经发送但是还未收到确认</p>\n<p>​                                    接收缓存：按序到达但还未被应用程序读取的，不按序到达的数据</p>\n<p>TCP面向字节流，TCP把应用程序交下来的数据仅仅看成一串连续的无结构的字节流</p>\n<p>5、TCP连接传输的三个阶段</p>\n<p>连接建立—&gt;数据传送—&gt;连接释放</p>\n<p>主动发起连接建立的应用进程叫做客户，而被动等待连接建立的应用进程叫服务器</p>\n<p>6、连接建立</p>\n<p>1、客户端发送连接请求报文段，无应用层数据。SYN = 1（同步位），seq = x（随机，序号位）</p>\n<p>2、服务端为该TCP连接分配缓存和变量，并向客户端返回确认报文段，允许连接，无应用层数据。SYN = 1（同步位），ACK  = 1，seq = y（随机）， ack = x + 1（期待对方报文段发送的第一个字节）</p>\n<p>3、客户端为该TCP连接分配缓存和变量，并向服务端返回确认的确认，可以携带数据 SYN = 0， ACK = 1， seq = x + 1, ack = y + 1</p>\n<p>7、连接释放</p>\n<p>四次挥手</p>\n<p>参与TCP连接的两个进程的任何一个都能终止该连接，连接结束后，主机中的缓存和变量将被释放</p>\n<p>1、客户端发送连接释放报文段，停止发送数据，主动关闭TCP连接</p>\n<p>FIN = 1, seq = u</p>\n<p>2、服务器端回送一个确认报文段，客户到服务器这个方向的连接就释放了，半关闭状态</p>\n<p>ACK = 1, seq = v(服务端上一个报文段发送), ack = u + 1</p>\n<p>3、服务器端发完数据，就会发出连接释放报文段，关闭TCP连接</p>\n<p>FIN = 1, ACK = 1, seq = w, ack = u + 1</p>\n<p>4、客户端回送一个确认报文段，再等到时间等待计时器设置的2MSL（最长报文段寿命）后，连接彻底关闭</p>\n<p>ACK = 1, seq = u + 1, ack = w + 1</p>\n<p>网络层：提供尽最大努力交付，不可靠传输</p>\n<p>传输层使用TCP实现可靠传输</p>\n<p>如果是UDP，那么需要上层应用层提供可靠传输了</p>\n<p>8、TCP不支持广播和组播，UDP支持</p>\n<p>9、可以用字符计数法解决无边界问题</p>\n<p>在数据前加个字节表示该数据的长度</p>\n"},{"title":"龙骨人偶","url":"/2021/02/28/%E9%BE%99%E9%AA%A8%E4%BA%BA%E5%81%B6/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"坐标\"><a href=\"#坐标\" class=\"headerlink\" title=\"坐标\"></a>坐标</h2><p>可以算出来骨骼之间夹角</p>\n<p>头暂时不用管</p>\n"},{"title":"条款03：尽可能使用const","url":"/2021/01/13/Effective-C++/%E6%9D%A1%E6%AC%BE03%EF%BC%9A%E5%B0%BD%E5%8F%AF%E8%83%BD%E4%BD%BF%E7%94%A8const/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">char</span> greeting[] = <span class=\"string\">&quot;Hello&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">char</span>* p = greeting;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* p = greeting;</span><br><span class=\"line\"><span class=\"keyword\">char</span>* <span class=\"keyword\">const</span> p = greeting;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* <span class=\"keyword\">const</span> p = greeting;</span><br></pre></td></tr></table></figure>\n\n<p>const出现在*左边，则表明指针指向的东西是常量</p>\n<p>const出现在*右边，则表明指针本身是常量</p>\n<p>可以把const后面的东西看成一个整体，比如const (char* p)，则*p是常量；比如char const * p，*p是常量。</p>\n<p>const char * 和char const *是一样的。</p>\n<p>const  int a 和 int const a同样是一样的。</p>\n<h2 id=\"const成员函数\"><a href=\"#const成员函数\" class=\"headerlink\" title=\"const成员函数\"></a>const成员函数</h2><p>const放在函数参数表后面，表示该函数不能修改成员变量。在类外定义该函数时，也需要加上const</p>\n<p><a href=\"https://www.cnblogs.com/cthon/p/9178701.html\">参考这个博客</a></p>\n","categories":["Effective-C++"]},{"title":"1.两数之和","url":"/2021/01/05/hot-100/1.%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"解法1-暴力\"><a href=\"#解法1-暴力\" class=\"headerlink\" title=\"解法1    暴力\"></a>解法1    暴力</h2><p>首先最容易想到的就是O(n^2)的做法，非常简单，枚举第一个数，然后对每一个数遍历所有数字。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">twoSum</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; nums.size(); j++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(i != j)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(nums[i] + nums[j] == target)</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> &#123;i, j&#125;;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"解法2-排序-双指针\"><a href=\"#解法2-排序-双指针\" class=\"headerlink\" title=\"解法2    排序+双指针\"></a>解法2    排序+双指针</h2><p>复杂度O(nlogn)，首先排序，然后用双指针从两头向中间扫描。如果和大于target，那么j指针–，如果小于target，i指针++。如果相等，表明找到了，然后再<strong>原数组</strong>中找到下标即可。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">twoSum</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> temp = nums;</span><br><span class=\"line\">        sort(nums.begin(), nums.end());</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = nums.size() - <span class=\"number\">1</span>; i &lt; j ;)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> t = nums[i] + nums[j];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(t &lt; target) i++;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(t &gt; target) j--;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\">                <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k &lt; temp.size(); k++)</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(temp[k] == nums[i]) </span><br><span class=\"line\">                    &#123;   </span><br><span class=\"line\">                        n = k; </span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> k = nums.size() - <span class=\"number\">1</span>; k &gt;= <span class=\"number\">0</span>; k--)</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(temp[k] == nums[j]) </span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        m = k; </span><br><span class=\"line\">                        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> &#123;n, m&#125;;</span><br><span class=\"line\">            &#125; </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"解法3-哈希表\"><a href=\"#解法3-哈希表\" class=\"headerlink\" title=\"解法3    哈希表\"></a>解法3    哈希表</h2><p>哈希表，时间复杂度为O(n)</p>\n<p>unordered_map底层实现为哈希表，插入查询操作复杂度为O(1); map底层实现为平衡树，插入查询操作复杂度均为O(logn);</p>\n<p>我们遍历第二个数，然后找第一个数是否出现过。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">twoSum</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> t = target - nums[i];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(hash.count(t))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> &#123;hash[t], i&#125;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            hash[nums[i]] = i;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"避免使用vector bool","url":"/2021/01/12/c++/%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8vectorbool/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>vector&lt;bool&gt;并不是一个stl容器</p>\n<p>vector&lt;bool&gt;里面不是一个byte存储的，而是用一个bit来存储的</p>\n<p>因为c++不能单独给一个bit去操作，因此我们使用[]访问时，获得的并不是true或false的引用，而是一个’proxy reference’</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt; t&#123;<span class=\"literal\">true</span>, <span class=\"literal\">false</span>,<span class=\"literal\">true</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">bool</span> b = t[<span class=\"number\">1</span>];</span><br><span class=\"line\"><span class=\"keyword\">auto</span> c = t[<span class=\"number\">1</span>];</span><br></pre></td></tr></table></figure>\n\n<p>b是true或者false，因为这里进行了一个强制转换</p>\n<p>而c的值就不是true或者false了</p>\n<p>我们可以用deque&lt;bool&gt;来代替vector&lt;bool&gt;，deque&lt;bool&gt;中的true或false占用的是一个byte，里面保存的是真正的bool值</p>\n<p>或者bitset，注意，bitset不是stl容器，而是c++标准库的一部分，大小在编译期固定，因此不支持插入和删除元素，不是迭代器，不支持iterator。压缩表示，每个值只占用一比特。如果不在意没有迭代器和动态改变大小，bitset正合适。</p>\n","categories":["c++"]},{"title":"10. 正则表达式匹配","url":"/2021/01/08/hot-100/10.%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题难度较高，以后再写</p>\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"102. 二叉树的层序遍历","url":"/2021/01/12/hot-100/102.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>BFS，利用队列来实现</p>\n<p>首先，将头节点插入队列中，然后开始循环，当队列不空时，计算队列的长度k，这就是这一层的节点数。然后循环k次，每次将队列头取出保存在结果数组中，并且把该节点的左右子节点插入队尾。直到栈为空。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">levelOrder</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"built_in\">queue</span>&lt;TreeNode*&gt; q;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root) q.push(root);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q.size()) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; level;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> k = q.size();</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(k--) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">auto</span> t = q.front();</span><br><span class=\"line\">                q.pop();</span><br><span class=\"line\">                level.push_back(t-&gt;val);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;left) q.push(t-&gt;left);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;right) q.push(t-&gt;right);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            res.push_back(level);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"105. 从前序与中序遍历序列构造二叉树","url":"/2021/01/12/hot-100/105.%E4%BB%8E%E5%89%8D%E5%BA%8F%E4%B8%8E%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E5%BA%8F%E5%88%97%E6%9E%84%E9%80%A0%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>对于前序遍历，第一个点是根节点，接下来的数字是左右两边的子树，那么如何判断左子树的长度到哪呢？</p>\n<p>利用中序遍历，因为没有重复的数字，那么找到根节点的位置，该位置前就是左子树，右边就是右子树，这样就有了左右子树的长度了。</p>\n<p>于是我们就得到了前序遍历的左子树和中序遍历的左子树，又是一个子问题。</p>\n<p>我们可以用递归来解决</p>\n<p>为了快速确定根节点在中序遍历中的位置，我们把中序遍历里面的数字存在一个哈希表中，这样就可以在O(1)的时间里找到根节点的位置了。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt; pos;</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">buildTree</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; preorder, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; inorder)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span> ; i &lt; inorder.size(); i++) pos[inorder[i]] = i;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> build(preorder, inorder, <span class=\"number\">0</span>, preorder.size() - <span class=\"number\">1</span>, <span class=\"number\">0</span>, inorder.size() - <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">build</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; preorder, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; inorder, <span class=\"keyword\">int</span> pl, <span class=\"keyword\">int</span> pr, <span class=\"keyword\">int</span> il, <span class=\"keyword\">int</span> ir)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(pl &gt; pr) <span class=\"keyword\">return</span> <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> root = <span class=\"keyword\">new</span> TreeNode(preorder[pl]);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = pos[preorder[pl]];</span><br><span class=\"line\">        root-&gt;left = build(preorder, inorder, pl + <span class=\"number\">1</span>, pl + <span class=\"number\">1</span> + k - <span class=\"number\">1</span> - il, il, k - <span class=\"number\">1</span>);</span><br><span class=\"line\">        root-&gt;right = build(preorder, inorder, pl + <span class=\"number\">1</span> + k - <span class=\"number\">1</span> - il + <span class=\"number\">1</span>, pr, k + <span class=\"number\">1</span>, ir);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> root;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"11. 盛最多水的容器","url":"/2021/01/08/hot-100/11.%E7%9B%9B%E6%9C%80%E5%A4%9A%E6%B0%B4%E7%9A%84%E5%AE%B9%E5%99%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"解法一-暴力\"><a href=\"#解法一-暴力\" class=\"headerlink\" title=\"解法一    暴力\"></a>解法一    暴力</h2><p>暴力很简单，只需要遍历每一组$i, j$，然后计算出$(j - i) * min(height[i], height[j])$即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxArea</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; height)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; height.size() - <span class=\"number\">1</span>; i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i + <span class=\"number\">1</span>; j &lt; height.size(); j++)</span><br><span class=\"line\">                <span class=\"keyword\">if</span>((j - i) * min(height[i], height[j]) &gt; res)</span><br><span class=\"line\">                    res = (j - i) * min(height[i], height[j]);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"解法二-双指针\"><a href=\"#解法二-双指针\" class=\"headerlink\" title=\"解法二    双指针\"></a>解法二    双指针</h2><p>两个指针$i, j$分别指向数组头和尾，比较两个值的大小，如果$i$的值较小，那么把$i$往后移；如果$j$的值较小，那么把$j$往前移。</p>\n<p>为什么这么做呢？假如$i$的值小于$j$的值，如果把$j$往前移，那么$i$和$j$之间的距离就会变小，高度呢？肯定是小于等于$i$的值的，根据计算公式<br>$$<br>(j - i) * min(height[i], height[j])<br>$$<br>该结果肯定会减小。因此将i向后移动，才可能找出最优解。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxArea</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; height)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = height.size() - <span class=\"number\">1</span>; i &lt; j;)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            res = max(res, (j - i) * min(height[i], height[j]));</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(height[i] &lt; height[j]) i++;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> j--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"114. 二叉树展开为链表","url":"/2021/01/12/hot-100/114.%E4%BA%8C%E5%8F%89%E6%A0%91%E5%B1%95%E5%BC%80%E4%B8%BA%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>我们可以这样做，对于一个根节点，将它的左子树的<strong>右链</strong>插入到根节点的右节点中，即把左子树的头节点插在根节点的右节点处，将左子树的右子树的右子树..末尾的下一个元素指向根节点原来的右节点。</p>\n<p><img src=\"https://i.loli.net/2021/01/12/8J3LvWNsxkREjqg.png\" alt=\"image-20210112230915420\"></p>\n<p>​                                                                                                <img src=\"https://i.loli.net/2021/01/12/5tIVMUqXGgDYz7e.png\" alt=\"image-20210112231356777\"></p>\n<p><img src=\"https://i.loli.net/2021/01/12/ik6vyNJt4ns7xKA.png\" alt=\"image-20210112231641361\">        </p>\n<p>代码很好写,注意一定要把左子树清空，root-&gt;left = nullptr;</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">flatten</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(root) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(root-&gt;left) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">auto</span> p = root-&gt;left;                </span><br><span class=\"line\">                <span class=\"keyword\">while</span>(p-&gt;right) p = p-&gt;right;</span><br><span class=\"line\">                p-&gt;right = root-&gt;right;</span><br><span class=\"line\">                root-&gt;right = root-&gt;left;</span><br><span class=\"line\">                <span class=\"comment\">//一定要把左子树清空</span></span><br><span class=\"line\">                root-&gt;left = <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            root = root-&gt;right;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"101. 对称二叉树","url":"/2021/01/12/hot-100/101.%E5%AF%B9%E7%A7%B0%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题很简单，看一下代码怎么写</p>\n<p>要判断是否对称，那么就要传两个参数，左子树和右子树。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isSymmetric</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(root, root);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* l, TreeNode* r)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!l &amp;&amp; !r) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!l || !r || (l-&gt;val != r-&gt;val)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(l-&gt;left, r-&gt;right) &amp;&amp; dfs(l-&gt;right, r-&gt;left);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"139. 单词拆分","url":"/2021/01/13/hot-100/139.%E5%8D%95%E8%AF%8D%E6%8B%86%E5%88%86/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>稍微复杂一点的动态规划问题</p>\n<p>我们用f[i]表示前i个字符是否可以拆分</p>\n<p>如何判断f[i]是否为true？</p>\n<p>我们可以找到f[0…i - 1]中所有可以被拆分的串，那么从找到的那个可拆分串的下一个字符到i，判断这一段字符是否可以拆分。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">wordBreak</span><span class=\"params\">(<span class=\"built_in\">string</span> s, <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt;&amp; wordDict)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt; <span class=\"title\">f</span><span class=\"params\">(s.size() + <span class=\"number\">1</span>, <span class=\"literal\">false</span>)</span></span>;</span><br><span class=\"line\">        f[<span class=\"number\">0</span>] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"comment\">//将wordDict插入哈希表</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">unordered_set</span>&lt;<span class=\"built_in\">string</span>&gt; <span class=\"title\">hash</span><span class=\"params\">(wordDict.begin(), wordDict.end())</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= s.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; i; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(f[j] &amp;&amp; hash.count(s.substr(j, i - j))) &#123;</span><br><span class=\"line\">                    f[i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;    </span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[s.size()];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"104. 二叉树的最大深度","url":"/2021/01/12/hot-100/104.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题很简单，深搜就可以了。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxDepth</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(root, <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root, <span class=\"keyword\">int</span> res)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">        res = max(dfs(root-&gt;left, res), dfs(root-&gt;right, res)) + <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"142. 环形链表 II","url":"/2021/01/13/hot-100/142.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8II/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>首先判断是否有环</p>\n<p>如果有环，那么让一个指针从头节点出发，另一个指针指向刚刚fast和slow相遇时的位置。</p>\n<p>从头节点和相遇位置同时出发，两个指针相遇，即为环的入口。</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210113201427822.png\" alt=\"image-20210113201427822\"></p>\n<p>所以从相遇点的指针和从头节点开始的指针同时出发，由于到b点的路程相同，所以它们一定会在b点相遇。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode *<span class=\"title\">detectCycle</span><span class=\"params\">(ListNode *head)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> slow = head, fast = head;</span><br><span class=\"line\">        <span class=\"keyword\">bool</span> flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(fast &amp;&amp; fast-&gt;next) &#123;</span><br><span class=\"line\">            slow = slow-&gt;next;</span><br><span class=\"line\">            fast = fast-&gt;next-&gt;next;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(fast == slow) &#123;</span><br><span class=\"line\">                flag = <span class=\"literal\">true</span>; </span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(flag == <span class=\"literal\">false</span>) <span class=\"keyword\">return</span> <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> p = head;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(p != fast) &#123;</span><br><span class=\"line\">            p = p-&gt;next;</span><br><span class=\"line\">            fast = fast-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"15. 三数之和","url":"/2021/01/08/hot-100/15.%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"解法-双指针\"><a href=\"#解法-双指针\" class=\"headerlink\" title=\"解法 双指针\"></a>解法 双指针</h3><p>首先我们对数组排序。</p>\n<p>因为要找三数之和，用$i,j,k$来表示，用$i$表示第一个数，我们对$j, k$用双指针算法。</p>\n<p>令$i &lt; j &lt; k$，固定好$i$，使$j$指向$i$的后一项，$k$指向最后一个数。如果$nums[i] + nums[j] + nums[k] &gt; 0$，说明$k$指向的数字比较大，将$k$左移；如果小于0，那么需要将$j$右移。</p>\n<p>如何去除重复的三元组呢？</p>\n<p>对于$i$来说，如果有重复的，我们跳过即可。</p>\n<p>我们还要考虑重复的$j$，处理方式也是跳过去即可。</p>\n<p>对于重复的$k$呢？$i, j$确定下来以后，那么$nums[k]$的值是确定的，我们只要找到<strong>一个</strong>值为$nums[k]$的$k$就可以了，因此$k$不会重复。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">threeSum</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        sort(nums.begin(), nums.end());</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i &amp;&amp; nums[i] == nums[i - <span class=\"number\">1</span>]) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i + <span class=\"number\">1</span>, k = nums.size() - <span class=\"number\">1</span>; j &lt; k; j++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(j &gt; i + <span class=\"number\">1</span> &amp;&amp; nums[j] == nums[j - <span class=\"number\">1</span>]) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                <span class=\"comment\">//注意此处为什么写j &lt; k - 1，如果写j &lt; k，那么在执行k--后，发现j &lt; k不满足，那么k和j就重复了！</span></span><br><span class=\"line\">                <span class=\"comment\">//执行下面的if语句可能会导致k和j指向同一个数字，加入到答案中。</span></span><br><span class=\"line\">                <span class=\"keyword\">while</span>(j &lt; k - <span class=\"number\">1</span> &amp;&amp; nums[i] + nums[j] + nums[k] &gt; <span class=\"number\">0</span>) k--;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(nums[i] + nums[j] + nums[k] == <span class=\"number\">0</span>)</span><br><span class=\"line\">                    res.push_back(&#123;nums[i], nums[j], nums[k2]&#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"152. 乘积最大子数组","url":"/2021/01/14/hot-100/152.%E4%B9%98%E7%A7%AF%E6%9C%80%E5%A4%A7%E5%AD%90%E6%95%B0%E7%BB%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题是一道难度稍高的动态规划</p>\n<p>与最大字段和不同的是，我们需要考虑f[i]的正负</p>\n<p>在最大子段和中f[i]表示以i为结尾的最大的字段和，那么有两种情况，只包含i项，包含i项前面的项<br>$$<br>f[i] = max(nums[i], f[i - 1] + nums[i])<br>$$<br>但如果换成乘法，这样就不对了，比如 -3  4  -2</p>\n<p>f[0] = -3, f[1] = 4, f[2] = -2;输出的最大乘积是4</p>\n<p>这样显然是不正确的，原因在于当nums[i]为负数时，希望f[i - 1]最小，这样结果才可能更大</p>\n<p>因此，我们还需要一个数组来表示以i结尾的最小的乘积</p>\n<p>f[i]表示以i结尾的最大的乘积</p>\n<p>g[i]表示以i结尾的最小的乘积</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210114220914493.png\" alt=\"image-20210114220914493\"><br>$$<br>f(i)=\\left{ \\begin{aligned} max(nums[i], nums[i] * g[i - 1]),   nums[i] &lt; 0 \\ max(nums[i], nums[i] * f[i - 1]),nums[i] ≥0\\end{aligned} \\right.<br>$$</p>\n<p>$$<br>g(i)=\\left{ \\begin{aligned} min(nums[i], nums[i] * f[i - 1]),   nums[i] &lt; 0 \\ min(nums[i], nums[i] * g[i - 1]),nums[i] ≥ 0\\end{aligned} \\right.<br>$$</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxProduct</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        vector&lt;int&gt; f(nums.size()), g(nums.size());</span><br><span class=\"line\">        f[<span class=\"number\">0</span>] = g[<span class=\"number\">0</span>] = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; nums.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[i] &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                f[i] = max(nums[i], nums[i] * g[i - <span class=\"number\">1</span>]);</span><br><span class=\"line\">                g[i] = min(nums[i], nums[i] * f[i - <span class=\"number\">1</span>]);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                f[i] = max(nums[i], nums[i] * f[i - <span class=\"number\">1</span>]);</span><br><span class=\"line\">                g[i] = min(nums[i], nums[i] * g[i - <span class=\"number\">1</span>]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            res = max(res, max(f[i], g[i]));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"155. 最小栈","url":"/2021/01/14/hot-100/155.%E6%9C%80%E5%B0%8F%E6%A0%88/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>我们用一个普通的栈保存所有的元素</p>\n<p>另一个栈存储前i个数的最小值，当要查询栈的最小值时，返回这个栈的栈顶就可以了。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MinStack</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"comment\">/** initialize your data structure here. */</span></span><br><span class=\"line\">    <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; stk;</span><br><span class=\"line\">    <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; mstk;</span><br><span class=\"line\">    </span><br><span class=\"line\">    MinStack() &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">push</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">        stk.push(x);     </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(mstk.empty() || x &lt;= mstk.top()) mstk.push(x);   </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(stk.top() == mstk.top()) mstk.pop();</span><br><span class=\"line\">        stk.pop();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">top</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> stk.top();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getMin</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mstk.top();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your MinStack object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * MinStack* obj = new MinStack();</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;push(x);</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;pop();</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_3 = obj-&gt;top();</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_4 = obj-&gt;getMin();</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"160. 相交链表","url":"/2021/01/14/hot-100/160.%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210114142102691.png\" alt=\"image-20210114142102691\"></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode *<span class=\"title\">getIntersectionNode</span><span class=\"params\">(ListNode *headA, ListNode *headB)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> a = headA, b = headB;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(a != b) &#123;</span><br><span class=\"line\">            a = a == <span class=\"literal\">nullptr</span> ? headB : a-&gt;next; </span><br><span class=\"line\">            b = b == <span class=\"literal\">nullptr</span> ? headA : b-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"141. 环形链表","url":"/2021/01/13/hot-100/141.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>很简单的一道题</p>\n<p>一个快指针，每次走两步；一个慢指针，每次走一步。</p>\n<p>如果快慢指针相遇则表明有环。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">hasCycle</span><span class=\"params\">(ListNode *head)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> slow = head, fast = head;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(fast &amp;&amp; fast-&gt;next) &#123;            </span><br><span class=\"line\">            slow = slow-&gt;next;</span><br><span class=\"line\">            fast = fast-&gt;next-&gt;next;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(slow == fast) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"17. 电话号码的字母组合","url":"/2021/01/08/hot-100/17.%E7%94%B5%E8%AF%9D%E5%8F%B7%E7%A0%81%E7%9A%84%E5%AD%97%E6%AF%8D%E7%BB%84%E5%90%88/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>该题为一道简单的回溯法dfs问题</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt; res;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> str[<span class=\"number\">10</span>] = &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;</span>, <span class=\"string\">&quot;&quot;</span>, <span class=\"string\">&quot;abc&quot;</span>,<span class=\"string\">&quot;def&quot;</span>,<span class=\"string\">&quot;ghi&quot;</span>,<span class=\"string\">&quot;jkl&quot;</span>,<span class=\"string\">&quot;mno&quot;</span>,<span class=\"string\">&quot;pqrs&quot;</span>,<span class=\"string\">&quot;tuv&quot;</span>,<span class=\"string\">&quot;wxyz&quot;</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt; <span class=\"title\">letterCombinations</span><span class=\"params\">(<span class=\"built_in\">string</span> digits)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(digits.empty()) <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">        dfs(digits, <span class=\"number\">0</span>, <span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"built_in\">string</span>&amp; digits, <span class=\"keyword\">int</span> u, <span class=\"built_in\">string</span> path)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(u == digits.size()) res.push_back(path);</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : str[digits[u] - <span class=\"string\">&#x27;0&#x27;</span>])</span><br><span class=\"line\">                dfs(digits, u + <span class=\"number\">1</span>, path + x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"198. 打家劫舍","url":"/2021/01/14/hot-100/198.%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>对于每个房屋，有选和不选两种情况<br>$$<br>f[i] = max(f[i - 1], f[i - 2] + nums[i])<br>$$<br>注意初始化f[0]和f[1]</p>\n<p>f[0] = nums[0], f[1] = max(nums[0], nums[1]);</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">rob</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums.empty()) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(nums.size() + <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">        f[<span class=\"number\">0</span>] = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums.size() &gt; <span class=\"number\">1</span>) f[<span class=\"number\">1</span>] = max(nums[<span class=\"number\">0</span>], nums[<span class=\"number\">1</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt; nums.size(); i++) &#123;</span><br><span class=\"line\">            f[i] = max(f[i - <span class=\"number\">1</span>], f[i - <span class=\"number\">2</span>] + nums[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[nums.size() - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"19. 删除链表的倒数第N个节点","url":"/2021/01/08/hot-100/19.%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACN%E4%B8%AA%E8%8A%82%E7%82%B9/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"解法一-遍历两遍\"><a href=\"#解法一-遍历两遍\" class=\"headerlink\" title=\"解法一    遍历两遍\"></a>解法一    遍历两遍</h2><p>本题遍历两遍非常好做，第一遍得到链表的长度，然后由倒数第k个数找出正数第几个数，然后再遍历一遍就可以将正数的那个数删除了。</p>\n<p>凡是可能改变头结点的时候，我们就加一个虚拟头节点    </p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">removeNthFromEnd</span><span class=\"params\">(ListNode* head, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> dummy = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">-1</span>, head);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> len = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> p = dummy; p != <span class=\"literal\">NULL</span>; p = p -&gt; next) len++;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> p = dummy;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; len - n - <span class=\"number\">1</span>; i++) p = p -&gt; next;</span><br><span class=\"line\">        p-&gt;next = p-&gt;next-&gt;next;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dummy-&gt;next;</span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"解法二-遍历一遍-快慢指针\"><a href=\"#解法二-遍历一遍-快慢指针\" class=\"headerlink\" title=\"解法二    遍历一遍    快慢指针\"></a>解法二    遍历一遍    快慢指针</h2><p>一个快指针一个慢指针均指向头节点，快指针先走n步，然后快慢指针一起走，直到快指针走到结尾。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">removeNthFromEnd</span><span class=\"params\">(ListNode* head, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> dummy = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">-1</span>, head);</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> fast = dummy, slow = dummy;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt;= n; i++) fast = fast -&gt; next;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(fast != <span class=\"literal\">NULL</span>) fast = fast -&gt; next, slow = slow -&gt; next;</span><br><span class=\"line\">        slow -&gt; next = slow -&gt; next -&gt; next;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dummy-&gt;next;</span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"2.两数相加","url":"/2021/01/05/hot-100/2.%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>最简单的想法是把两个链表都转换为数字，然后相加，再把结果转换成链表，直接想出来的做法一般都有缺点。</p>\n<p><strong>不能</strong>转换成数字再求和，这样会有问题，如果链表的位数特别大以至于int、long无法表示怎么办呢？回想一下小学算术，我们只要模拟一下加法运算就可以了。</p>\n<p>t表示进位，为1或0，最开始为0。每位上的和为a+b+t，然后该数模十就是结果，该数除以10的商就是进位。</p>\n<p>需要特判头节点的时候，才可能会用到虚拟头节点。</p>\n<p>本题如果不用虚拟头节点的话，那么在插入第一个节点的时候需要特判一下，因为此时链表还没有建立起来，需要特判一下，建立起来链表。</p>\n<p>用上虚拟头节点就方便许多了，在循环中不需要特叛了。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode* l1, ListNode* l2)</span> </span>&#123;、</span><br><span class=\"line\">        <span class=\"comment\">//设置一个虚拟头节点，方便</span></span><br><span class=\"line\">        <span class=\"keyword\">auto</span> dummy = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">-1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> current = dummy;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//如果l1每遍历完，或者l2没遍历完，或者t不为0</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l1 || l2 || t)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(l1) t += l1-&gt;val, l1 = l1 -&gt; next;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(l2) t += l2-&gt;val, l2 = l2 -&gt; next;</span><br><span class=\"line\">            current-&gt;next = <span class=\"keyword\">new</span> ListNode(t % <span class=\"number\">10</span>);</span><br><span class=\"line\">            t /= <span class=\"number\">10</span>;</span><br><span class=\"line\">            current = current -&gt; next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dummy-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"200. 岛屿数量","url":"/2021/01/21/hot-100/200.%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>思路：如果（i,j）为1，那么我们把该点标记为其他字符，并且把该点上下左右为1的地方也标记为其他字符，以此类推</p>\n<p>最后，（i，j）所在的有1组成的区域都会被我们标记成其他字符</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">numIslands</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">char</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; grid.size(); i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; grid[<span class=\"number\">0</span>].size(); j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(grid[i][j] == <span class=\"string\">&#x27;1&#x27;</span>) &#123;</span><br><span class=\"line\">                    dfs(grid, i, j);</span><br><span class=\"line\">                    cnt++;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cnt;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//表示上下左右四个方向</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> dx[<span class=\"number\">4</span>] = &#123;<span class=\"number\">-1</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>&#125;, dy[<span class=\"number\">4</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">char</span>&gt;&gt;&amp; grid, <span class=\"keyword\">int</span> x , <span class=\"keyword\">int</span> y)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//随便置一个除1外的字符</span></span><br><span class=\"line\">        grid[x][y] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> a = x + dx[i], b = y + dy[i];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a &gt;= <span class=\"number\">0</span> &amp;&amp; a &lt; grid.size() &amp;&amp; b &gt;= <span class=\"number\">0</span> &amp;&amp; b &lt; grid[<span class=\"number\">0</span>].size() &amp;&amp; grid[a][b] == <span class=\"string\">&#x27;1&#x27;</span>)</span><br><span class=\"line\">                dfs(grid, a, b);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"169. 多数元素","url":"/2021/01/14/hot-100/169.%E5%A4%9A%E6%95%B0%E5%85%83%E7%B4%A0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>数字之间相互打架，会攻击<strong>与自己不同的数字</strong>。两个不同数字打架的结果为两败俱伤，把这两个数从数组中移出。由于某个数的数量多余其他数字的总和，所以，打完架后剩下的数一定是这个最多的数。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">majorityElement</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(cnt == <span class=\"number\">0</span>) t = x;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(x == t) cnt++;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> cnt--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> t;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"206. 反转链表","url":"/2021/01/14/hot-100/206.%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>凡是链表的题目，画图可以很直观地解决。</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210114192956328.png\" alt=\"image-20210114192956328\"></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">reverseList</span><span class=\"params\">(ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!head) <span class=\"keyword\">return</span> <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> a = head, b = head-&gt;next;</span><br><span class=\"line\">        head-&gt;next = <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(b) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> t = b-&gt;next;</span><br><span class=\"line\">            b-&gt;next = a;</span><br><span class=\"line\">            a = b;</span><br><span class=\"line\">            b = t;            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"递归写法\"><a href=\"#递归写法\" class=\"headerlink\" title=\"递归写法\"></a>递归写法</h2><p>假设该函数可以把以head为头节点的链表反转</p>\n<p>那么把head-&gt;next传入函数中，则head-&gt;next后面的链表就反转了，返回值为反转后的头节点（反转前的尾节点</p>\n<p>）</p>\n<p>那么将head指针与head-&gt;next反转</p>\n<p>1-&gt;2-&gt;3-&gt;4-&gt;空</p>\n<p>递归一遍变成</p>\n<p>1-&gt;2&lt;-3&lt;-4</p>\n<p>然后我们把1和2反转了</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">reverseList</span><span class=\"params\">(ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!head || !head-&gt;next) <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> t = reverseList(head-&gt;next);</span><br><span class=\"line\">        head-&gt;next-&gt;next = head;</span><br><span class=\"line\">        head-&gt;next = <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> t;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"207. 课程表","url":"/2021/01/15/hot-100/207.%E8%AF%BE%E7%A8%8B%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>宽度优先搜索，其实就是找拓扑排序</p>\n<p>首先构造邻接矩阵，注意，题中传入的数组不是邻接矩阵</p>\n<p>记录每个点的入度</p>\n<p>构造一个队列</p>\n<p>将入度为0的点插入队列中 （入度为0的点即为可以直接修的课程）</p>\n<p>然后，就开始了宽度优先搜索</p>\n<p>当队列不为空时</p>\n<p>取出队列头</p>\n<p>然后更新该队列头可以到达的下一个点，将该点的入度减一，如果该点入度为0，将该点放入队列中</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">canFinish</span><span class=\"params\">(<span class=\"keyword\">int</span> numCourses, <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; prerequisites)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">g</span><span class=\"params\">(numCourses)</span></span>;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">d</span><span class=\"params\">(numCourses)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : prerequisites) &#123;</span><br><span class=\"line\">            g[x[<span class=\"number\">1</span>]].push_back(x[<span class=\"number\">0</span>]);</span><br><span class=\"line\">            d[x[<span class=\"number\">0</span>]]++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">queue</span>&lt;<span class=\"keyword\">int</span>&gt; q;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; d.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(d[i] == <span class=\"number\">0</span>) q.push(i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q.size()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> t = q.front();</span><br><span class=\"line\">            q.pop();</span><br><span class=\"line\">            cnt++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span>&amp; x : g[t]) &#123;</span><br><span class=\"line\">                d[x]--;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(d[x] == <span class=\"number\">0</span>) q.push(x);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cnt == numCourses;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"208. 实现 Trie (前缀树)","url":"/2021/01/15/hot-100/208.%E5%AE%9E%E7%8E%B0Trie(%E5%89%8D%E7%BC%80%E6%A0%91)/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Trie</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> &#123;</span></span><br><span class=\"line\">        <span class=\"keyword\">bool</span> is_end;</span><br><span class=\"line\">        Node* son[<span class=\"number\">26</span>];</span><br><span class=\"line\">        Node() &#123;</span><br><span class=\"line\">            is_end = <span class=\"literal\">false</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">26</span>;i++) son[i] = <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;*root;</span><br><span class=\"line\">    <span class=\"comment\">/** Initialize your data structure here. */</span></span><br><span class=\"line\">    Trie() &#123;</span><br><span class=\"line\">        root = <span class=\"keyword\">new</span> Node();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/** Inserts a word into the trie. */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"built_in\">string</span> word)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> p = root;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : word) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> u = x - <span class=\"string\">&#x27;a&#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!p-&gt;son[u]) p-&gt;son[u] = <span class=\"keyword\">new</span> Node();</span><br><span class=\"line\">            p = p-&gt;son[u];</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//这样写是错误的，如果p是空，值传递，那么p就不知道它的上一个节点是什么</span></span><br><span class=\"line\">            <span class=\"comment\">// p = p-&gt;son[x - &#x27;a&#x27;];</span></span><br><span class=\"line\">            <span class=\"comment\">// if(!p) p = new Node();</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        p-&gt;is_end = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/** Returns if the word is in the trie. */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">search</span><span class=\"params\">(<span class=\"built_in\">string</span> word)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> p = root;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : word) &#123;</span><br><span class=\"line\">            p = p-&gt;son[x - <span class=\"string\">&#x27;a&#x27;</span>];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!p) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> p-&gt;is_end;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/** Returns if there is any word in the trie that starts with the given prefix. */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">startsWith</span><span class=\"params\">(<span class=\"built_in\">string</span> prefix)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> p = root;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : prefix) &#123;</span><br><span class=\"line\">            p = p-&gt;son[x - <span class=\"string\">&#x27;a&#x27;</span>];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!p) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your Trie object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * Trie* obj = new Trie();</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;insert(word);</span></span><br><span class=\"line\"><span class=\"comment\"> * bool param_2 = obj-&gt;search(word);</span></span><br><span class=\"line\"><span class=\"comment\"> * bool param_3 = obj-&gt;startsWith(prefix);</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"21. 合并两个有序链表","url":"/2021/01/08/hot-100/21.%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>还是二路归并，利用归并排序时合并的思想就可以了，注意，合并时直接把链表接过来，不用新new一个节点，具体看代码如何书写</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">mergeTwoLists</span><span class=\"params\">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> dummy = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">-1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> cur = dummy;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l1 &amp;&amp; l2)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(l1 -&gt; val &lt;= l2 -&gt; val) cur = cur -&gt; next = l1, l1 = l1 -&gt; next;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> cur = cur -&gt; next = l2, l2 = l2 -&gt; next; </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l1) cur -&gt; next = l1;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l2) cur -&gt; next = l2; </span><br><span class=\"line\">        <span class=\"keyword\">return</span> dummy -&gt; next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"215. 数组中的第K个最大元素","url":"/2021/01/15/hot-100/215.%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E7%AC%ACK%E4%B8%AA%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>线性时间选择，背下来即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">findKthLargest</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> quick_sort(nums, <span class=\"number\">0</span>, nums.size() - <span class=\"number\">1</span>, k);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">quick_sort</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l == r) <span class=\"keyword\">return</span> nums[l];</span><br><span class=\"line\">        <span class=\"keyword\">int</span> x = nums[l + r &gt;&gt; <span class=\"number\">1</span>], i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(i &lt; j) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(nums[++i] &gt; x);</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(nums[--j] &lt; x);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i &lt; j) swap(nums[i], nums[j]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sl = j - l + <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(k &lt;= sl) <span class=\"keyword\">return</span> quick_sort(nums, l, j, k);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> quick_sort(nums, j + <span class=\"number\">1</span>, r, k - sl);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"22. 括号生成","url":"/2021/01/08/hot-100/22.%E6%8B%AC%E5%8F%B7%E7%94%9F%E6%88%90/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题较为简单</p>\n<p>如何判断一个括号序列是否合法呢？首先，对于任一前缀，左括号的数量都要大于等于右括号的数量；其次，左右括号数量相等。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt; res;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt; <span class=\"title\">generateParenthesis</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        dfs(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"string\">&quot;&quot;</span>, n);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//表示左括号数量，右括号数量，路径，括号总对数</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r , <span class=\"built_in\">string</span> path, <span class=\"keyword\">int</span> n)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l == r &amp;&amp; r == n) res.push_back(path);</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(l &lt; n) dfs(l + <span class=\"number\">1</span>, r, path + <span class=\"string\">&#x27;(&#x27;</span>, n);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(r &lt; l &amp;&amp; r &lt; n) dfs(l, r + <span class=\"number\">1</span>, path + <span class=\"string\">&#x27;)&#x27;</span>, n);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"221. 最大正方形","url":"/2021/01/16/hot-100/221.%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>该题难度很高</p>\n<p>证明很困难</p>\n<p>$f[i][j]$表示以$i,j$为右下角的最大正方形的边长</p>\n<p>一般情况$f[i][j]$会由$f[i - 1][j], f[i][j - 1], f[i - 1][j - 1]$推导出来，在这里我们不妨也这样猜测</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210116195058435.png\" alt=\"image-20210116195058435\"></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maximalSquare</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">char</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> n = matrix.size();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> m = matrix[<span class=\"number\">0</span>].size();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">f</span><span class=\"params\">(n + <span class=\"number\">1</span>, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; (m + <span class=\"number\">1</span>))</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= m; j++)</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(matrix[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>] == <span class=\"string\">&#x27;1&#x27;</span>) &#123;</span><br><span class=\"line\">                    f[i][j] = min(f[i - <span class=\"number\">1</span>][j], min(f[i][j - <span class=\"number\">1</span>], f[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>])) + <span class=\"number\">1</span>;</span><br><span class=\"line\">                    res = max(res, f[i][j]);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">        <span class=\"comment\">//res是最大的边长，我们返回的是面积，所以要平方</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> res * res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"226. 翻转二叉树","url":"/2021/01/15/hot-100/226.%E7%BF%BB%E8%BD%AC%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>对于一个根节点，swap(root-&gt;left, root-&gt;right)就完成了对左右儿子的翻转，递归处理</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">invertTree</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        swap(root-&gt;left, root-&gt;right);</span><br><span class=\"line\">        invertTree(root-&gt;left);</span><br><span class=\"line\">        invertTree(root-&gt;right);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> root;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"234. 回文链表","url":"/2021/01/15/hot-100/234.%E5%9B%9E%E6%96%87%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>首先利用快慢指针找到中点</p>\n<p>然后将中点之后的链表反转</p>\n<p>然后从前半部分的链表头和从反转后的链表头开始走，判断是否是回文链表</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210115165313301.png\" alt=\"image-20210115165313301\"></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isPalindrome</span><span class=\"params\">(ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!head) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> slow = head, fast = head;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(fast &amp;&amp; fast-&gt;next) &#123;</span><br><span class=\"line\">            slow = slow-&gt;next;</span><br><span class=\"line\">            fast = fast-&gt;next-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//slow为中点</span></span><br><span class=\"line\">        <span class=\"keyword\">auto</span> a = slow, b = slow-&gt;next;</span><br><span class=\"line\">        slow-&gt;next = <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(b) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> t = b-&gt;next;</span><br><span class=\"line\">            b-&gt;next = a;</span><br><span class=\"line\">            a = b;</span><br><span class=\"line\">            b = t;            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">auto</span> m = head, n = a;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(m &amp;&amp; n) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">cout</span> &lt;&lt; m-&gt;val &lt;&lt; n-&gt;val;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(m-&gt;val != n-&gt;val) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            m = m-&gt;next;</span><br><span class=\"line\">            n = n-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"20. 有效的括号","url":"/2021/01/08/hot-100/20.%E6%9C%89%E6%95%88%E7%9A%84%E6%8B%AC%E5%8F%B7/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题较为简单，设置一个栈，如果是左括号则入栈，如果是右括号并且栈顶是与之匹配的左括号，则栈顶出栈，否则匹配不上。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isValid</span><span class=\"params\">(<span class=\"built_in\">string</span> t)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">char</span>&gt; s;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : t)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(x == <span class=\"string\">&#x27;(&#x27;</span> || x == <span class=\"string\">&#x27;[&#x27;</span> || x == <span class=\"string\">&#x27;&#123;&#x27;</span>)</span><br><span class=\"line\">                s.push(x);</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!s.empty() &amp;&amp; <span class=\"built_in\">abs</span>(s.top() - x) &lt;= <span class=\"number\">2</span>)</span><br><span class=\"line\">                    s.pop();</span><br><span class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> s.empty();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"238. 除自身以外数组的乘积","url":"/2021/01/21/hot-100/238.%E9%99%A4%E8%87%AA%E8%BA%AB%E4%BB%A5%E5%A4%96%E6%95%B0%E7%BB%84%E7%9A%84%E4%B9%98%E7%A7%AF/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>前后缀分解</p>\n<p>对应数组中下标为i的元素，我们找出前i - 1个数的乘积（前缀）；找出从i + 1到数组末尾的乘积（后缀）。</p>\n<p>某个数的前后缀的乘积就是除自身外数组的乘积</p>\n<p>我们可以开两个数组来维护前缀乘积和后缀乘积</p>\n<p>但题目要求最多只能开一个数组</p>\n<p>我们可以先维护好前缀乘积，然后在遍历的过程中维护后缀乘积</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">productExceptSelf</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">res</span><span class=\"params\">(nums.size())</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i == <span class=\"number\">0</span>) res[i] = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">            <span class=\"keyword\">else</span> res[i] = res[i - <span class=\"number\">1</span>] * nums[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> p = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = nums.size() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i == <span class=\"number\">0</span>) res[i] = p;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                res[i] = res[i - <span class=\"number\">1</span>] * p;</span><br><span class=\"line\">                p *= nums[i]; </span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"283. 移动零","url":"/2021/01/15/hot-100/283.%E7%A7%BB%E5%8A%A8%E9%9B%B6/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题较为简单</p>\n<p>遍历过程中，记录0的数量</p>\n<p>遇到0则把cnt加1</p>\n<p>如果不是0那么将该位左移cnt位$nums[i - cnt] = nums[i]$</p>\n<p>然后在数组末尾cnt个数置为0即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">moveZeroes</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[i] == <span class=\"number\">0</span>) cnt++;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                nums[i - cnt] = nums[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = nums.size() - <span class=\"number\">1</span>; cnt &gt; <span class=\"number\">0</span>; i--, cnt--) &#123;</span><br><span class=\"line\">            nums[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"279. 完全平方数","url":"/2021/01/16/hot-100/279.%E5%AE%8C%E5%85%A8%E5%B9%B3%E6%96%B9%E6%95%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>完全背包问题</p>\n<p>把数组里面初始化成最大值</p>\n<p>1，2，4，9，16表示物品，它们的数值表示体积，每个数字的价值为1</p>\n<p>目的是找出体积等于给定数字并且价值最小的一组物品</p>\n<p>f[i][j]表示前i个数字里体积小于等于j的最小价值</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">numSquares</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> m = <span class=\"built_in\">sqrt</span>(n);</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">f</span><span class=\"params\">(m + <span class=\"number\">1</span>, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; (n + <span class=\"number\">1</span>, INT_MAX))</span></span>;</span><br><span class=\"line\">        f[<span class=\"number\">0</span>][<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= m; i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt;= n; j++) &#123;</span><br><span class=\"line\">                f[i][j] = f[i - <span class=\"number\">1</span>][j];</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(j &gt;= i * i) </span><br><span class=\"line\">                    f[i][j] = min(f[i][j], f[i][j - i * i] + <span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[m][n];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>优化版本</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">numSquares</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> m = <span class=\"built_in\">sqrt</span>(n);</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(n+<span class=\"number\">1</span>, INT_MAX)</span></span>;</span><br><span class=\"line\">        f[<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= m; i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i * i; j &lt;= n; j++) &#123;</span><br><span class=\"line\">                f[j] = min(f[j], f[j - i * i] + <span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[n];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"136. 只出现一次的数字","url":"/2021/01/13/hot-100/136.%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"异或\"><a href=\"#异或\" class=\"headerlink\" title=\"异或\"></a>异或</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">singleNumber</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) res ^= x;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"哈希表\"><a href=\"#哈希表\" class=\"headerlink\" title=\"哈希表\"></a>哈希表</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">singleNumber</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) hash[x]++;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : hash) <span class=\"keyword\">if</span>(x.second == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> x.first;</span><br><span class=\"line\">        <span class=\"comment\">//力扣要求必须返回一个数，其实函数是执行不到这一步的</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"3.无重复字符的最长子串","url":"/2021/01/06/hot-100/3.%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>我们可以把所有子串都找出来，有n + n - 1 + n - 2 + … + 1种，然后筛出其中没有重复字符的子串，然后再从中选出一个最长的即可，判断子串中是否含有重复字符需要O(n)的时间，这样的时间复杂度为O(n^3)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">notMultChar</span><span class=\"params\">(<span class=\"built_in\">string</span> &amp; s, <span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> j)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_set</span>&lt;<span class=\"keyword\">char</span>&gt; heap;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> k = i; k &lt;= j; k++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(heap.count(s[k]))</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            heap.insert(s[k]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">lengthOfLongestSubstring</span><span class=\"params\">(<span class=\"built_in\">string</span> s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; s.size(); i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i; j &lt; s.size(); j++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"keyword\">if</span>(notMultChar(s, i, j))</span><br><span class=\"line\">                    res = max(res, j - i + <span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>我们只需要枚举出没有重复字符的子串就可以了。我们采用双指针算法，将所有情况分为这几类，以第0个，第1个，…，第n - 1个字符结尾最长的没有重复字符的子串。用指针i表示后面的一个指针，指针j表示是从j到i最长的没有重复字符的子串。如何判断是否有重复字符呢？根据单调性！对于一个已经确定好的i，再确定i + 1(i’)时，j’的位置如何确定，显然，j’的位置一定在j的右边或者j的位置上，用反证法很容易证明。这样，在扫描时，i和j指针都会向前移动，这样的时间复杂度为O(n)。当i移动到下一个位置时，i + 1只可能与j右边的数重复，将j后移直到没有重复字符为止。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">lengthOfLongestSubstring</span><span class=\"params\">(<span class=\"built_in\">string</span> s)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">char</span>, <span class=\"keyword\">int</span>&gt; heap;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>; i &lt; s.size(); i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            heap[s[i]]++;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(heap[s[i]] &gt; <span class=\"number\">1</span>) heap[s[j++]]--;</span><br><span class=\"line\">            res = max(res, i - j + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"121. 买卖股票的最佳时机","url":"/2021/01/12/hot-100/121.%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>这是一道非常简单的动态规划</p>\n<p>前i天的最大价格 = max(前i - 1天的最大价格，当前的价格 - 前i - 1天的最小价格)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxProfit</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> minp = INT_MAX;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : prices) &#123;</span><br><span class=\"line\">            res = max(res, x - minp);</span><br><span class=\"line\">            minp = min(minp, x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"309. 最佳买卖股票时机含冷冻期","url":"/2021/01/16/hot-100/309.%E6%9C%80%E4%BD%B3%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E6%97%B6%E6%9C%BA%E5%90%AB%E5%86%B7%E5%86%BB%E6%9C%9F/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>略微复杂的动态规划</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210116230320593.png\" alt=\"image-20210116230320593\"></p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxProfit</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(prices.empty()) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> n = prices.size();</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">f</span><span class=\"params\">(n, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;(<span class=\"number\">3</span>))</span></span>;</span><br><span class=\"line\">        f[<span class=\"number\">0</span>][<span class=\"number\">0</span>] = <span class=\"number\">0</span>, f[<span class=\"number\">0</span>][<span class=\"number\">1</span>] = -prices[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">            f[i][<span class=\"number\">0</span>] = max(f[i - <span class=\"number\">1</span>][<span class=\"number\">0</span>], f[i - <span class=\"number\">1</span>][<span class=\"number\">2</span>]);</span><br><span class=\"line\">            f[i][<span class=\"number\">1</span>] = max(f[i - <span class=\"number\">1</span>][<span class=\"number\">0</span>] - prices[i], f[i - <span class=\"number\">1</span>][<span class=\"number\">1</span>]);</span><br><span class=\"line\">            f[i][<span class=\"number\">2</span>] = f[i - <span class=\"number\">1</span>][<span class=\"number\">1</span>] + prices[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> max(f[n - <span class=\"number\">1</span>][<span class=\"number\">0</span>], max(f[n - <span class=\"number\">1</span>][<span class=\"number\">1</span>], f[n - <span class=\"number\">1</span>][<span class=\"number\">2</span>]));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"300. 最长递增子序列","url":"/2021/01/16/hot-100/300.%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>一道简单的动态规划</p>\n<p>最长上升子序列</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">lengthOfLIS</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(nums.size())</span></span>;</span><br><span class=\"line\">        <span class=\"comment\">//f[i]表示以i结尾的最长上升子序列的长度</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; i; j++) </span><br><span class=\"line\">                <span class=\"keyword\">if</span>(nums[i] &gt; nums[j]) f[i] = max(f[i], f[j]);</span><br><span class=\"line\">            f[i] += <span class=\"number\">1</span>;</span><br><span class=\"line\">            res = max(res, f[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"32. 最长有效括号","url":"/2021/01/09/hot-100/32.%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>一个合法的括号序列要满足两个条件</p>\n<blockquote>\n<p>1、左括号数和右括号数相等</p>\n<p>2、任意前缀，左括号数量大于等于右括号数量</p>\n</blockquote>\n<p><strong>本题太难，以后再写</strong></p>\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"23. 合并K个升序链表","url":"/2021/01/09/hot-100/23.%E5%90%88%E5%B9%B6K%E4%B8%AA%E5%8D%87%E5%BA%8F%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>对于这k个链表，找到这k个节点中最小的一个节点，插入到我们的结果链表中，然后把被选中链表的头节点向后移动一位。</p>\n<p>我们可以用堆来维护k个节点中最小的节点。</p>\n<p>首先将这k个链表头节点插入最小堆中，然后取出堆顶，把堆顶节点插入到我们的结果链表，然后将刚取出节点的下一个节点插入堆中，直到堆为空为止。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">cmp</span> &#123;</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">operator</span> <span class=\"params\">()</span> <span class=\"params\">(ListNode* a, ListNode* b)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> a-&gt;val &gt; b-&gt;val;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">mergeKLists</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;ListNode*&gt;&amp; lists)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> dummy = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">-1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> cur = dummy;</span><br><span class=\"line\">        <span class=\"comment\">//注意比较函数，需要重载()</span></span><br><span class=\"line\">        <span class=\"built_in\">priority_queue</span>&lt;ListNode*, <span class=\"built_in\">vector</span>&lt;ListNode*&gt;, cmp&gt; heap;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : lists) <span class=\"keyword\">if</span>(x) heap.push(x);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(heap.size())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> t = heap.top();</span><br><span class=\"line\">            heap.pop();</span><br><span class=\"line\">            cur = cur-&gt;next = t;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(t-&gt;next) heap.push(t-&gt;next);  </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dummy-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"31. 下一个排列","url":"/2021/01/09/hot-100/31.%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%8E%92%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题难度较高，主要是不好想。</p>\n<h2 id=\"做法\"><a href=\"#做法\" class=\"headerlink\" title=\"做法\"></a>做法</h2><p>1、从后往前找出第一个<strong>非降序</strong>的数字，比如1493，第一个非降序的数字为4</p>\n<p>2、找出非降序数字后面的比降序数字大的最小的数字，在这里是9。因为非降序数字后面的数是降序排列的，所以只要往后扫描找出最后一个大于非降序数字的数即可。</p>\n<p>3、交换非降序数字与最后一个大于该数字的数（比非降序数字大的最小的数），得到1943</p>\n<p>4、将刚找到的非降序数字<strong>位置</strong>的下一个数到结尾升序排列，得到1934</p>\n<p>这样就找出了下一个排列的数字。</p>\n<p>知道了原理，代码就很好写了</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">nextPermutation</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(t &gt; <span class=\"number\">0</span> &amp;&amp; nums[t] &lt;= nums[t - <span class=\"number\">1</span>]) t--;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(t == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            reverse(nums.begin(), nums.end());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//t - 1为第一个非降序的数字</span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> b = t;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(b &lt; nums.size() &amp;&amp; nums[b] - nums[t - <span class=\"number\">1</span>] &gt; <span class=\"number\">0</span>) b++;</span><br><span class=\"line\">            swap(nums[t - <span class=\"number\">1</span>], nums[b - <span class=\"number\">1</span>]);</span><br><span class=\"line\">            reverse(nums.begin() + t, nums.end()); </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"33. 搜索旋转排序数组","url":"/2021/01/09/hot-100/33.%E6%90%9C%E7%B4%A2%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>该题考查二分</p>\n<p>首先我们将数组分成两段，从发生旋转的点将数组分为两段<strong>升序</strong>。</p>\n<p>然后，我们判断出target是在那一段，根据if(target &gt; nums[0])即可判断</p>\n<p>然后就变成了普通的二分搜索。</p>\n<p>书写二分是比较困难的，建议背下来二分模板。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">search</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums.empty()) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r + <span class=\"number\">1</span> &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &gt;= nums[<span class=\"number\">0</span>]) l = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> r = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(target &gt;= nums[<span class=\"number\">0</span>]) l = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> l = r + <span class=\"number\">1</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &gt;= target) r = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(target == nums[r]) <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>使用大于等于还是小于等于，对于本题，由于数字不重复，所以都可以。</p>\n<p>对于二分出…33333…左边和右边的3，就需要区分大于等于和小于等于了。</p>\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"34. 在排序数组中查找元素的第一个和最后一个位置","url":"/2021/01/09/hot-100/34.%E5%9C%A8%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%92%8C%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E4%BD%8D%E7%BD%AE/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>该题是一道模板题，考查了二分模板</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">searchRange</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums.empty()) <span class=\"keyword\">return</span> &#123;<span class=\"number\">-1</span>, <span class=\"number\">-1</span>&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &gt;= target) r = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span>; </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums[l] != target) <span class=\"keyword\">return</span> &#123;<span class=\"number\">-1</span>, <span class=\"number\">-1</span>&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res1 = r;</span><br><span class=\"line\">        l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r + <span class=\"number\">1</span> &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &lt;= target) l = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> r = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;res1,l&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"347. 前 K 个高频元素","url":"/2021/01/18/hot-100/347.%E5%89%8DK%E4%B8%AA%E9%AB%98%E9%A2%91%E5%85%83%E7%B4%A0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>利用哈希表和大根堆</p>\n<p>首先遍历数组，传入哈希表中，哈希表中保存了每个数和它们的个数。</p>\n<p>然后按照个数的多少，将它们传入大根堆中</p>\n<p>取出大根堆的前k个元素即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">topKFrequent</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) hash[x]++;</span><br><span class=\"line\">        <span class=\"built_in\">priority_queue</span>&lt;<span class=\"built_in\">pair</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt;&gt; heap;</span><br><span class=\"line\">        <span class=\"comment\">//默认是大根堆，注意，传入的时候将x.second放在前面，因为堆排序时会按照pair的first元素来排。</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : hash) heap.push(&#123;x.second, x.first&#125;);</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(k--) &#123;</span><br><span class=\"line\">            res.push_back(heap.top().second);</span><br><span class=\"line\">            heap.pop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"4. 寻找两个正序数组的中位数","url":"/2021/01/07/hot-100/4.%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"解法一-暴力解法\"><a href=\"#解法一-暴力解法\" class=\"headerlink\" title=\"解法一    暴力解法\"></a>解法一    暴力解法</h2><p>这种解法非常好想，根据题意就能想出来。我们可以合并数组，然后找出这个新数组的中位数。如何合并呢？我们可以借鉴归并排序的合并，时间复杂度为O(n)，然后找出中位数即可。（如果长度为偶数找出中间两个数的平均值）</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">findMedianSortedArrays</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums1, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; nums3;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(i &lt; nums1.size() &amp;&amp; j &lt; nums2.size())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums1[i] &lt;= nums2[j]) nums3.push_back(nums1[i++]);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> nums3.push_back(nums2[j++]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(i &lt; nums1.size()) nums3.push_back(nums1[i++]);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(j &lt; nums2.size()) nums3.push_back(nums2[j++]);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = nums3.size() / <span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums3.size() % <span class=\"number\">2</span> == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> (nums3[k] + nums3[k - <span class=\"number\">1</span>]) / <span class=\"number\">2.0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nums3[k];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>但是题目中要求的复杂度为O(log (m+n))，看来我们还需要想出更好的解法。</p>\n<h2 id=\"解法二-对解法一的优化\"><a href=\"#解法二-对解法一的优化\" class=\"headerlink\" title=\"解法二    对解法一的优化\"></a>解法二    对解法一的优化</h2><p>在合并数组时，我们是不是已经直到中位数是谁了，只需要在合并时找出第( nums1.size() + nums2.size() ) / 2的数字即可。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">findMedianSortedArrays</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums1, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = (nums1.size() + nums2.size()) / <span class=\"number\">2</span>;        </span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; nums3;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>, cnt = <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(i &lt; nums1.size() &amp;&amp; j &lt; nums2.size())</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums1[i] &lt;= nums2[j]) nums3.push_back(nums1[i++]);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> nums3.push_back(nums2[j++]);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(cnt == k)</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            cnt++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(cnt != k)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(i &lt; nums1.size())</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                nums3.push_back(nums1[i++]);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(cnt == k) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                cnt++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(j &lt; nums2.size())</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                nums3.push_back(nums2[j++]);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(cnt == k) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                cnt++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>((nums1.size() + nums2.size()) % <span class=\"number\">2</span> == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> (nums3[k] + nums3[k - <span class=\"number\">1</span>]) / <span class=\"number\">2.0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> nums3[k];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>这样比解法一稍微快了一些，但是复杂度依旧为O(n)，没有达到题目要求。</p>\n<h2 id=\"解法三\"><a href=\"#解法三\" class=\"headerlink\" title=\"解法三\"></a>解法三</h2><p>为了达到log的复杂度，显然我们不能遍历每个元素，应该使用类似二分的方法。我们分别取数组一的中位数i和数组二的中位数j。</p>\n<p><strong>难度较高，以后再写</strong></p>\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"438. 找到字符串中所有字母异位词","url":"/2021/01/19/hot-100/438.%E6%89%BE%E5%88%B0%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E6%89%80%E6%9C%89%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题考查了哈希表，双指针</p>\n<p>首先将p存进哈希表中</p>\n<p>指针i，j维护着长度为p.size()的区间</p>\n<p>i,j首先从0开始，i每次向前走，将hash[s[i]]的值减1，如果hash[s[i]] == 0,表明该类型字母的数量已经够了</p>\n<p>因为我们只找到p的距离那么长，所以最后cnt（cnt表示使p中某一个字母数量减到0）等于p中字符的类型数量，那么i到j就是p的异位词。</p>\n<p>如果i到j的距离等于p的长度，并且cnt等于p中字符的种类，表明i到j是p的一个字母异位词</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">findAnagrams</span><span class=\"params\">(<span class=\"built_in\">string</span> s, <span class=\"built_in\">string</span> p)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">char</span>, <span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : p) hash[x]++;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> total = hash.size();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>, cnt = <span class=\"number\">0</span>; i &lt; s.size(); i++) &#123;</span><br><span class=\"line\">            hash[s[i]]--;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(hash[s[i]] == <span class=\"number\">0</span>) cnt++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i - j + <span class=\"number\">1</span> == p.size()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(cnt == total) res.push_back(j);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(hash[s[j]] == <span class=\"number\">0</span>) cnt--;                </span><br><span class=\"line\">                hash[s[j]]++;</span><br><span class=\"line\">                j++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"448. 找到所有数组中消失的数字","url":"/2021/01/18/hot-100/448.%E6%89%BE%E5%88%B0%E6%89%80%E6%9C%89%E6%95%B0%E7%BB%84%E4%B8%AD%E6%B6%88%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>用一个新的数组标记数是否出现过，非常简单。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">findDisappearedNumbers</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">t</span><span class=\"params\">(nums.size())</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) t[x - <span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(t[i] == <span class=\"number\">0</span>) res.push_back(i + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>但这样空间复杂度是O(n)</p>\n<p>怎么样能不用额外空间呢？一定是在原数组上修改</p>\n<p>我们把遍历到的数字对应的位置上的数字标记成负数，这样下来，我们就知道哪个数字被标记过了。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">findDisappearedNumbers</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) &#123;</span><br><span class=\"line\">            x = <span class=\"built_in\">abs</span>(x);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[x - <span class=\"number\">1</span>] &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">                nums[x - <span class=\"number\">1</span>] *= <span class=\"number\">-1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[i] &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">                res.push_back(i + <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"46. 全排列","url":"/2021/01/09/hot-100/46.%E5%85%A8%E6%8E%92%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>该题较为简单，一道简单的回溯法dfs问题</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; ans;</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; path;</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt; st;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">permute</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        st = <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt;(nums.size());</span><br><span class=\"line\">        dfs(nums, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> u)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(u == nums.size()) &#123;</span><br><span class=\"line\">            ans.push_back(path);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!st[i]) &#123;</span><br><span class=\"line\">                    st[i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    path.push_back(nums[i]);</span><br><span class=\"line\">                    dfs(nums, u + <span class=\"number\">1</span>);</span><br><span class=\"line\">                    <span class=\"comment\">//恢复现场</span></span><br><span class=\"line\">                    st[i] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    path.pop_back();                    </span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"322. 零钱兑换","url":"/2021/01/17/hot-100/322.%E9%9B%B6%E9%92%B1%E5%85%91%E6%8D%A2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>完全背包问题，有时间我会总结一下背包问题</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">coinChange</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; coins, <span class=\"keyword\">int</span> amount)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//注意不能初始化为INT_MAX，因为可能执行到+1导致爆int</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(amount + <span class=\"number\">1</span>, <span class=\"number\">1e7</span>)</span></span>;</span><br><span class=\"line\">        f[<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; coins.size(); i++) </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = coins[i]; j &lt;= amount; j++)</span><br><span class=\"line\">                f[j] = min(f[j], f[j - coins[i]] + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(f[amount] == <span class=\"number\">1e7</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[amount];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"48. 旋转图像","url":"/2021/01/09/hot-100/48.%E6%97%8B%E8%BD%AC%E5%9B%BE%E5%83%8F/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题刚看上去比较困难，似乎原地变换很难，仔细一想我们可以先将矩阵沿对角线做一次对称，再对列（行）做一次对称即可。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">rotate</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; matrix.size(); i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i; j &lt; matrix.size(); j++)</span><br><span class=\"line\">                swap(matrix[i][j], matrix[j][i]);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; matrix.size(); i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; matrix.size() / <span class=\"number\">2</span>; j++)</span><br><span class=\"line\">                swap(matrix[i][j], matrix[i][matrix.size() - j - <span class=\"number\">1</span>]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"287. 寻找重复数","url":"/2021/01/16/hot-100/287.%E5%AF%BB%E6%89%BE%E9%87%8D%E5%A4%8D%E6%95%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>可以用哈希表来做，时间复杂度为O(n)，空间复杂度为O(n)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">findDuplicate</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_set</span>&lt;<span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(hash.count(x)) <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> hash.insert(x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>如何让空间复杂度达到O(1)呢？</p>\n<p>将数组下标与数组值联系起来</p>\n<p>比如数组下标为 0 1 2 3 4</p>\n<p>里面存的数字为 2 1 3 4 4 </p>\n<p>用链表连起来</p>\n<p>0 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 4</p>\n<p>会出现一个环</p>\n<p>然后用快慢指针判断环的入口</p>\n<p>参照<a href=\"%5Bhttp://zhouruifa.top/2021/01/13/hot-100/142.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8II/%5D(http://zhouruifa.top/2021/01/13/hot-100/142.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8II/)\">142. 环形链表 II</a></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">findDuplicate</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = <span class=\"number\">0</span>, b = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            a = nums[a];</span><br><span class=\"line\">            b = nums[nums[b]];</span><br><span class=\"line\">            <span class=\"comment\">//a，b相遇</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a == b)</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> c = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(c != b) &#123;</span><br><span class=\"line\">            c = nums[c];</span><br><span class=\"line\">            b = nums[b];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"49. 字母异位词分组","url":"/2021/01/09/hot-100/49.%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D%E5%88%86%E7%BB%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>我们可以将字符串排个序，比如 eat 和 eta 都会变成aet</p>\n<p>利用哈希表把排序相同的字符串汇聚在一起</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt;&gt; <span class=\"title\">groupAnagrams</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt;&amp; strs)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_map</span>&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt;&gt; hash;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : strs) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> t = x;</span><br><span class=\"line\">            sort(x.begin(), x.end());</span><br><span class=\"line\">            hash[x].push_back(t);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : hash) res.push_back(x.second);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"5. 最长回文子串","url":"/2021/01/07/hot-100/5.%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"解法一-暴力\"><a href=\"#解法一-暴力\" class=\"headerlink\" title=\"解法一    暴力\"></a>解法一    暴力</h2><p>本题一开始觉得还挺难的，因为要遍历所有子串，然后判断子串是不是回文串。这样暴力做法也是可以的，找出所有子串，然后再判断是不是回文串，复杂度为O(n^3)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isPalindrome</span><span class=\"params\">(<span class=\"built_in\">string</span> &amp; s, <span class=\"keyword\">int</span> i , <span class=\"keyword\">int</span> j)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(i &lt; j)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(s[i] != s[j]) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            i++;</span><br><span class=\"line\">            j--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">longestPalindrome</span><span class=\"params\">(<span class=\"built_in\">string</span> s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> res;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; s.size(); i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i; j &lt; s.size(); j++)</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(res.size() &lt; j - i + <span class=\"number\">1</span> &amp;&amp; isPalindrome(s, i, j) )</span><br><span class=\"line\">                   res =  s.substr(i, j - i + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"解法二-中心扩散\"><a href=\"#解法二-中心扩散\" class=\"headerlink\" title=\"解法二    中心扩散\"></a>解法二    中心扩散</h2><p>仔细想想，我们如何判断一个字串是不是回文串的。回文串有两种类型，长度为奇数和长度为偶数的串。我们遍历每一个字符，并且把该字符当做回文串的中心，然后向两边拓展，找到最长的回文串。</p>\n<p>时间复杂度为O(n^2)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">longestPalindrome</span><span class=\"params\">(<span class=\"built_in\">string</span> s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> res;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; s.size(); i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> l = i - <span class=\"number\">1</span>, r = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(l &gt;= <span class=\"number\">0</span> &amp;&amp; r &lt; s.size() &amp;&amp; s[l] == s[r]) l--, r++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(res.size() &lt; r - l - <span class=\"number\">1</span>) res = s.substr(l + <span class=\"number\">1</span>, r - l - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">            l = i, r = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(l &gt;= <span class=\"number\">0</span> &amp;&amp; r &lt; s.size() &amp;&amp; s[l] == s[r]) l--, r++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(res.size() &lt; r - l - <span class=\"number\">1</span>) res = s.substr(l + <span class=\"number\">1</span>, r - l - <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"287. 寻找重复数","url":"/2021/01/19/hot-100/494.%E7%9B%AE%E6%A0%87%E5%92%8C/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>dfs</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">findTargetSumWays</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> S)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(nums, S, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> S, <span class=\"keyword\">int</span> u, <span class=\"keyword\">int</span> ans)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(u == nums.size())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(ans == S) <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(nums, S, u + <span class=\"number\">1</span>, ans + nums[u]) + dfs(nums, S, u + <span class=\"number\">1</span>, ans - nums[u]);        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"543. 二叉树的直径","url":"/2021/01/19/hot-100/543.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E7%9B%B4%E5%BE%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>dfs函数找出以root为根节点的左右子树中最深的长度</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">diameterOfBinaryTree</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root == <span class=\"literal\">nullptr</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> left = dfs(root-&gt;left), right = dfs(root-&gt;right);</span><br><span class=\"line\">        ans = max(ans, left + right);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> max(left, right) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"338. 比特位计数","url":"/2021/01/17/hot-100/338.%E6%AF%94%E7%89%B9%E4%BD%8D%E8%AE%A1%E6%95%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>比如要求17的二进制中1的个数</p>\n<p>我们写出17的二进制</p>\n<p>10001</p>\n<p>假设一共有k位，我们可以找出前k - 1位的1的数量</p>\n<p>前k - 1的数值就是x &gt;&gt; 1，而x &gt;&gt; 1我们已经求出来了。最后在加上最后一位。</p>\n<p>所以<br>$$<br>f[i] = f[i &gt;&gt; 1] + (i &amp; 1)<br>$$</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">countBits</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(num + <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= num; i++)</span><br><span class=\"line\">            f[i] = f[i &gt;&gt; <span class=\"number\">1</span>] + (i &amp; <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"55. 跳跃游戏","url":"/2021/01/10/hot-100/55.%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8F/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>如果可以跳到$i$，那么$i$之前的数字一定可以跳到。</p>\n<p>如果跳不到$i$，那么$i$后面的数字同样跳不到。</p>\n<p>我们可以找出每个点对应的最大跳跃距离，如果该点的坐标小于此前的最大跳跃距离，则说明该点跳不到。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">canJump</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//j表示最大跳跃距离</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>; i &lt; nums.size(); i++)</span><br><span class=\"line\">        &#123;   </span><br><span class=\"line\">            <span class=\"comment\">//如果当前点的坐标小于此前的最大跳跃距离，则该点无法跳到，那么以后的点同样无法跳到。</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(j &lt; i) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            <span class=\"comment\">//如果该点可以跳到，那么更新一下最大跳跃距离</span></span><br><span class=\"line\">            j = max(j, i + nums[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"56. 合并区间","url":"/2021/01/10/hot-100/56.%E5%90%88%E5%B9%B6%E5%8C%BA%E9%97%B4/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>首先按左端点排序。</p>\n<p>比较两个区间，如果第二个区间的左端点小于等于第一个区间的右端点，表明这两个区间可以合并。否则，不可以合并。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">merge</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; a)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(a.empty()) <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">        <span class=\"comment\">//vector支持排序</span></span><br><span class=\"line\">        sort(a.begin(), a.end());</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = a[<span class=\"number\">0</span>][<span class=\"number\">0</span>], r = a[<span class=\"number\">0</span>][<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; a.size(); i++) &#123;</span><br><span class=\"line\">             <span class=\"keyword\">if</span>(a[i][<span class=\"number\">0</span>] &gt; r) &#123;</span><br><span class=\"line\">                 <span class=\"comment\">//不可以合并，那么将区间添加到结果中</span></span><br><span class=\"line\">                res.push_back(&#123;l, r&#125;);</span><br><span class=\"line\">                 <span class=\"comment\">//更新左右端点</span></span><br><span class=\"line\">                l = a[i][<span class=\"number\">0</span>], r= a[i][<span class=\"number\">1</span>];                </span><br><span class=\"line\">             &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                 <span class=\"comment\">//可以合并，左端点不需要改变，更新右端点，注意需要在原来的右端点和新的右端点中取一个最大值。</span></span><br><span class=\"line\">                 r = max(r, a[i][<span class=\"number\">1</span>]);</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        res.push_back(&#123;l, r&#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"53. 最大子序和","url":"/2021/01/09/hot-100/53.%E6%9C%80%E5%A4%A7%E5%AD%90%E5%BA%8F%E5%92%8C/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>一道简单的动态规划</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxSubArray</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(nums.size())</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">        f[<span class=\"number\">0</span>] = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; nums.size(); i++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            f[i] = max(f[i - <span class=\"number\">1</span>] + nums[i], nums[i]);</span><br><span class=\"line\">            res = max(res, f[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"581. 最短无序连续子数组","url":"/2021/01/20/hot-100/581.%E6%9C%80%E7%9F%AD%E6%97%A0%E5%BA%8F%E8%BF%9E%E7%BB%AD%E5%AD%90%E6%95%B0%E7%BB%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>我们可以将数组排序</p>\n<p>然后将排好序的数组和原数组对比</p>\n<p>两个指针i,j分别指向数组左右两端</p>\n<p>左边指针找到第一个使两个数组元素不等的地方</p>\n<p>右边指针找到第一个使两个数组元素不等的地方</p>\n<p>左右指针中间夹的区域就是最小的数组</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">findUnsortedSubarray</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> temp = nums;</span><br><span class=\"line\">        sort(temp.begin(), temp.end());</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; nums.size() &amp;&amp; nums[l] == temp[l]) l++;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(r &gt; l &amp;&amp; nums[r] == temp[r]) r--;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r - l + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>该做法由于需要排序，所以复杂度是O(nlogn)的</p>\n<p>有没有O(n)的做法呢？</p>\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"538. 把二叉搜索树转换为累加树","url":"/2021/01/20/hot-100/538.%E6%8A%8A%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E8%BD%AC%E6%8D%A2%E4%B8%BA%E7%B4%AF%E5%8A%A0%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>中序遍历二叉搜索树可以得到一个递增的数组</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/tree.png\" alt=\"img\"></p>\n<p>数组为</p>\n<p>[0, 1,2, 3, 4, 5, 6, 7, 8]</p>\n<p>我们发现，转换为累加数其实就是数组的“后缀和”，类似于前缀和</p>\n<p>那么我们只要维护出后缀和就可以了</p>\n<p>由于中序遍历我们可以得到前缀和</p>\n<p>那么反向的中序遍历就可以得到后缀和，只需要在遍历时将left和right换一下就可以了</p>\n<p>参考<a href=\"http://zhouruifa.top/2021/01/12/hot-100/94.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86/\">94. 二叉树的中序遍历</a></p>\n<p>递归写法</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">convertBST</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> root;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root == <span class=\"literal\">nullptr</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        dfs(root-&gt;right);</span><br><span class=\"line\">        root-&gt;val = (res += root-&gt;val);</span><br><span class=\"line\">        dfs(root-&gt;left);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>迭代写法</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">convertBST</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> temp = root;</span><br><span class=\"line\">        <span class=\"built_in\">stack</span>&lt;TreeNode*&gt; stk;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> tot = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(temp || stk.size()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(temp) &#123;</span><br><span class=\"line\">                stk.push(temp);</span><br><span class=\"line\">                temp = temp-&gt;right;                </span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            temp = stk.top();</span><br><span class=\"line\">            stk.pop();</span><br><span class=\"line\">            tot += temp-&gt;val;</span><br><span class=\"line\">            temp-&gt;val = tot;</span><br><span class=\"line\">            temp = temp-&gt;left;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> root;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"617. 合并二叉树","url":"/2021/01/18/hot-100/617.%E5%90%88%E5%B9%B6%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>递归</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">mergeTrees</span><span class=\"params\">(TreeNode* t1, TreeNode* t2)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(t1, t2);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* t1, TreeNode* t2)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!t1 &amp;&amp; !t2) <span class=\"keyword\">return</span> <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(t1 &amp;&amp; t2) t1-&gt;val += t2-&gt;val;</span><br><span class=\"line\">        <span class=\"comment\">//如果t1为空，那么交换t1、t2，因为我要把t2加到t1上，这样我们就不需要再new一个新节点了</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!t1) swap(t1, t2);</span><br><span class=\"line\">        t1-&gt;left = dfs(t1-&gt;left, t2 ? t2-&gt;left : t2);</span><br><span class=\"line\">        t1-&gt;right = dfs(t1-&gt;right, t2 ? t2-&gt;right : t2);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> t1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"64. 最小路径和","url":"/2021/01/10/hot-100/64.%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E5%92%8C/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>动态规划，对于点$(i, j)$，只能从$(i - 1, j)$或$(i, j - 1)$转移过来，取一个较小值即可。</p>\n<p>注意代码怎么写</p>\n<p>注意行列不一定相等</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">minPathSum</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class=\"line\">    \t<span class=\"comment\">//先把列初始化为正无穷，因为我们要取最小值</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">f</span><span class=\"params\">(grid.size(), <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;(grid[<span class=\"number\">0</span>].size(), INT_MAX))</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; grid.size(); i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; grid[<span class=\"number\">0</span>].size(); j++) &#123;</span><br><span class=\"line\">            \t<span class=\"comment\">//这里可以直接写在循环外，f[0][0] = grid[0][0]</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!i &amp;&amp; !j) f[i][j] = grid[i][j]; </span><br><span class=\"line\">                <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(i) f[i][j] = min(f[i][j], f[i - <span class=\"number\">1</span>][j] + grid[i][j]);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(j) f[i][j] = min(f[i][j], f[i][j - <span class=\"number\">1</span>] + grid[i][j]);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[grid.size() - <span class=\"number\">1</span>][grid[<span class=\"number\">0</span>].size() - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"647. 回文子串","url":"/2021/01/19/hot-100/647.%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>与我们之前做的最长回文子串非常相似，大家可以用网站的搜索功能搜索到该题</p>\n<p>还是中心扩散法</p>\n<p>对于回文串，有两种情况，长度为奇数的和长度为偶数的</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">countSubstrings</span><span class=\"params\">(<span class=\"built_in\">string</span> s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; s.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i, k = i; j &gt;= <span class=\"number\">0</span> &amp;&amp; k &lt; s.size(); j--, k++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(s[j] != s[k]) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                res++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i, k = i + <span class=\"number\">1</span>; j &gt;= <span class=\"number\">0</span> &amp;&amp; k &lt; s.size(); j--, k++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(s[j] != s[k]) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                res++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"560. 和为K的子数组","url":"/2021/01/20/hot-100/560.%E5%92%8C%E4%B8%BAK%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>前缀和：数组前k（k从0到数组长度）个数的和</p>\n<p>我们考虑子数组终点j，因此我们可以由前缀和知道从0到j区间的和。我们将该和减去k，就是从起点0到子数组起点的和，这个同样也是前缀和，如果该前缀和存在，那么就找到终点为j对应的起点。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">subarraySum</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> n = nums.size();</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(n + <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) f[i] = f[i - <span class=\"number\">1</span>] + nums[i - <span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//hash[0]要初始化为1，因为0也可能是子数组的起点</span></span><br><span class=\"line\">        hash[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//注意下面两个语句的顺序不能交换，如果k为0的话就会导致多加了一个</span></span><br><span class=\"line\">            res += hash[f[i] - k];</span><br><span class=\"line\">            hash[f[i]]++;            </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"739. 每日温度","url":"/2021/01/19/hot-100/739.%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>单调栈</p>\n<p>栈里面保存下标</p>\n<p>遍历数组，如果数字大于栈顶，那么表明该数字是栈顶元素的下一个最大值</p>\n<p>那么弹出栈顶，然后将栈顶下标的下一个大的数字存入结果数组中</p>\n<p>然后再次判断栈顶是否小于该元素</p>\n<p>直到不小于，将该元素入栈</p>\n<p>单调栈，栈中的元素的单调的，这里，元素是单调递增的</p>\n<p>[73, 74, 75, 71, 69, 72, 76, 73]</p>\n<p>首先73入栈</p>\n<p>然后看74，发现74大于栈顶73，表明73的下一个大的元素是74，因此将它们两个的下标差填入结果数组中（注意栈中保存的是元素的下标）</p>\n<p>res[0] = 1</p>\n<p>stk:74</p>\n<p>然后看75，发现75大于栈顶，那么弹出栈顶，并把栈顶对应的下标与75的下标比较，填入结果数组</p>\n<p>res[1] = 1</p>\n<p>stk: 75</p>\n<p>看71，71小于栈顶，直接入栈</p>\n<p>stk: 75, 71</p>\n<p>看69，直接入栈</p>\n<p>stk: 75, 71, 69</p>\n<p>看72，72大于栈顶，栈顶出栈，并置res数组</p>\n<p>res[4] = 1</p>\n<p>72依然大于栈顶，栈顶71出栈，并置71对应的结果数组</p>\n<p>res[3] = 72的下标减去71的下标 = 2</p>\n<p>72小于栈顶75，入栈</p>\n<p>stk: 75, 72</p>\n<p>看76，大于栈顶72，弹出栈顶</p>\n<p>res[5] = 1</p>\n<p>依旧大于75</p>\n<p>res[2] = 4</p>\n<p>stk: 76</p>\n<p>看73，73小于栈顶，直接入栈</p>\n<p>res[0] = 1, res[1] = 1, res[2] = 4, res[3] = 2, res[4] = 1, res[5] = 1, res[6] = 0, res[7] = 0</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">dailyTemperatures</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; T)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; stk;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">res</span><span class=\"params\">(T.size())</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; T.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(!stk.empty() &amp;&amp; T[i] &gt; T[stk.top()]) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> j = stk.top();</span><br><span class=\"line\">                stk.pop();</span><br><span class=\"line\">                res[j] = i - j;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            stk.push(i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"75. 颜色分类","url":"/2021/01/11/hot-100/75.%E9%A2%9C%E8%89%B2%E5%88%86%E7%B1%BB/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>最简单的做法直接排序就可以了。</p>\n<p>可以先遍历一次把0，1，2的个数求出来，然后再填回数组中。</p>\n<h2 id=\"双指针\"><a href=\"#双指针\" class=\"headerlink\" title=\"双指针\"></a>双指针</h2><p>遍历数组，如果是0则移到左边，如果是2则移到右边。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">sortColors</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt;= r;)</span><br><span class=\"line\">            <span class=\"comment\">//当前指向了0，交换，将i和l指针都加一。注意，l指针一定是在i指针后面的(或与i重合)，所以l的值一定被我们遍历过</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[i] == <span class=\"number\">0</span>) swap(nums[i], nums[l]), i++, l++;</span><br><span class=\"line\">        \t<span class=\"comment\">//如果i指向2，那么交换i和r指向的值。注意，此时i不要动，因为交换过后我们不知道i指向的值是多少，</span></span><br><span class=\"line\">        \t<span class=\"comment\">//因为我们还没遍历到那里。</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(nums[i] == <span class=\"number\">2</span>) swap(nums[i], nums[r]), r--;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> i++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"70. 爬楼梯","url":"/2021/01/11/hot-100/70.%E7%88%AC%E6%A5%BC%E6%A2%AF/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>一道简单的动态规划</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">climbStairs</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n == <span class=\"number\">0</span> || n == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(n + <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">        f[<span class=\"number\">0</span>] = <span class=\"number\">1</span>;f[<span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i++)</span><br><span class=\"line\">            f[i] = f[i - <span class=\"number\">1</span>] + f[i - <span class=\"number\">2</span>];</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[n];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"94. 二叉树的中序遍历","url":"/2021/01/12/hot-100/94.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>递归非常好写，我们想象一个根节点和它的左右子树，我们先遍历左子树，然后把根节点插入结果数组中，然后遍历右子树就可以了。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">inorderTraversal</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root == <span class=\"literal\">nullptr</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        dfs(root-&gt;left);</span><br><span class=\"line\">        res.push_back(root-&gt;val);</span><br><span class=\"line\">        dfs(root-&gt;right);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>迭代写法</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">inorderTraversal</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"built_in\">stack</span>&lt;TreeNode*&gt; stk;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(root || stk.size()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(root) &#123;</span><br><span class=\"line\">                stk.push(root);</span><br><span class=\"line\">                root = root-&gt;left;                </span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            root = stk.top();</span><br><span class=\"line\">            stk.pop();</span><br><span class=\"line\">            res.push_back(root-&gt;val);</span><br><span class=\"line\">            root = root-&gt;right;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"461. 汉明距离","url":"/2021/01/18/hot-100/461.%E6%B1%89%E6%98%8E%E8%B7%9D%E7%A6%BB/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>位运算就可以了</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hammingDistance</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(x || y) &#123;</span><br><span class=\"line\">            res += (x &amp; <span class=\"number\">1</span>) ^ (y &amp; <span class=\"number\">1</span>);</span><br><span class=\"line\">            x &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">            y &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"96. 不同的二叉搜索树","url":"/2021/01/12/hot-100/96.%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>二叉搜索树：其左子树的<strong>所有</strong>节点值均小于根节点，右子树的所有节点值均大于根节点。</p>\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"98. 验证二叉搜索树","url":"/2021/01/12/hot-100/98.%E9%AA%8C%E8%AF%81%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>中序遍历，返回的结果一定是升序数组</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">long</span> old = LONG_MIN;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isValidBST</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(root);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!dfs(root-&gt;left)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root-&gt;val &gt; old) old = root-&gt;val;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(root-&gt;right);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"vim 基础教程1","url":"/2021/01/20/vim/vim1/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>1、hjkl   左下上右</p>\n<p>2、dd 删除一行   d  delete   </p>\n<p>3、yy 复制一行（yank）</p>\n<p>4、p 粘贴（put）</p>\n<p>5、u 撤销（undo）</p>\n<p>6、i 进入输入模式（insert）</p>\n<p>7、esc 退出当前模式</p>\n<p>8、v 进入可视模式，移动光标可以高亮（visual）</p>\n<p>9、shift + V，进入行高亮模式</p>\n<p>10、w 跳到下一个单词开头           dw删除从光标到下一个单词开头的字符   yw复制</p>\n<p>11、b跳到上一个单词开头            db删除从光标到上一个单词开头的字符    yb复制</p>\n","categories":["vim"]},{"title":"vim 基础教程2","url":"/2021/01/20/vim/vim2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>1、o 进入插入模式 并且下方换一新行</p>\n<p>2、shift + O 进入插入模式并在上方新起一行</p>\n<p>3、上节课提到 p 是复制到后方，那么shift  +  P则是复制到前方</p>\n<p>4、a 进入插入模式并且光标向后移动一位</p>\n<p>5、shifit + I 跳到行首进入插入模式</p>\n<p>6、shifit + A跳到行末进入插入模式</p>\n<p>7、/  进入命令模式  搜索</p>\n<p>输入你想搜索的东西 然后按回车</p>\n<p>按n可以跳到下一个搜索项，shift + N跳到上一个搜索项</p>\n<p>8、*搜索光标所在处的单词，并且跳到下一个出现该单词的地方</p>\n<p>9、#搜索光标所在处的单词，并且跳到上一个出现该单词的地方</p>\n","categories":["vim"]},{"title":"5645. 找到最高海拔","url":"/2021/01/24/%E5%8A%9B%E6%89%A3%E5%91%A8%E8%B5%9B/5645.%E6%89%BE%E5%88%B0%E6%9C%80%E9%AB%98%E6%B5%B7%E6%8B%94/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题非常简单，简单模拟一下就可以了</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">largestAltitude</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; gain)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>, t = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; gain.size(); i++) &#123;</span><br><span class=\"line\">            t += gain[i];</span><br><span class=\"line\">            res = max(res, t);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["力扣周赛"]},{"title":"5646. 需要教语言的最少人数","url":"/2021/01/24/%E5%8A%9B%E6%89%A3%E5%91%A8%E8%B5%9B/5646.%E9%9C%80%E8%A6%81%E6%95%99%E8%AF%AD%E8%A8%80%E7%9A%84%E6%9C%80%E5%B0%91%E4%BA%BA%E6%95%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>我们首先用bool数组保存每个人会的语言，方便接下来计算</p>\n<p>然后找出没有共同语言的人，把他们存起来，我们可以用一个set来存，就不会有重复了</p>\n<p>我们可以给没有共同语言的人教一门语言</p>\n<p>比如教语言k，那么需要教多少人呢？</p>\n<p>假设其中由a个人已经会了语言k，那么我们只需要教给k - a个人了</p>\n<p>为了使教的人数最少，那么找出他们会的最多的共同语言就可以了，也就是最大的a</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">minimumTeachings</span><span class=\"params\">(<span class=\"keyword\">int</span> n, <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; l, <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; f)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> m = l.size();<span class=\"comment\">//人数</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt;&gt; <span class=\"title\">g</span><span class=\"params\">(m + <span class=\"number\">1</span>, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt;(n + <span class=\"number\">1</span>))</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= m; i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : l[i - <span class=\"number\">1</span>])</span><br><span class=\"line\">                g[i][x] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"built_in\">set</span>&lt;<span class=\"keyword\">int</span>&gt; p;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; f.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">bool</span> flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">1</span>; j &lt;= n; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(g[f[i][<span class=\"number\">0</span>]][j] &amp;&amp; g[f[i][<span class=\"number\">1</span>]][j])</span><br><span class=\"line\">                    flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!flag) &#123;</span><br><span class=\"line\">                p.insert(f[i][<span class=\"number\">0</span>]);</span><br><span class=\"line\">                p.insert(f[i][<span class=\"number\">1</span>]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : p) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(g[x][i])</span><br><span class=\"line\">                    cnt++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            res = max(res, cnt);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> p.size() - res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["力扣周赛"]},{"title":"5647. 解码异或后的排列","url":"/2021/01/24/%E5%8A%9B%E6%89%A3%E5%91%A8%E8%B5%9B/5647.%E8%A7%A3%E7%A0%81%E5%BC%82%E6%88%96%E5%90%8E%E7%9A%84%E6%8E%92%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>如果我们找到第一个数字，那么就很容易写了</p>\n<p>比如</p>\n<p>encoded = [a, b]</p>\n<p>arr = [x, y, z]</p>\n<p>已知：x ^ y = a</p>\n<p>并且我们知道了x，那么 y = x ^ a = x ^ x ^ y = y</p>\n<h2 id=\"暴力\"><a href=\"#暴力\" class=\"headerlink\" title=\"暴力\"></a>暴力</h2><p>用暴力来写，从1到n遍历第一个数，时间复杂度为O(n ^ 2)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isTrue</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; encoded, <span class=\"keyword\">int</span> f)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">bool</span> flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; encoded.size(); i++) &#123;</span><br><span class=\"line\">            f = f ^ encoded[i];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(f &gt; encoded.size() + <span class=\"number\">1</span> || f &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">decode</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; encoded)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">res</span><span class=\"params\">(encoded.size() + <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= res.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(isTrue(encoded, i)) &#123;</span><br><span class=\"line\">                t = i; </span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        res[<span class=\"number\">0</span>] = t;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; encoded.size(); ++i)&#123;</span><br><span class=\"line\">            res[i +<span class=\"number\">1</span>] = res[i] ^ encoded[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>暴力会超时</p>\n<h2 id=\"解法二\"><a href=\"#解法二\" class=\"headerlink\" title=\"解法二\"></a>解法二</h2><p>根据题目中给的范围</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210124003600826.png\" alt=\"image-20210124003600826\"></p>\n<p>我们可以得出，复杂度最多为O(n log n)</p>\n<p>有没有快速的方法可以确定第一个数字</p>\n<p>知道了第一个数字，那么以后的数字就知道了</p>\n<p>注意题中奇数的条件</p>\n<p>并且数字都是前n</p>\n<p>假设对应的原数组为[a, b, c, d, e, f, g]</p>\n<p>encode[1] ^ encode[3] ^ encode[5]…</p>\n<p>为 b ^ c ^ d ^ e ^ f ^ g</p>\n<p>然后</p>\n<p>我们可以求出a ^ b ^ c ^ d ^e ^ f ^ g,因为数字都是前n的</p>\n<p>然后，把以上两个数字异或，我们就可以得出a，也就是第一个数了</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">decode</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; encoded)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> n = encoded.size();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; n; i += <span class=\"number\">2</span>) t ^= encoded[i];</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n + <span class=\"number\">1</span>; i++) t ^= i;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">res</span><span class=\"params\">(n + <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">        res[<span class=\"number\">0</span>] = t;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) res[i] = res[i - <span class=\"number\">1</span>] ^ encoded[i - <span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["力扣周赛"]},{"title":"78. 子集","url":"/2021/01/11/hot-100/78.%E5%AD%90%E9%9B%86/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"回溯法\"><a href=\"#回溯法\" class=\"headerlink\" title=\"回溯法\"></a>回溯法</h2><p>对于每个元素，有选和不选两种选择。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; path;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">subsets</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        res.push_back(&#123;&#125;);</span><br><span class=\"line\">        dfs(nums, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; nums, <span class=\"keyword\">int</span> u)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(u == nums.size()) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//如果不选</span></span><br><span class=\"line\">            dfs(nums, u + <span class=\"number\">1</span>);</span><br><span class=\"line\">            <span class=\"comment\">//如果选</span></span><br><span class=\"line\">            path.push_back(nums[u]);</span><br><span class=\"line\">            res.push_back(path);</span><br><span class=\"line\">            dfs(nums, u + <span class=\"number\">1</span>);</span><br><span class=\"line\">            path.pop_back();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"位运算\"><a href=\"#位运算\" class=\"headerlink\" title=\"位运算\"></a>位运算</h2><p>如果有三个数，那么有8中选择，我们可以用二进制表示出来 </p>\n<p>000    </p>\n<p>001</p>\n<p>010</p>\n<p>011</p>\n<p>100</p>\n<p>101</p>\n<p>110</p>\n<p>111</p>\n<p>1表示选择该数，0表示不选择。因此我们可以通过迭代的方式找出所有的数。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">subsets</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; (<span class=\"number\">1</span> &lt;&lt; nums.size()); i++) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; path;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; nums.size(); j++) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//判断i的第j位是否为1，如果为true则将nums[j]加入到路径中。</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(i &gt;&gt; j &amp; <span class=\"number\">1</span>) path.push_back(nums[j]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            res.push_back(path);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"5663. 找出第 K 大的异或坐标值","url":"/2021/01/24/%E5%8A%9B%E6%89%A3%E5%91%A8%E8%B5%9B/5663.%E6%89%BE%E5%87%BA%E7%AC%ACK%E5%A4%A7%E7%9A%84%E5%BC%82%E6%88%96%E5%9D%90%E6%A0%87%E5%80%BC/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>$$<br>f[i][j] = f[i - 1][j] 异或 f[i][j - 1] 异或 f[i - 1][j - 1];<br>$$</p>\n<p>把矩阵对应的每一个<strong>值</strong>都求出来即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">kthLargestValue</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; matrix, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; q;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; matrix.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; matrix[<span class=\"number\">0</span>].size(); j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(i) matrix[i][j] ^= matrix[i - <span class=\"number\">1</span>][j];</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(j) matrix[i][j] ^= matrix[i][j - <span class=\"number\">1</span>];</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(i &amp;&amp; j) matrix[i][j] ^= matrix[i - <span class=\"number\">1</span>][j - <span class=\"number\">1</span>];</span><br><span class=\"line\">                q.push_back(matrix[i][j]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//从大到小排序</span></span><br><span class=\"line\">        sort(q.begin(), q.end(), greater&lt;<span class=\"keyword\">int</span>&gt;());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> q[k - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["力扣周赛"]},{"url":"/2021/03/09/%E5%88%B7%E9%9D%A2%E7%BB%8F/1/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、扑克牌洗牌\"><a href=\"#1、扑克牌洗牌\" class=\"headerlink\" title=\"1、扑克牌洗牌\"></a>1、扑克牌洗牌</h3><p>可以抽象理解为等到一个M以内的所有自然数的随机顺序数组</p>\n<p>什么才是好的洗牌算法呢？通常要保证概率相等。即洗牌之后，能够保证每一个数出现在所有位置的概率是相等的</p>\n<p>1、算法一</p>\n<p>​    随机抽出一张牌</p>\n<p>​    检查这种牌是否被抽取过，如果已经抽取过，则重新抽取，直到找到没有被抽取的牌</p>\n<p>​    重复上述过程，直到所有的牌都被抽取到</p>\n<p>两种实现：每次随机抽取后，将抽取的牌拿出来，则此时剩余的牌为N - 1，这种算法避免了重复抽取。但是每抽一次牌后，需要将该牌从数组中删除。</p>\n<p>每次随机抽取后，将抽取的符合要求的牌做好标记，但并不删除。与上种做法相比，省去了删除的操作，但增加了额外的存储标志的空间，同时也导致会抽取已经被标记的牌，需要重新抽取</p>\n<p>这种算法的时间空间复杂度都比较高</p>\n<p>2、算法二</p>\n<p>每次随机抽取两张牌交换，交换一定次数后结束</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">shuffle</span><span class=\"params\">(<span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> len)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> suff_time = len;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; suff_time; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = rand() % len;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = rand() % len;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t = q[a];</span><br><span class=\"line\">        q[a] = q[b];</span><br><span class=\"line\">        q[b] = t;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这是一种常见的洗牌算法。但是如何确定一个合适的交换次数？</p>\n<p>假设交换了m次，则某张牌始终没有被交换的概率为 ((n - 2) / n) ^ m</p>\n<p>我们希望其概率小于某个值，就可以求出交换的次数了</p>\n<p>3、算法三</p>\n<p>每次随机选取一个数，然后将该数与数组中最后（最前）的数交换；然后缩小选取数组的范围，去掉最后的元素，即之前随机抽取出的数。重复上面的过程，直至剩余元素为1.</p>\n<p>将被随机抽到的数放在数组最后面。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">shuffle</span><span class=\"params\">(<span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> len)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = len;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(j--) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t = rand() % (j + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> temp = q[t];</span><br><span class=\"line\">        q[t] = q[j];</span><br><span class=\"line\">        q[j] = temp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、回文数\"><a href=\"#2、回文数\" class=\"headerlink\" title=\"2、回文数\"></a>2、回文数</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> k = n, r = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(k) &#123;</span><br><span class=\"line\">        r = r * <span class=\"number\">10</span> + (k % <span class=\"number\">10</span>);</span><br><span class=\"line\">        k /= <span class=\"number\">10</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(r == n) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;YES&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;NO&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、atoi\"><a href=\"#3、atoi\" class=\"headerlink\" title=\"3、atoi\"></a>3、atoi</h3><p>//使用long long</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;climits&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">string</span> str;</span><br><span class=\"line\">    <span class=\"built_in\">cin</span> &gt;&gt; str;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> pos = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(str[pos] == <span class=\"string\">&#x27; &#x27;</span> || str[pos] == <span class=\"string\">&#x27;\\t&#x27;</span>) pos++;</span><br><span class=\"line\">    <span class=\"comment\">//pos指向的不是空格</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> minus = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(str[pos] == <span class=\"string\">&#x27;-&#x27;</span>) minus = <span class=\"number\">-1</span>, pos++;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(str[pos] == <span class=\"string\">&#x27;+&#x27;</span>) pos++;</span><br><span class=\"line\">    <span class=\"keyword\">long</span> <span class=\"keyword\">long</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(str[pos] &lt;= <span class=\"string\">&#x27;9&#x27;</span> &amp;&amp; str[pos] &gt;= <span class=\"string\">&#x27;0&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> x = str[pos] - <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\">        res = res * <span class=\"number\">10</span> + x;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(minus &gt; <span class=\"number\">0</span> &amp;&amp; res &gt; INT_MAX) <span class=\"built_in\">cout</span> &lt;&lt; INT_MAX, <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(minus &lt; <span class=\"number\">0</span> &amp;&amp; -res &lt; INT_MIN) <span class=\"built_in\">cout</span> &lt;&lt; INT_MIN, <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        pos++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">cout</span> &lt;&lt; res;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>//不使用long long</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;climits&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> str;</span><br><span class=\"line\">    <span class=\"built_in\">cin</span> &gt;&gt; str;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> pos = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(str[pos] == <span class=\"string\">&#x27; &#x27;</span> || str[pos] == <span class=\"string\">&#x27;\\t&#x27;</span>) pos++;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> minus = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(str[pos] == <span class=\"string\">&#x27;-&#x27;</span>) pos++, minus = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(str[pos] == <span class=\"string\">&#x27;+&#x27;</span>) pos++;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(str[pos] &lt;= <span class=\"string\">&#x27;9&#x27;</span> &amp;&amp; str[pos] &gt;= <span class=\"string\">&#x27;0&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> x = str[pos] - <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(minus &gt; <span class=\"number\">0</span> &amp;&amp; res &gt; (INT_MAX - x) / <span class=\"number\">10</span>) <span class=\"keyword\">return</span> INT_MAX;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(minus &lt; <span class=\"number\">0</span> &amp;&amp; -res &lt; (INT_MAX + x) / <span class=\"number\">10</span>) <span class=\"keyword\">return</span> INT_MIN;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(-res * <span class=\"number\">10</span> - x == INT_MIN) <span class=\"keyword\">return</span> INT_MIN; </span><br><span class=\"line\">        res = res * <span class=\"number\">10</span> + x;</span><br><span class=\"line\">        pos++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res * minus;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4、现有1000瓶药，其中有一瓶毒药，喝了之后1小时后才产生效果，现在你有10只老鼠和1个小时的时间，请问怎么找出毒药？\"><a href=\"#4、现有1000瓶药，其中有一瓶毒药，喝了之后1小时后才产生效果，现在你有10只老鼠和1个小时的时间，请问怎么找出毒药？\" class=\"headerlink\" title=\"4、现有1000瓶药，其中有一瓶毒药，喝了之后1小时后才产生效果，现在你有10只老鼠和1个小时的时间，请问怎么找出毒药？\"></a>4、现有1000瓶药，其中有一瓶毒药，喝了之后1小时后才产生效果，现在你有10只老鼠和1个小时的时间，请问怎么找出毒药？</h3><p>首先老鼠要立马把所有药喝完，一小时后肯定有老鼠死亡，要根据死亡老鼠的编号来唯一确定药瓶编号</p>\n<p>对药瓶编号 利用其二进制 1表示让该位的老鼠喝</p>\n<p>比如5号药瓶 101  让第0只老鼠和第2只老鼠喝</p>\n<p>就可以根据死亡的老鼠，查看老鼠的编号，也就是二进制的哪一位为1</p>\n<p>得出第0位和第2位为1，也就是5号药瓶</p>\n<h3 id=\"5、利用rand-5-实现rand-7\"><a href=\"#5、利用rand-5-实现rand-7\" class=\"headerlink\" title=\"5、利用rand 5 实现rand 7\"></a>5、利用rand 5 实现rand 7</h3><p>对于任意的randn（），都可以利用 randn() * n + randn()来扩展随机数范围</p>\n<p>比如rand5  可能生成 0,1,2,3,4</p>\n<p>rand5() * 5 可能生成 0,5,10,15,20</p>\n<p>那么rand5() * 5 + 5可能生成 0,1,2,3,4,5,6,7,8,9,…,24</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">rand7</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = INT_MAX;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(res &gt; <span class=\"number\">6</span>) &#123;</span><br><span class=\"line\">        res = rand5() * <span class=\"number\">5</span> + rand5();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>但是这样出现6以下的概率比较小，浪费资源</p>\n<p>rand25() % 7可以吗？不行，会导致概率不均匀，模7为0的有 0，7，14，21        模7为4的有 4， 11， 18；</p>\n<p>所以应该根据rand25()生成rand21()</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">rand7</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = INT_MAX;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(res &gt; <span class=\"number\">20</span>) &#123;</span><br><span class=\"line\">        res = rand5() * <span class=\"number\">5</span> + rand5();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res % <span class=\"number\">7</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>使用rand7() 实现rand5()</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">rand5</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> res = INT_MAX;</span><br><span class=\"line\">\t<span class=\"keyword\">while</span>(res &gt; <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">\t\tres = rand7();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6、C-编译过程\"><a href=\"#6、C-编译过程\" class=\"headerlink\" title=\"6、C++编译过程\"></a>6、C++编译过程</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//hello.c</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Hello World!&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>1、预处理</p>\n<p>gcc -E hello.c -o hello.i</p>\n<p>将所有#include头文件以及宏定义替换成真正的内容</p>\n<p>hello.c –&gt; hello.i</p>\n<p>生成的.i文件体积会大很多，预处理之后的程序还是文本</p>\n<p>2、编译</p>\n<p>这里的编译不是把预处理文件转到二进制文件的全部过程</p>\n<p>而是将经过预处理之后的程序转换成特定汇编代码的过程</p>\n<p>gcc -S hello.i -o hello.s</p>\n<p>3、汇编</p>\n<p>汇编过程将上一步的汇编代码转换成机器码，产生目标文件，是二进制格式</p>\n<p>gcc汇编过程通过调用as来完成</p>\n<p>as hello.s -o hello.o</p>\n<p>等价于 gcc -c hello.s -o hello.o</p>\n<p>这一步会为每一个源文件产生一个目标文件（.o文件）</p>\n<p>4、链接</p>\n<p>链接过程将多个目标文件以及所需的库文件（.so等）链接成最终的可执行目标文件</p>\n<p>ld hello.o  +  其他目标文件   -o hello.out</p>\n<p>链接可以执行与编译时；也可以执行于加载时；也可以执行于运行时</p>\n<h3 id=\"7、动态链接库\"><a href=\"#7、动态链接库\" class=\"headerlink\" title=\"7、动态链接库\"></a>7、动态链接库</h3><p>静态库和所有的软件一样，需要定期维护和更新。如果程序员想用一个库的最新版本，那么他们必须了解到该库的更新情况，然后显示地将他们的程序与新的库重新连接</p>\n<p>另一个问题是几乎所有的C程序都会使用到printf这种标准io函数。在运行时，这些函数的代码会被复制到每个运行进程的文本段。如果有很多的进程，，这会对系统资源造成浪费。</p>\n<p>共享库，在运行时，可以加载到任意的存储器地址，并在存储器中和一个程序连接起来。</p>\n<p>是为了实现代码的重用，它们都是一些独立的文件</p>\n<p>在unix系统中通常使用.so后缀来表示，微软的操作系统中大量使用了共享库，称为DLL（动态链接库）</p>\n<h3 id=\"8、强弱符号\"><a href=\"#8、强弱符号\" class=\"headerlink\" title=\"8、强弱符号\"></a>8、强弱符号</h3><p>函数和已初始化的全局变量是强符号，未初始化的全局变量是弱符号。</p>\n<p>对于多处定义的符号</p>\n<p>规则1、不允许有多个强符号</p>\n<p>规则2、如果有一个强符号和多个弱符号，那么选择强符号</p>\n<p>规则3、如果有多个弱符号，那么从这些弱符号中任意选择一个</p>\n<p>规则2和规则3的应用会造成一些不易察觉的运行时错误。</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210310113804418.png\" alt=\"image-20210310113804418\"></p>\n<p>double是8个字节，int是4个字节</p>\n<p>由于bar.c中x是弱符号，所以其第6行其实是修改foo.c中的x</p>\n<p>将用负数的双精度浮点表示覆盖存储器中x和y的位置！这是非常难以察觉的错误，尤其是因为它是默默发生的，编译系统不会给出任何警告</p>\n<h3 id=\"9、虚函数实现机制\"><a href=\"#9、虚函数实现机制\" class=\"headerlink\" title=\"9、虚函数实现机制\"></a>9、虚函数实现机制</h3><p>虚函数带来的好处是：可以定义一个基类的指针，指向一个派生类，当通过基类的指针调用函数时，可以在运行时决定该调用函数</p>\n<p>对于一个空类,它的大小为1个字节，因为空类也可以实例化</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span>&#123;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>添加一个整形变量</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span>&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>此时大小为4个字节</p>\n<p>再添加一个函数</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span>&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">p</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>此时大小依然为4个字节</p>\n<p>当拥有一个虚函数</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span>&#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> a;</span><br><span class=\"line\">    <span class=\"function\">vitual <span class=\"keyword\">void</span> <span class=\"title\">fasdf</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>此时大小就变成8个字节了</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210310121756488.png\" alt=\"image-20210310121756488\"></p>\n<p>多了一个变量_vfptr，也就是虚函数表指针</p>\n<p>再看[0]元素，其类型为void*，指向Base::p函数的地址</p>\n<p>如果再添加一个虚函数呢</p>\n<p>大小依然是8</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210310122216848.png\" alt=\"image-20210310122216848\"></p>\n<p>注意到虚函数表多了一个元素</p>\n<p>_vfptr只是一个指针，指向虚函数表（是一个数组）</p>\n<p>并且，该数组没有包含到类定义内部</p>\n<p>我们实例化两个类</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210310122502215.png\" alt=\"image-20210310122502215\"></p>\n<p>会发现它们的_vptr指向同一个虚函数表</p>\n<p>同一个类的不同实例共用一份虚函数表，它们都通过一个虚函数指针指向该虚函数表</p>\n<p>接下俩谈单继承的情况</p>\n<p>本身不存在虚函数</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span>&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> a;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">vfunc1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">vfunc2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derivel</span> :</span> <span class=\"keyword\">public</span> Base &#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> d1;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tBase a, b;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"keyword\">sizeof</span>(a);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210310122922356.png\" alt=\"image-20210310122922356\"></p>\n<p>前面的部分完全就是Base的内容</p>\n<p>派生类重写基类的虚函数</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210310123412350.png\" alt=\"image-20210310123412350\"></p>\n<p>派生类重写了基类的第一个虚函数，所以图中高亮地方变成了Derivel::vfunc1();</p>\n<p>所以不管是Derivel的指针，还是指向Derivel的Base指针，都会调用Derivel::vfunc1()；</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210310123620098.png\" alt=\"image-20210310123620098\"></p>\n<p>派生类新定义一个虚函数</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span>&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> a;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">vfunc1</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">vfunc2</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Derivel</span> :</span> <span class=\"keyword\">public</span> Base &#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> d1;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">vfunc3</span><span class=\"params\">()</span> </span>&#123;&#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tDerivel d;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"keyword\">sizeof</span>(d);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210310124031327.png\"></p>\n<p>竟然没有</p>\n<p>实际上派生类Derivel的虚函数表被加在基类虚函数表的后面</p>\n<p>由于Base只知道自己的两个虚函数索引[0][1], 所以就算在后面加上了[2], Base根本不知情, 不会对她造成任何影响.</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210310124223478.png\" alt=\"image-20210310124223478\"></p>\n"},{"title":"79. 单词搜索","url":"/2021/01/11/hot-100/79.%E5%8D%95%E8%AF%8D%E6%90%9C%E7%B4%A2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本题是一道搜索题</p>\n<p>我们首先找到一个起点，然后根据该起点开始搜索。</p>\n<p>对于每一个点，共有四个搜索方向，上下左右</p>\n<p>题目中要求不能重复搜索一个点，那么其实只有三个搜索方向</p>\n<p>为了简化代码，我们把上一步确定的点用一个符号来表示，这样就不会重复搜索它了</p>\n<p>上下左右方向的简化，其实上下左右可以用(0,-1)、(-1,0)、(1,0)、(0,1)来表示，为了方便，我们用两个数组分别表示x和y的偏移量，这样可以写在一个循环中，避免了冗余的判断。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">exist</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">char</span>&gt;&gt;&amp; board, <span class=\"built_in\">string</span> word)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; board.size(); i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; board[<span class=\"number\">0</span>].size(); j++)</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(dfs(board, word, <span class=\"number\">0</span>, i, j)) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// (0,-1)、(-1,0)、(1,0)、(0,1)</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> dx[<span class=\"number\">4</span>] = &#123;<span class=\"number\">-1</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>&#125;, dy[<span class=\"number\">4</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">char</span>&gt;&gt;&amp; board, <span class=\"built_in\">string</span>&amp; word, <span class=\"keyword\">int</span> u, <span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(board[x][y] != word[u]) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(u == word.size() - <span class=\"number\">1</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">char</span> t = board[x][y];</span><br><span class=\"line\">        board[x][y] = <span class=\"string\">&#x27;.&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> a = x + dx[i], b = y + dy[i];</span><br><span class=\"line\">            <span class=\"comment\">//注意要判断是否越界，比如x为0的点就没有x - 1</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a &lt; <span class=\"number\">0</span> || a &gt;= board.size() || b &lt; <span class=\"number\">0</span> || b &gt;= board[<span class=\"number\">0</span>].size() || board[a][b] == <span class=\"string\">&#x27;.&#x27;</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(dfs(board, word, u + <span class=\"number\">1</span>, a, b)) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//一定要恢复现场</span></span><br><span class=\"line\">        board[x][y] = t;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"62. 不同路径","url":"/2021/01/10/hot-100/62.%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>一道简单的动态规划</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">uniquePaths</span><span class=\"params\">(<span class=\"keyword\">int</span> m, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt; <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; &gt; <span class=\"title\">f</span><span class=\"params\">(m, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;(n))</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; n; j++)</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!i || !j) f[i][j] = <span class=\"number\">1</span>;</span><br><span class=\"line\">                <span class=\"keyword\">else</span> f[i][j] = f[i - <span class=\"number\">1</span>][j] + f[i][j <span class=\"number\">-1</span>];</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[m - <span class=\"number\">1</span>][n - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["HOT-100"]},{"title":"5661. 替换隐藏数字得到的最晚时间","url":"/2021/01/24/%E5%8A%9B%E6%89%A3%E5%91%A8%E8%B5%9B/5661.%E6%9B%BF%E6%8D%A2%E9%9A%90%E8%97%8F%E6%95%B0%E5%AD%97%E5%BE%97%E5%88%B0%E7%9A%84%E6%9C%80%E6%99%9A%E6%97%B6%E9%97%B4/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>if判断即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">maximumTime</span><span class=\"params\">(<span class=\"built_in\">string</span> time)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(time[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;?&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(time[<span class=\"number\">1</span>] == <span class=\"string\">&#x27;?&#x27;</span> || time[<span class=\"number\">1</span>] &lt;= <span class=\"string\">&#x27;3&#x27;</span>) time[<span class=\"number\">0</span>] = <span class=\"string\">&#x27;2&#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> time[<span class=\"number\">0</span>] = <span class=\"string\">&#x27;1&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(time[<span class=\"number\">1</span>] == <span class=\"string\">&#x27;?&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(time[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;2&#x27;</span>) time[<span class=\"number\">1</span>] = <span class=\"string\">&#x27;3&#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> time[<span class=\"number\">1</span>] = <span class=\"string\">&#x27;9&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(time[<span class=\"number\">3</span>] == <span class=\"string\">&#x27;?&#x27;</span>) time[<span class=\"number\">3</span>] = <span class=\"string\">&#x27;5&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(time[<span class=\"number\">4</span>] == <span class=\"string\">&#x27;?&#x27;</span>) time[<span class=\"number\">4</span>] = <span class=\"string\">&#x27;9&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> time;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["力扣周赛"]},{"title":"2021.3.13美团笔试","url":"/2021/03/13/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95/3.13%E7%BE%8E%E5%9B%A2%E7%AC%94%E8%AF%95/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"第一题-转置矩阵\"><a href=\"#第一题-转置矩阵\" class=\"headerlink\" title=\"第一题 转置矩阵\"></a>第一题 转置矩阵</h2><p>输入一个n,m表示矩阵的行和列，接着输入该矩阵</p>\n<p>你要讲该矩阵转置</p>\n<p>1 2 3</p>\n<p>4 5 6</p>\n<p>变成</p>\n<p>1 4</p>\n<p>2 5</p>\n<p>3 6</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N][N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\">    <span class=\"built_in\">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; m; j++)</span><br><span class=\"line\">            <span class=\"built_in\">cin</span> &gt;&gt; q[i][j];</span><br><span class=\"line\">            </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; n; j++)</span><br><span class=\"line\">            <span class=\"built_in\">cout</span> &lt;&lt; q[j][i] &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">    \t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"第二题-从一个仅含有小写字母和数字的字符串中找出所有的数字并从小到大输出\"><a href=\"#第二题-从一个仅含有小写字母和数字的字符串中找出所有的数字并从小到大输出\" class=\"headerlink\" title=\"第二题 从一个仅含有小写字母和数字的字符串中找出所有的数字并从小到大输出\"></a>第二题 从一个仅含有小写字母和数字的字符串中找出所有的数字并从小到大输出</h3><p>比如q1234567891011121314q0000u011，注意要去掉前导0</p>\n<p>输出</p>\n<p>1234567891011121314</p>\n<p>0</p>\n<p>11</p>\n<p>数字可能很大，会爆int，因此用string来存</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;string&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">cmp</span><span class=\"params\">(<span class=\"built_in\">string</span> &amp;a, <span class=\"built_in\">string</span> &amp;b)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(a.size() == b.size()) <span class=\"keyword\">return</span> a &lt; b;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a.size() &lt; b.size();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">string</span> s;</span><br><span class=\"line\">\t<span class=\"built_in\">cin</span> &gt;&gt; s;</span><br><span class=\"line\">\t<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt; res;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; s.size(); i++) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(s[i] &lt;= <span class=\"string\">&#x27;9&#x27;</span> &amp;&amp; s[i] &gt;= <span class=\"string\">&#x27;0&#x27;</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//找到该数字结尾处</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> j = i;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span>(s[j] &lt;= <span class=\"string\">&#x27;9&#x27;</span> &amp;&amp; s[j] &gt;= <span class=\"string\">&#x27;0&#x27;</span>) j++;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//去掉前导0</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> k = i;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span>(k &lt; j - <span class=\"number\">1</span> &amp;&amp; s[k] == <span class=\"string\">&#x27;0&#x27;</span>) k++;</span><br><span class=\"line\">\t\t\tres.push_back(s.substr(k, j - k)); </span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tsort(res.begin(), res.end(), cmp);</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : res) <span class=\"built_in\">cout</span> &lt;&lt; x &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>排序或者这样写lambda</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">sort(res.begin(), res.end(), [](<span class=\"built_in\">string</span> &amp;a, <span class=\"built_in\">string</span> &amp;b)&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(a.size() == b.size()) <span class=\"keyword\">return</span> a &lt; b;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> a.size() &lt; b.size();</span><br><span class=\"line\">\t&#125;);</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"第三题-滑动窗口求众数\"><a href=\"#第三题-滑动窗口求众数\" class=\"headerlink\" title=\"第三题 滑动窗口求众数\"></a>第三题 滑动窗口求众数</h3><p>给定一个数组和一个窗口大小k，求出窗口k中的众数，如果有多个数出现次数相同，那么选择最小的一个</p>\n<p>O(nk)做法会超时</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;unordered_map&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> n, k;</span><br><span class=\"line\">\t<span class=\"built_in\">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">cin</span> &gt;&gt; q[i];</span><br><span class=\"line\">\t<span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt; hash;<span class=\"comment\">//第一个表示数字，第二个表示出现次数 </span></span><br><span class=\"line\">\t<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">\t\thash[q[i]]++;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(i &gt;= k - <span class=\"number\">1</span>) &#123;\t\t\t</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> num, cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : hash) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span>(x.second &gt; cnt) num = x.first, cnt = x.second;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(x.second == cnt) num = min(num, x.first);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tres.push_back(num);</span><br><span class=\"line\">\t\t\thash[q[i - k + <span class=\"number\">1</span>]]--;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : res) <span class=\"built_in\">cout</span> &lt;&lt; x &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这种做法时间复杂度为O(nk)，只过了80%的数据。</p>\n<p>听说可以用优先队列（堆来做）？</p>\n<p>有人用双指针+哈希做出来了</p>\n<h3 id=\"第四题-蚂蚁上树\"><a href=\"#第四题-蚂蚁上树\" class=\"headerlink\" title=\"第四题 蚂蚁上树\"></a>第四题 蚂蚁上树</h3><p>不记得题目了，听有人说是树形DP</p>\n","tags":["笔试"]},{"title":"2021.3.14字节跳动笔试","url":"/2021/03/14/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95/3.14%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E7%AC%94%E8%AF%95/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"第一题-给定一个仅包含0、1的环形数组，1表示坐人了，0表示没坐人，找出一个你可以坐下的位置，要求离人最远。\"><a href=\"#第一题-给定一个仅包含0、1的环形数组，1表示坐人了，0表示没坐人，找出一个你可以坐下的位置，要求离人最远。\" class=\"headerlink\" title=\"第一题 给定一个仅包含0、1的环形数组，1表示坐人了，0表示没坐人，找出一个你可以坐下的位置，要求离人最远。\"></a>第一题 给定一个仅包含0、1的环形数组，1表示坐人了，0表示没坐人，找出一个你可以坐下的位置，要求离人最远。</h3><p>该题比较简单，对于每一个为0的位置，找出它左边的第一个1，和右边的第一个1，取一个最小值。在计算出所有为0的位置的值中取一个最大值，表示离人最远的座位</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">1010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> n;</span><br><span class=\"line\">\t<span class=\"built_in\">cin</span> &gt;&gt; n;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">cin</span> &gt;&gt; q[i];</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(q[i] == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//该位置为0，找出左边最近的1，和右边最近的1，取一个最小值</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//注意是环形排列</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//先找右边的</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> r = i, rc = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span>(q[r % n] == <span class=\"number\">0</span>) r++, rc++;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//再找左边的</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> l = i, lc = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span>(q[(l + n) % n] == <span class=\"number\">0</span>) l--, lc++;</span><br><span class=\"line\">\t\t\tres = max(res, min(lc, rc)); </span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; res;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"第二题-最近共同祖先\"><a href=\"#第二题-最近共同祖先\" class=\"headerlink\" title=\"第二题 最近共同祖先\"></a>第二题 最近共同祖先</h3><p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210314152027584.png\" alt=\"image-20210314152027584\"></p>\n<h3 id=\"第三题-还是一个仅有0和1的环形数组，一环灯泡，按下一个灯泡，灯泡会转换到另一个状态，同时该灯泡左右两边的灯泡也会转换状态。求把灯泡全置为1的最小次数，如果不能使灯泡全为1，则输出-1\"><a href=\"#第三题-还是一个仅有0和1的环形数组，一环灯泡，按下一个灯泡，灯泡会转换到另一个状态，同时该灯泡左右两边的灯泡也会转换状态。求把灯泡全置为1的最小次数，如果不能使灯泡全为1，则输出-1\" class=\"headerlink\" title=\"第三题 还是一个仅有0和1的环形数组，一环灯泡，按下一个灯泡，灯泡会转换到另一个状态，同时该灯泡左右两边的灯泡也会转换状态。求把灯泡全置为1的最小次数，如果不能使灯泡全为1，则输出-1.\"></a>第三题 还是一个仅有0和1的环形数组，一环灯泡，按下一个灯泡，灯泡会转换到另一个状态，同时该灯泡左右两边的灯泡也会转换状态。求把灯泡全置为1的最小次数，如果不能使灯泡全为1，则输出-1.</h3><p>该题看起来没有思路，其实给定数据范围非常小，只有18，因此，直接dfs即可。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">20</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> n;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">judge</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(q[i] != <span class=\"number\">1</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">bool</span> st;</span><br><span class=\"line\"><span class=\"keyword\">int</span> cnt, res = <span class=\"number\">1e6</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"keyword\">int</span> u)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//u表示当前正在操作的u个灯泡，有两种情况，按下或者不按</span></span><br><span class=\"line\">\t<span class=\"comment\">//首先判断是否已经全为1了。</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(judge()) &#123;</span><br><span class=\"line\">\t\tst = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\tres = min(res, cnt);</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(u == n) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//按完了灯泡，返回 </span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">//不按第u个灯泡</span></span><br><span class=\"line\">\tdfs(u + <span class=\"number\">1</span>);</span><br><span class=\"line\">\t<span class=\"comment\">//按下第u个灯泡</span></span><br><span class=\"line\">\tq[u] = !q[u];</span><br><span class=\"line\">\tq[(u + <span class=\"number\">1</span>) % n] = !q[(u + <span class=\"number\">1</span>) % n];</span><br><span class=\"line\">\tq[(u - <span class=\"number\">1</span> + n) % n] = !q[(u - <span class=\"number\">1</span> + n) % n];</span><br><span class=\"line\">\tcnt++;</span><br><span class=\"line\">\tdfs(u + <span class=\"number\">1</span>);</span><br><span class=\"line\">\t<span class=\"comment\">//恢复现场 </span></span><br><span class=\"line\">\tq[u] = !q[u];</span><br><span class=\"line\">\tq[(u + <span class=\"number\">1</span>) % n] = !q[(u + <span class=\"number\">1</span>) % n];</span><br><span class=\"line\">\tq[(u - <span class=\"number\">1</span> + n) % n] = !q[(u - <span class=\"number\">1</span> + n) % n];</span><br><span class=\"line\">\tcnt--;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">cin</span> &gt;&gt; n;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">cin</span> &gt;&gt; q[i];</span><br><span class=\"line\">\tdfs(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(!st) res = <span class=\"number\">-1</span>; </span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; res;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>第四题</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210314152000625.png\" alt=\"image-20210314152000625\"></p>\n<p>会写两道题，其他两道不会写了，我真是蒟蒻</p>\n"},{"title":"C++优先队列","url":"/2021/03/13/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95/C++%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>需要包含头文件#include &lt;queue&gt;</p>\n<p>优先队列具有队列的所有特性，只是在队列基本操作上加了一个内部的排序，本质上是一个堆</p>\n<p>top 访问队头元素</p>\n<p>empty 判断队列是否为空</p>\n<p>size 返回队列中元素个数</p>\n<p>push 在<strong>队尾</strong>插入元素并排序</p>\n<p>emplace 原地构造一个元素并插入队列</p>\n<p>（类似insert，res.insert(“你好”)，会调用一次构造函数，一次拷贝构造函数，一次析构函数，用来释放临时对象。而emplace只需要调用一次构造函数就行了）</p>\n<p>pop 弹出<strong>队头</strong>元素</p>\n<p>priority_queue&lt;int&gt; p 默认是 大根堆</p>\n<p>priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; p小根堆</p>\n"},{"url":"/2021/03/09/%E5%88%B7%E9%9D%A2%E7%BB%8F/2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、C-内存分布，为什么栈比堆快\"><a href=\"#1、C-内存分布，为什么栈比堆快\" class=\"headerlink\" title=\"1、C++内存分布，为什么栈比堆快\"></a>1、C++内存分布，为什么栈比堆快</h3><p>栈区</p>\n<p>堆区</p>\n<p>全局/静态区</p>\n<p>文字常量区</p>\n<p>程序代码区</p>\n<p>1、堆中频繁调用malloc/free，会产生内存碎片，降低程序效率；栈由于其后进先出的特点，不会产生内存碎片</p>\n<p>2、计算机底层对栈提供了一系列支持：分配专门的寄存器存储栈的地址，压栈和入栈由专门的指令。而堆是由c/c++函数库提供的，机制复杂，需要一系列分配内存，合并内存和释放内存的操作，效率较低</p>\n<p>3、由于栈后进先出的特性，对栈数据的定位较快，而堆分配是随机的，定位较慢。</p>\n<h3 id=\"2、C-和C的区别\"><a href=\"#2、C-和C的区别\" class=\"headerlink\" title=\"2、C++和C的区别\"></a>2、C++和C的区别</h3><p>C++面向对象，C面向过程</p>\n<p>最大的区别在于它们解决问题的思想不一样</p>\n<p>C的主要特点是函数，是通过main函数来调用各个子函数。程序运行的顺序由程序员事先定好的</p>\n<p>C++的主要特点是类，由类驱动程序运行。</p>\n<p>C主要用于嵌入式领域，与硬件打交道</p>\n<p>C++可以用于应用层开发、用户界面开发等领域</p>\n<p>C++实际上由四部分组成：兼容C语言的部分 | 面向对象的部分 | 泛型编程，模板 | stl</p>\n<h3 id=\"3、TCP三次握手\"><a href=\"#3、TCP三次握手\" class=\"headerlink\" title=\"3、TCP三次握手\"></a>3、TCP三次握手</h3><p>1、客户端发送连接请求报文段，不携带应用层数据。SYN（同步位）= 1， seq = x（随机）</p>\n<p>2、服务端为该TCP连接分配缓存和变量，并向客户端返回确认报文段，允许连接，不携带应用层数据</p>\n<p>SYN = 1, ack = x + 1, seq = y;</p>\n<p>3、客户端为该TCP分配缓存和变量，并向服务端返回确认的确认，可以携带数据</p>\n<p>SYN = 0，ack = y + 1, seq = x + 1</p>\n<h3 id=\"4、判断一个点是否在矩形内\"><a href=\"#4、判断一个点是否在矩形内\" class=\"headerlink\" title=\"4、判断一个点是否在矩形内\"></a>4、判断一个点是否在矩形内</h3><h3 id=\"5、为什么用栈\"><a href=\"#5、为什么用栈\" class=\"headerlink\" title=\"5、为什么用栈\"></a>5、为什么用栈</h3><p>函数调用用栈来实现</p>\n<p>栈模拟的是嵌套关系</p>\n<p>包括函数的调用，括号匹配</p>\n<p>一切具备嵌套性质的东西，用栈来做是很自然的</p>\n<h3 id=\"6、回文字符串\"><a href=\"#6、回文字符串\" class=\"headerlink\" title=\"6、回文字符串\"></a>6、回文字符串</h3>"},{"url":"/2021/03/10/%E5%88%B7%E9%9D%A2%E7%BB%8F/3/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、extern关键字作用\"><a href=\"#1、extern关键字作用\" class=\"headerlink\" title=\"1、extern关键字作用\"></a>1、extern关键字作用</h3><p>extern是C++引入的一个关键字，它可以应用于一个全局变量，函数或模板<strong>声明</strong></p>\n<p>说明该符号具有外部链接属性。也就是说，这个符号在别处定义，一般而言，C++全局变量的作用范围仅限本文件，但同时C++也支持分离式编译，允许将程序分割为若干个独立文件进行编译。于是就需要在文件间共享数据，这里extern就发挥了作用。</p>\n<p>int i;既是声明又是定义</p>\n<p>extern int i;声明</p>\n<p>extern用在变量或者函数的声明时，用来说明此变量/函数是在别处定义的，要在此处引用。</p>\n<p>函数默认是外部的，因此不需要加extern进行声明，只需函数声明即可。</p>\n<p>extern “C”</p>\n<p>被extern “C”修饰的函数和变量是按照C语言的方式编译链接的。</p>\n<p>1、C++中使用C</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">extern &quot;C&quot;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t#include &quot;cExample.h&quot; &#x2F;&#x2F;C++中使用C的函数和变量</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2、C使用C++，在C++的头文件中添加extern “C”，但是在C语言中不能直接引用声明了extern “C”的该头文件，应该仅将C++中定义的extern “C”函数声明为extern类型，.c文件中使用extern声明C++的函数</p>\n<h3 id=\"2、static\"><a href=\"#2、static\" class=\"headerlink\" title=\"2、static\"></a>2、static</h3><p>在函数内部定义变量，编译器为它在栈上分配空间，当函数结束时就会被释放掉。如果想将函数中此变量的值保存到下一次调用时，如何实现。一种方法是全局变量，但是全局变量破环了该变量的访问范围。static可以很好的解决。</p>\n<p>另外，在C++中，需要将一个数据对象为整个类实现而非某个对象服务，同时又力求不破坏类的封装性，即要求次成员隐藏在类的内部，对外不可见，也可以采用static</p>\n<p>全局（静态存储区）：分为.data和.bss</p>\n<p>data段存放初始化的全局变量和静态变量；bss存放未初始化的全局变量和静态变量。程序运行结束时自动释放。bss段在程序执行之前会被系统自动清0。</p>\n<p>存储在静态数据区的变量会在程序刚开始运行时就完成初始化，也是唯一的一次初始化。</p>\n<p>在C++中static的内部实现机制：静态数据成员要在程序一开始运行时就必须存在。因为函数在程序运行时被调用，所以静态数据成员不能再任何函数内分配空间和初始化。</p>\n<p>1、在修饰变量时,static修饰的静态局部变量只会执行一次初始化，而且延长了局部变量的声明周期，直到程序运行结束后才释放。</p>\n<p>2、static修饰全局变量时，这个全局变量只能在本文件中访问，不能在其他文件中访问，即使是extern外部声明也不可以。</p>\n<p>3、static修饰一个函数，则这个函数只能在本文件中被调用，不能被其他文件调用。</p>\n<p>static修饰的函数叫做静态函数，静态函数有两种，根据其出现的地方来分类。</p>\n<p>如果这个静态函数出现在类里，那么它一定是一个静态成员函数；</p>\n<p>静态成员函数的作用在于：调用这个函数不会访问或修改任何（非static）对象数据成员。</p>\n<p>类的静态成员（变量和方法）属于类本身，在类加载的时候就会分配内存，可以通过类名直接去访问；非静态成员属于类的对象，只有在类实例化一个对象时才会分配内存，然后通过类的对象去访问。</p>\n<p>如果它不是出现在类中，那么它就是一个普通的全局的静态函数。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">用static修饰的函数，限定在本源码文件中</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">因此定义静态函数有以下好处：</span><br><span class=\"line\">　&lt;1&gt; 其他文件中可以定义相同名字的函数，不会发生冲突。</span><br><span class=\"line\">　&lt;2&gt; 静态函数不能被其他文件所用。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、进程间通信\"><a href=\"#3、进程间通信\" class=\"headerlink\" title=\"3、进程间通信\"></a>3、进程间通信</h3><p>进程通信：每个进程各自有不同的用户地址空间，任何一个进程的变量在另一个进程中看不到，所以进程间之间要交换数据必须通过内核，在内核中开辟一块缓冲区，进程A通过缓冲区把数据从用户空间拷贝到内核缓冲区中，进程B再把数据读走。</p>\n<h4 id=\"管道\"><a href=\"#管道\" class=\"headerlink\" title=\"管道\"></a>管道</h4><p>管道是一种半双工的通信方式，数据只能单向流动，而且之能在具有亲缘关系的进程间使用，通常是父子进程。</p>\n<p>1、父进程创建管道 <code>int pip(int fd[2])</code>，得到两个文件描述符指向管道的两端</p>\n<p>fd[0]指向管道的读端，fd[1]指向管道的写端</p>\n<p>2、父进程fork出子进程，子进程也有两个文件描述符指向同一管道</p>\n<p>3、父进程关闭fd[0], 子进程关闭fd[1]，因为管道只支持单向通道</p>\n<h4 id=\"消息队列\"><a href=\"#消息队列\" class=\"headerlink\" title=\"消息队列\"></a>消息队列</h4><p>消息队列是存储在内核中并由消息队列标识符标识的消息的链表，可以传递有类型的数据块</p>\n<p>信号量</p>\n<h4 id=\"共享内存\"><a href=\"#共享内存\" class=\"headerlink\" title=\"共享内存\"></a>共享内存</h4><p>共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问</p>\n<p>管道，和消息队列的问题：如果两个进程要交换消息，那么消息要经过内核；一个进程首先读取消息，然后通过管道发送给，另一个进程通过管道读取消息，</p>\n<p>共享内存让多个程序共享一块内存，速度较快</p>\n<p>套接字</p>\n<h3 id=\"4、fork\"><a href=\"#4、fork\" class=\"headerlink\" title=\"4、fork\"></a>4、fork</h3><p>pid_t fork(void);</p>\n<p>父进程通过调用fork函数创建一个子进程</p>\n<p>新创建的子进程几乎但不完全与父进程相同。子进程得到与父进程用户及虚拟地址空间相同（但是独立的）一份拷贝，包括文本、数据、bss段、堆以及用户栈。子进程还获得与父进程任何打开文件描述符的相同的拷贝（共享文件），这就意味着当父进程调用fork时，子进程可以读写父进程中打开的任何文件。父进程和新创建的子进程之间最大的区别在于它们有不同的pid。</p>\n<p>fork函数只被调用一次，却会返回两次：一次是在调用进程（父进程）中，一次是新创建的子进程中。在父进程中，fork返回子进程的pid。在子进程中，fork返回0。因为子进程的pid总是非0的，返回值就提供一个明确的方法来分辨程序是在父进程中还是在子进程中执行的。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">pid &#x3D; fork();</span><br><span class=\"line\">if(pid &#x3D;&#x3D; 0) &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F;子进程</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">else &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F;父进程</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5、execve\"><a href=\"#5、execve\" class=\"headerlink\" title=\"5、execve\"></a>5、execve</h3><p>execve函数在当前进程上下文中加载并运行一个新进程</p>\n<p>execve调用一次并从不返回</p>\n<h3 id=\"6、shell如何执行程序\"><a href=\"#6、shell如何执行程序\" class=\"headerlink\" title=\"6、shell如何执行程序\"></a>6、shell如何执行程序</h3><p>shell本身是一个程序，在等待我们的输入</p>\n<p>当我们输入一个命令时，shell首先会解析我们的输入，得到argv数组。</p>\n<p>然后判断是否是builtin命令（shell自带的，相当于shell进程的常驻内存的一个函数），如果是，那就执行这个函数</p>\n<p>如果不是，那么首先fork(), 然后execve(),这就在刚才复制的子进程中加载并执行了命令行</p>\n<p>还要判断命令行最后是否有&amp;，表示是否前台任务</p>\n<p>如果加了&amp;，那么shell不等待子进程运行结束。</p>\n<p>注意这样的简陋的shell是由缺陷的，因为它并不回收后台子进程。此时后台子进程是僵尸进程吗？不是，因为父进程没有终止。对于长时间运行的程序，比如shell或者服务器，总是应该回收它们的僵尸子进程。即使僵尸子进程没有运行，它们仍然消耗系统的存储器资源。</p>\n<h3 id=\"7、linux写时拷贝技术copy-on-write\"><a href=\"#7、linux写时拷贝技术copy-on-write\" class=\"headerlink\" title=\"7、linux写时拷贝技术copy on write\"></a>7、linux写时拷贝技术copy on write</h3><p>写时复制技术：内核只为新生成的子进程创建虚拟空间结构，它们来复制于父进程的虚拟空间结构，但是不为这些段分配物理内存，它们共享父进程的物理空间，当父子进程中有更改相应段的行为发生时，再为子进程相应的段分配物理空间。</p>\n<p>在linux程序中，fork()会产生一个和父进程几乎相同的子进程，但子进程在此后大多数会执行execv()加载并运行另外一个程序，比如shell。？？？</p>\n<p>出于效率考虑，linux中引入了写时复制技术，也就是当进程空间的各段的内容要发生变化时，才会将父进程的内容复制一份给子进程</p>\n<p>如果采用了写时复制，子进程的物理空间没有代码，怎么去取指令执行execve系统调用呢？</p>\n<p>在fork()之后execve()之前，两个进程用的时<strong>相同的物理空间</strong>（内存区），子进程的代码段、数据段、堆栈都是指向父进程的物理空间，也就是说，二者的虚拟空间不同，但是对应物理空间是同一个。当<strong>父子进程</strong>中由更改相应段的行为发生时，再为子进程相应段分配物理空间。而如果是因为exec，</p>\n<p>写入时复制，是一种计算机程序设计领域的优化策略。其核心思想是，如果由多个调用者同时请求相同资源，它们会共同获得相同的指针指向相同的资源。直到某个调用者试图修改资源的内容，系统才会真正复制一份专用副本给该调用者。</p>\n<p>C++标准库的std::string类，在C++98/C++03标准中是允许写时复制策略的。但在C++11标准中为了提高并发性取消了这一策略。</p>\n"},{"url":"/2021/03/12/%E5%88%B7%E9%9D%A2%E7%BB%8F/4/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、面向对象\"><a href=\"#1、面向对象\" class=\"headerlink\" title=\"1、面向对象\"></a>1、面向对象</h3><h3 id=\"2、多态是什么\"><a href=\"#2、多态是什么\" class=\"headerlink\" title=\"2、多态是什么\"></a>2、多态是什么</h3><p>多种形态，同一个接口，有不同的实现方式。</p>\n<p>当一个基类指针指向不同的派生类时，调用同样的函数会有不同的效果，这就是多态。</p>\n<p>多态又分为编译时多态和运行时多态</p>\n<p>编译时多态：比如重载</p>\n<p>运行时多态：比如重写</p>\n<h3 id=\"3、确定使用哪种顺序容器\"><a href=\"#3、确定使用哪种顺序容器\" class=\"headerlink\" title=\"3、确定使用哪种顺序容器\"></a>3、确定使用哪种顺序容器</h3><p>通常，使用vector是最好的选择，除非你有更好的理由</p>\n<p>如果你的程序有很多小的元素，且空间的额外开销很重要，则不要使用list或forward_list。</p>\n<p>list(双向链表) forward_list(单向链表)</p>\n<p>list与vector相比，它允许快速的插入和删除，但是随机访问却比较慢</p>\n<h3 id=\"4、vector和list的区别\"><a href=\"#4、vector和list的区别\" class=\"headerlink\" title=\"4、vector和list的区别\"></a>4、vector和list的区别</h3><p>vector和数组类似，拥有一段连续的内存空间，并且起始地址不变</p>\n<p>因此可以高性能的进行随机存取，时间复杂度为O(1)</p>\n<p>但是因为内存是连续的，想要进行插入和删除操作时，会造成内存块的拷贝，时间复杂度为O(n)</p>\n<p>另外，当数组中内存空间不足时，会重新申请一块内存空间并进行内存拷贝。</p>\n<p>list是由双向链表实现的，因此内存空间是不连续的</p>\n<p>只能通过指针访问数据，所以list的随机存取效率低，时间复杂度为O(n)</p>\n<p>由于链表的特点，插入删除效率高</p>\n<h3 id=\"5、vector底层实现\"><a href=\"#5、vector底层实现\" class=\"headerlink\" title=\"5、vector底层实现\"></a>5、vector底层实现</h3><p>vector类似动态数组，当存储的数据达到容量时，就会重新分配内存</p>\n<p>capaticy()操作告诉我们容器在不扩张内存空间的情况下可以容纳多少个元素</p>\n<p>reserve()操作允许我们通知容器它应该准备好保存多少个元素，只有当需求的空间大于当前vector的空间，调用reserve才会有操作。</p>\n<p>向一个vector,string,deque插入元素会使所有指向容器的迭代器、引用和指针失效</p>\n<p>resize()用于扩容</p>\n<p>2被扩容时，下一次扩容的内存总是比之前释放过的内存之和都大，即之前释放过的内存在之后的扩容中都不能被使用</p>\n<p>1.5被扩容时，扩容到一定次数后，就可能利用之前分配的内存了。</p>\n<h3 id=\"6、socket通信流程\"><a href=\"#6、socket通信流程\" class=\"headerlink\" title=\"6、socket通信流程\"></a>6、socket通信流程</h3><p>以TCP为例</p>\n<p>客户端：</p>\n<p>int socket(int af, int type, int protocol) 创建套接字，指明ipv4/ipv6，以及数据传输协议（TCP/UDP）</p>\n<p>int connect(int sock, struct sockaddr * serv_addr, socklen_t addrlen)与服务器连接，填写服务器的ip和端口号</p>\n<p>连接建立好后，使用read和write（windows下使用send和recv）</p>\n<p>服务端：</p>\n<p>创建套接字</p>\n<p>bind()，服务端用bind()函数将套接字与特定ip地址和端口绑定起来，只有这样，流经该ip地址和端口的数据才能交给套接字处理；</p>\n<p>对于服务端程序，使用bind绑定套接字后，还需要使用listen函数让套接字进入被动监听状态</p>\n<p>int listen(int sock, int backlog)</p>\n<p>所谓被动监听，是指当没有客户端请求时，套接字处于睡眠状态，当只有接收到客户端请求时，套接字才会被唤醒来相应请求</p>\n<h4 id=\"请求队列\"><a href=\"#请求队列\" class=\"headerlink\" title=\"请求队列\"></a>请求队列</h4><p>当套接字正在处理客户端请求时，如果如果有新的请求过来，套接字是没法处理的，只能把它放进缓冲区，待当前请求处理完毕后，再从缓冲区读出出来处理。如果不断有新的请求进来，它们就按照先后顺序在缓冲区排队，直到缓冲区满。这个缓冲区，就称为请求队列</p>\n<p>缓冲区的长度可以通过listen函数的backlog参数指定</p>\n<p>注意listen只是让套接字处于监听状态，并没有接收请求。接受请求需要使用accept函数</p>\n<p>accept函数返回一个<strong>新的套接字</strong>来和客户端通信，</p>\n<p>int accept(int sock, struct sockaddr * addr, socklen_t *addrlen)</p>\n<p>参数addr中保存了客户端的ip地址和端口号</p>\n<p>listen函数只是让套接字进入被动监听状态，并没有真正接收客户端请求，listen后面的代码继续执行，直到遇到accept，accept会阻塞程序执行，直到有新的请求到来。</p>\n<p>int shutdown(int sock, int howto);</p>\n<p>sock为需要断开的套接字，howto为断开方式</p>\n<p>断开输入流/断开输出流/同时断开io流，相当于分两次调用shutdown（），一次断开输入流，一次断开输出流。</p>\n<p>close()与shutdown()区别</p>\n<p>shutdown用来关闭连接，而不是套接字，不管调用多少次shutdown，套接字依然存在，直到调用close将套接字从内存中清除</p>\n<p>调用close关闭套接字时，或者调用shutdown关闭输出流时，都会向对方发送FIN包，FIN包表明数据传输完毕，计算机收到FIN包就知道不会再有数据传送过来了</p>\n<p>调用close时，不管输出缓冲区是否还有数据，立刻发送FIN包，因为close会关闭套接字，以后就不可能收发数据了。</p>\n<p>而调用shutdown，会等到输出缓冲区数据发送完毕后，再发送FIN包。</p>\n<h3 id=\"7、同步和异步的区别\"><a href=\"#7、同步和异步的区别\" class=\"headerlink\" title=\"7、同步和异步的区别\"></a>7、同步和异步的区别</h3><p>同步：按照任务的顺序执行任务，前一个任务没有执行结束，下一个任务不会执行，要等待上一个任务执行结束</p>\n<p>异步：是指同一时间内可以做多事</p>\n<p>同步按顺序执行，异步无序执行</p>\n<p>比如一个程序正在等待我输入，那么此时CPU空闲，该线程就阻塞了。而程序完全可以去干其他事，直到我输入完成，再来处理。</p>\n<p>异步IO，协程</p>\n<h3 id=\"8、IO模型\"><a href=\"#8、IO模型\" class=\"headerlink\" title=\"8、IO模型\"></a>8、IO模型</h3><h4 id=\"同步阻塞IO\"><a href=\"#同步阻塞IO\" class=\"headerlink\" title=\"同步阻塞IO\"></a>同步阻塞IO</h4><p>用户进程进行系统调用，进程阻塞，内核开始了IO的第一个阶段，准备数据到缓冲区中，当数据准备完毕后，将数据从内核缓冲区复制到用户进程的内存中，此时进程接触阻塞状态重新运行。</p>\n<p>同步阻塞IO是在IO执行的两个阶段都被阻塞了。</p>\n<h4 id=\"同步非阻塞IO\"><a href=\"#同步非阻塞IO\" class=\"headerlink\" title=\"同步非阻塞IO\"></a>同步非阻塞IO</h4><p>用户进程只有在第二个阶段被阻塞了，第一个阶段（数据复制）没有阻塞，但是在第一个阶段中，用户进程需要忙等，不停的询问内核，数据是否准备好了</p>\n<h4 id=\"多路复用IO\"><a href=\"#多路复用IO\" class=\"headerlink\" title=\"多路复用IO\"></a>多路复用IO</h4>"},{"url":"/2021/03/04/C++%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、内存溢出和内存泄漏的区别\"><a href=\"#1、内存溢出和内存泄漏的区别\" class=\"headerlink\" title=\"1、内存溢出和内存泄漏的区别\"></a>1、内存溢出和内存泄漏的区别</h3><p>内存溢出 out of memory，就是内存不够用了。程序在申请内存时，没有足够的内存空间供其使用，</p>\n<p>内存泄漏是一件严重的问题，当你申请了一块内存，在使用完后却没有释放它，可能是你忘记delete了，或者你没有保存空间的地址。导致操作系统不会回收，你也无法使用的局面。内存泄漏有时难以察觉，记得老师上课讲过例子，当时他们团队开发的项目运行几个星期就死机了，得重启一次，大概率是碰到了内存泄漏。然后内存泄漏又难以调试，不知道哪里出了问题，这也是c++的难点之一，程序员需要自己管理内存，但很容易出现问题。所以c++11推出了智能指针，用来减少内存泄漏的问题。</p>\n<p>我在做项目时也遇到过一次内存泄露的问题。当时是使用sqlite，调用了sqlite3_get_table函数，该函数用来获得查询的内容。后来发现内存每分钟都在增加，我知道是内存泄漏但不知道在哪，找了很长时间。后来才知道原来在sqlite3_get_table函数内部使用malloc分配空间了，我需要调用sqlite3_free_table()才能释放掉这块内存。现在也有检查内存泄漏的工具，方便程序员调试。</p>\n<p>一但内存泄漏到一定程度，系统内存就小到无法执行程序了，导致内存溢出，程序崩溃。</p>\n<h2 id=\"2、进程与线程的区别\"><a href=\"#2、进程与线程的区别\" class=\"headerlink\" title=\"2、进程与线程的区别\"></a>2、进程与线程的区别</h2><p>进程是资源分配的最小单位，线程是CPU调度的最小单位</p>\n<p>进程：正在执行中的程序</p>\n<p>进程像一列火车，线程则是车厢，一个线程只能属于一个进程，而一个进程可以有多个线程</p>\n<p>线程之间实现共享资源非常方便，但是进程间通信就比较麻烦了。</p>\n<p>进程有独立的地址空间，线程没有，线程只包含一个堆栈和寄存器等</p>\n<p>两个线程能否修改对方的堆栈呢，虽然我们没有这样做的意义，但是实际上是可以的，只要传递一个指向堆栈变量的指针。</p>\n<h3 id=\"3、进程间通信IPC-Interprocess-communication\"><a href=\"#3、进程间通信IPC-Interprocess-communication\" class=\"headerlink\" title=\"3、进程间通信IPC Interprocess communication\"></a>3、进程间通信IPC Interprocess communication</h3><p>管道：半双工通信方法，数据只能单方向流动</p>\n<p>消息队列：比管道更加高级，可以传递一个数据块，每个数据块都含有类型</p>\n<p>共享内存：开辟一段能够被其他进程访问的内存。由一个进程创建，多个进程可以访问。我以前做过共享内存的实验，在linux系统中，使用了一些系统调用。</p>\n<h3 id=\"4、自旋锁（spinlock）\"><a href=\"#4、自旋锁（spinlock）\" class=\"headerlink\" title=\"4、自旋锁（spinlock）\"></a>4、自旋锁（spinlock）</h3><p>一个线程想要获得锁，但该锁被其他线程占有，那么该线程会循环等待，不断的判断是否能成功获得锁，直到获得锁才退出循环。该进程在不断的判断是否能获得锁，却没有进行任何有效的任务，这种现象称为忙等待</p>\n<h3 id=\"5、递归和迭代有啥区别\"><a href=\"#5、递归和迭代有啥区别\" class=\"headerlink\" title=\"5、递归和迭代有啥区别\"></a>5、递归和迭代有啥区别</h3><p>递归：函数自己调用自己，每次调用会增加一层栈帧，每次函数返回会减少一层栈帧。栈的大小是有限的，一般为8MB左右，在linux下是可以修改的。</p>\n<p>尾递归：如果一个函数中所有递归形式的调用都出现在函数的末尾。普通递归会不断创建栈帧然后收缩，尾递归只占用恒定的内存（与迭代一致）。c语言是会对尾递归做优化的（编译器处理生成中间代码时，会进行优化），也就是只有一层栈帧。但java，python并不进行优化</p>\n<p>迭代：将输入作为输出，再次进行处理 for(int i = 0; i &lt; 100; i++) n = f(n);</p>\n<h3 id=\"6、什么是阻塞\"><a href=\"#6、什么是阻塞\" class=\"headerlink\" title=\"6、什么是阻塞\"></a>6、什么是阻塞</h3><p>打电话一直等到有人接为止</p>\n<p>以前用写项目用到socket，socket默认是阻塞的，也就是程序会一直卡在这里直到收到消息。当时我们为了不使程序卡住，就采用了非阻塞的socket，当调用receive函数时，如果缓冲区里面没有东西的话立刻返回，这样程序就不会卡住了。</p>\n<h3 id=\"7、vector对象是如何增长的\"><a href=\"#7、vector对象是如何增长的\" class=\"headerlink\" title=\"7、vector对象是如何增长的\"></a>7、vector对象是如何增长的</h3><p>为了支持快速随机访问，vector将元素连续存储。当我们想要插入一个新的元素是，vector如果只是简单的为我们开辟一个元素大小的空间，那么性能就会非常差，我们知道分配一次内存是及其消耗时间的。</p>\n<p>vector的扩容机制不同编译器实现不一样，常用的有2倍和1.5倍。实际效率较高</p>\n<p>注意、分配内存是重新分配所有内存，比如之前内存为1M， 那么要分配的内存为2M，然后将1M的数据移动过来</p>\n<p>使用2倍（k=2）扩容机制扩容时，每次扩容后的新内存大小必定大于前面的总和，之前的内存不可能被使用</p>\n<p>如果前面分配的内存是连续分配的，由于新内存的大小要大于前面分配内存之和，所以无法使用之前的内存了</p>\n<p>而使用1.5倍（k=1.5)扩容时，在几次扩展以后，可以重用之前的内存空间了。</p>\n<p>1    1.5    2.25 假设内存是连续分配的，那么2.25就可以实现内存的重用 </p>\n<h3 id=\"8、内联函数\"><a href=\"#8、内联函数\" class=\"headerlink\" title=\"8、内联函数\"></a>8、内联函数</h3><p>为了解决一些频繁调用的<strong>小函数</strong>大量消耗栈内存的问题，特别的引入了 <strong>inline</strong> 修饰符，表示为内联函数。</p>\n<p>栈空间就是指放置程序的局部数据（也就是函数内数据）的内存空间。</p>\n<p>inline只是函数对编译器的一个建议，编译器并不一定认为它是内联函数</p>\n<p>定义在类中的成员函数默认是内联的</p>\n<p>关键字 <strong>inline</strong> 必须与函数定义体放在一起才能使函数成为内联，仅将 <strong>inline</strong> 放在函数声明前面不起任何作用。是一种由于实现（函数实现，而非函数声明）的关键字</p>\n<h3 id=\"9、new和malloc的区别\"><a href=\"#9、new和malloc的区别\" class=\"headerlink\" title=\"9、new和malloc的区别\"></a>9、new和malloc的区别</h3><p>new/delete是c++的关键字，malloc/free是库函数</p>\n<p>使用new时无须指明内存块的大小，编译器会根据类型自动推断，malloc需要显示指明所需内存的大小</p>\n<p>new操作符内存分配成功时，返回的是对象类型的指针，无需进行类型转换。而malloc返回的是void*，需要通过强制类型转换将void*转换为我们需要的类型</p>\n<p>new分配失败时，会抛出bad_alloc异常。malloc分配失败时返回NULL</p>\n<p>对于自定义类型，new会先调用operator new函数，申请足够的内存（通常底层通过malloc实现），然后调用类型的构造函数，初始化成员变量，最后返回该类型的指针。delete先调用析构函数，然后调用operator delete函数释放内存（通常底层使用free实现）。malloc/free是库函数，只能动态的申请和释放内存，无法要求其做自定义类型的对象构造和析构方法。</p>\n<p>new在自由存储区上分配内存</p>\n<p>每个编译器实现的new/delete可能不一样。delete关键字编译时会被分为两步：调用析构函数、调用operator delete。析构函数不会释放内存！operator delete才会。</p>\n<p>new不是运算符，operator new可以重载</p>\n<p>new/delete底层一般是用malloc/free实现的</p>\n<h3 id=\"10、析构函数\"><a href=\"#10、析构函数\" class=\"headerlink\" title=\"10、析构函数\"></a>10、析构函数</h3><p>析构函数不负责释放自己（析构函数不会释放当前对象所在的内存，但是需要释放成员变量申请的内存）</p>\n<h3 id=\"11、悬垂指针\"><a href=\"#11、悬垂指针\" class=\"headerlink\" title=\"11、悬垂指针\"></a>11、悬垂指针</h3><p>当从内存中删除一个对象或者一个函数返回时，指针的值并没有改变，依然指向先前内存的位置</p>\n<h3 id=\"12、野指针\"><a href=\"#12、野指针\" class=\"headerlink\" title=\"12、野指针\"></a>12、野指针</h3><p>野指针：访问一个已销毁或者访问受限的内存区域的指针，野指针不能判断是否为NULL来避免<br>垂悬指针：指针正常初始化，曾指向一个对象，该对象被销毁了，但是指针未制空，那么就成了悬空指针。</p>\n<p>产生原因：定义时为初始化，指针操作引起越界</p>\n<h3 id=\"13、段错误\"><a href=\"#13、段错误\" class=\"headerlink\" title=\"13、段错误\"></a>13、段错误</h3><p>当程序试图访问不允许访问的内存位置，或试图以不允许的方式访问内存位置（例如尝试写入只读位置，或覆盖部分操作系统）时会发生段错误。</p>\n<p>访问受系统保护的内存地址</p>\n<p>写入只读的内存地址</p>\n<p>数组越界</p>\n<p>堆栈溢出</p>\n<h3 id=\"14、逻辑运算符优先级\"><a href=\"#14、逻辑运算符优先级\" class=\"headerlink\" title=\"14、逻辑运算符优先级\"></a>14、逻辑运算符优先级</h3><p>! &gt; || &gt; &amp;&amp;</p>\n<p>false || ture &amp;&amp; true结果为true</p>\n<h3 id=\"15、C-三大特性\"><a href=\"#15、C-三大特性\" class=\"headerlink\" title=\"15、C++三大特性\"></a>15、C++三大特性</h3><p>1、封装。隐藏对象的属性和实现细节，只对外部提供接口和方法。</p>\n<p>2、继承：一个对象直接使用另一个对象的属性和方法</p>\n<p>​    优点：减少重复代码。继承是多态的前提。</p>\n<p>3、多态：一个接口，多种方法。使用同一个接口，但是效果不同</p>\n<p>​    动态多态：程序运行时才能确定链接哪一个函数，通过虚函数实现。基类存在一些接口，要求子类重写这些接口。通过基类指针调用虚函数，实际上会调用子类重写的虚函数（基类指针指向子类）</p>\n<p>比如 Base * b;   Child a()； b = &a;</p>\n<p>虚函数是在基类中使用关键字virtual声明的函数。在派生类中重新定义基类的虚函数时，会告诉编译器不要静态链接到该函数。</p>\n<p>要实现多态必须  1、继承  2、子类重写父类方法  3、父类引用子类对象</p>\n<h3 id=\"16、重载与重写\"><a href=\"#16、重载与重写\" class=\"headerlink\" title=\"16、重载与重写\"></a>16、重载与重写</h3><p>重载(overload)：写一个与已有函数同名但参数表不同的函数</p>\n<p>重写(override)：虚函数在派生类中被改写</p>\n<h3 id=\"17、析构函数\"><a href=\"#17、析构函数\" class=\"headerlink\" title=\"17、析构函数\"></a>17、析构函数</h3><p>名字与类名相同，但是要在前面添加~，没有参数和返回值。</p>\n<p>一个类有且仅有一个析构函数。如果定义类是没有定义析构函数，编译器会自动生成默认析构函数</p>\n<p>析构函数在对象消亡时被自动调用。所以可以定义析构函数在对象消亡前完成善后工作。比如用new分配了内存，那么就可以在析构函数中统一delete。</p>\n<h3 id=\"18、C-内存分布\"><a href=\"#18、C-内存分布\" class=\"headerlink\" title=\"18、C++内存分布\"></a>18、C++内存分布</h3><p>栈区</p>\n<p>堆区</p>\n<p>全局/静态区</p>\n<p>文字常量区</p>\n<p>程序代码区</p>\n<p>1、栈内存  ：  由编译器自动分配释放，存储函数的参数值，局部变量值等。程序员无法控制</p>\n<p>const局部变量也存储在栈区，栈区向地址减小的方向增长</p>\n<p>2、堆内存：程序员向操作系统申请一片内存，应该是由操作系统决定分配策略（首次适应，最差适应）。</p>\n<p>3、全局/静态区：全局变量和静态变量是存储在一起的，在程序编译时分配</p>\n<p>4、文字常量区：存储常量字符串</p>\n<p>5、程序代码区：存储函数体的二进制代码</p>\n<h3 id=\"19、map和unordered-map优点和缺点\"><a href=\"#19、map和unordered-map优点和缺点\" class=\"headerlink\" title=\"19、map和unordered_map优点和缺点\"></a>19、map和unordered_map优点和缺点</h3><p>map：底层是基于红黑树实现的。有序性，是map最大的优点</p>\n<p>map的查加、删除等一系列操作时间复杂度稳定 都为logn</p>\n<p>缺点：查找、删除速度较慢、map占用空间较大</p>\n<p>unordered_map：底层是哈希表</p>\n<p>查找效率很高，可达O(1)</p>\n<p>哈希表的建立比较费时，数据无序</p>\n<p>对于查找问题，unordered_map会更加高效一些</p>\n<h3 id=\"20、迭代器\"><a href=\"#20、迭代器\" class=\"headerlink\" title=\"20、迭代器\"></a>20、迭代器</h3><p>要访问顺序容器和关联容器中的元素，需要通过迭代器iterator进行。</p>\n<p>正向迭代器 vector&lt;int&gt; ::iterator iter;</p>\n<p>正向常量迭代器vector&lt;int&gt; ::const_iterator iter;</p>\n<p>反向迭代器 vector&lt;int&gt; ::const_reverse_iterator iter;</p>\n<p>迭代器不是指针，是类模板，表现的像指针。通过重载了指针的一些操作符 -&gt;  *  ++   –等封装成了指针，是一个可以遍历stl容器内全部元素或部分元素的对象。</p>\n<p>迭代器返回的是对象引用而不是对象的值</p>\n<h3 id=\"21、构造函数\"><a href=\"#21、构造函数\" class=\"headerlink\" title=\"21、构造函数\"></a>21、构造函数</h3><p>类的构造函数是一种特殊的成员函数，它会在每次创建类的新对象时被执行</p>\n<p>名称与类名完全相同，不会返回任何类型</p>\n<p>构造函数不能不能被声明为const的</p>\n<p>如果定义变量时没有指定初值，则变量被默认初始化，它的值由定义的位置决定。定义在任何函数体之外的变量被初始化为0.一种例外情况是，定义在函数体内部的内置类型（int, long char, short等基本类型）将不被初始化。一个未被初始化的内置类型变量的值是未定义的。</p>\n<p>Student(string &amp; s) : bookNo(s) {  }，该列表不限定初始化的具体执行顺序</p>\n<p><strong>成员初始化的顺序与它们在类定义中的出现顺序一致</strong>。</p>\n<p>构造函数初始值列表，如果某个数据成员被忽略时，那么它将隐式初始化（默认初始化）</p>\n<p>如果没有定义构造函数，类会通过默认构造函数进行初始化。又叫合成的默认构造函数</p>\n<h3 id=\"22、指针和引用的区别\"><a href=\"#22、指针和引用的区别\" class=\"headerlink\" title=\"22、指针和引用的区别\"></a>22、指针和引用的区别</h3><p>指针是一个变量，只不过这个变量存的是一个地址</p>\n<p>引用是别名（绰号），对引用的任何操作都是对被引用对象的操作，既不是拷贝，也不是指针，而是源对象自己。引用没有空间</p>\n<p>引用定义时必须初始化，引用不能为空</p>\n<p>sizeof(引用)计算的是原对象的大小，size(指针)计算的是指针本身的大小</p>\n<h3 id=\"23、指针的大小\"><a href=\"#23、指针的大小\" class=\"headerlink\" title=\"23、指针的大小\"></a>23、指针的大小</h3><ol>\n<li><p>cpu位数（32位数4字节，64位数8字节）</p>\n</li>\n<li><p>操作系统位数（32位数4字节，64位数8字节）</p>\n</li>\n<li><p>编译器的位数（32位数4字节，64位数8字节）</p>\n<p> 当上述三种位数不同时，取最小的位数</p>\n</li>\n</ol>\n<h3 id=\"24、数组指针\"><a href=\"#24、数组指针\" class=\"headerlink\" title=\"24、数组指针\"></a>24、数组指针</h3><p>指向数组的指针</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a[<span class=\"number\">4</span>][<span class=\"number\">5</span>];</span><br><span class=\"line\"><span class=\"keyword\">int</span> (*p)[<span class=\"number\">5</span>] = a;</span><br></pre></td></tr></table></figure>\n\n<p>p是一个指针变量，它指向包含5个int元素的一维数组，此时p的增量以它所指向的一维数组长度为单位。</p>\n<p>a[1]表示第二行数组的首地址</p>\n<p>*(p+1)表示a[1][0]的地址</p>\n<p>*(p+2) + 3表示a[2][3]的地址</p>\n<p>*（*(p+2) + 3）表示a[2][3]的值</p>\n<h3 id=\"25、gets\"><a href=\"#25、gets\" class=\"headerlink\" title=\"25、gets\"></a>25、gets</h3><p>gets函数是读取字符串，以回车键结束</p>\n<p>fgets是读取一行字符，以换行符结束</p>\n<p>getc读入一个字符</p>\n<p>fgetc读入一个字符，读取一个字节后光标位置后移一位</p>\n<p>带f的是通过函数实现的，不带f的是通过宏定义实现的</p>\n<h3 id=\"26、-o是八进制\"><a href=\"#26、-o是八进制\" class=\"headerlink\" title=\"26、%o是八进制\"></a>26、%o是八进制</h3><h3 id=\"27、转义字符\"><a href=\"#27、转义字符\" class=\"headerlink\" title=\"27、转义字符\"></a>27、转义字符</h3><p>转义字符以<code>\\</code>或者<code>\\x</code>开头，以<code>\\</code>开头表示后跟八进制形式的编码值，以<code>\\x</code>开头表示后跟十六进制形式的编码值。对于转义字符来说，只能使用八进制或者十六进制。</p>\n<p>\\0到\\31是控制字符，负责控制不输出</p>\n<p>\\32到\\127是打印字符，\\开头以八进制匹配，\\x以十六进制匹配</p>\n<h3 id=\"28、set底层实现方式\"><a href=\"#28、set底层实现方式\" class=\"headerlink\" title=\"28、set底层实现方式\"></a>28、set底层实现方式</h3><p>红黑树，不像map那样是key-value对，set的key和value是相同的</p>\n<h3 id=\"29、vector怎么实现的\"><a href=\"#29、vector怎么实现的\" class=\"headerlink\" title=\"29、vector怎么实现的\"></a>29、vector怎么实现的</h3><p>vector通过一个连续的数组存放元素，如果集合已满，在新增数据的时候，就要分配一块更大的内存，将原来的数据复制过来，释放之前的内存。</p>\n<h3 id=\"30、虚函数实现\"><a href=\"#30、虚函数实现\" class=\"headerlink\" title=\"30、虚函数实现\"></a>30、虚函数实现</h3><p>C++中的虚函数的作用主要是实现了多态的机制。关于多态，简而言之就是用父类型别的指针指向其子类的实例，然后通过父类的指针调用实际子类的成员函数。这种技术可以让父类的指针有多种形态。</p>\n<h3 id=\"31、delete和delete-的区别\"><a href=\"#31、delete和delete-的区别\" class=\"headerlink\" title=\"31、delete和delete[]的区别\"></a>31、delete和delete[]的区别</h3><p>使用new申请的内存，释放时用delete，使用new[]申请的内存，释放用delete[]</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> *a = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"keyword\">delete</span> a;</span><br><span class=\"line\"><span class=\"keyword\">delete</span> [] a;</span><br></pre></td></tr></table></figure>\n\n<p>很多人认为方法一会造成内存泄漏，然而事实是不会。针对简单的数据结构，方法一和方法二均可正常工作。因为基本的数据类型对象没有析构函数，并且new在分配内存时会记录分配的空间大小，而delete是能正确释放内存，无须调用析构函数释放其余指针，两种方式均可。</p>\n<p><strong>自定义数据类型</strong>，这里一般指类。假设通过new申请了一个<strong>对象数组</strong>，返回一个指针。那么当释放此对象数组的内存时，需要做两件事：一是释放最初申请的那部分空间，二是调用析构函数完成清理工作。对于第一件事，由于new记录了申请时的大小，用delete和delete[]都可以将其正确释放。但是对于第二件事，当使用delete时，只会调用对象数组中的第一个对象的析构函数，而使用delete[]的话，则会逐个调用析构函数。</p>\n<h3 id=\"32、vector和list的区别\"><a href=\"#32、vector和list的区别\" class=\"headerlink\" title=\"32、vector和list的区别\"></a>32、vector和list的区别</h3><p>list容器的工能和数据结构中的双向链表极为相似</p>\n<p>list允许快速的插入和删除，但是随机存取的效率很低，O(n)</p>\n<p>vector和数组类似，有一段连续的存储空间，因此可以高效随机访问。但是由于其内存空间是连续的，所以在进行插入和删除操作时，复杂度为O(n)。另外，当数组内存空间不够时，需要再申请一块空间，然后将原来空间的数组复制过来。</p>\n<h3 id=\"33、class与struct的区别\"><a href=\"#33、class与struct的区别\" class=\"headerlink\" title=\"33、class与struct的区别\"></a>33、class与struct的区别</h3><p>成员的默认访问权限：class默认是private，struct默认是public</p>\n<p>默认继承权限：如果不指定，来自class的继承按照private继承处理，来自struct的继承按照public继承处理</p>\n<p>C++中，class和struct功能基本一致。</p>\n<h3 id=\"34、拷贝构造函数\"><a href=\"#34、拷贝构造函数\" class=\"headerlink\" title=\"34、拷贝构造函数\"></a>34、拷贝构造函数</h3><p>一种特殊的构造函数，它在创建对象时，是使用同一类中之前创建的对象来初始化新创建的对象。</p>\n<p>通常用于：通过使用另一个同类型的对象来初始化新对象的对象/复制对象把它作为参数传递给函数/复制对象，并从函数返回这个对象。</p>\n<h3 id=\"35、继承的目的\"><a href=\"#35、继承的目的\" class=\"headerlink\" title=\"35、继承的目的\"></a>35、继承的目的</h3><p>实现代码重用，最大程度利用原有的代码，具有普遍性的方法继承下来，减少代码量</p>\n<p>派生的目的：当新的问题出现时，原有程序不能完全解决，需要对原有程序程序进行改造</p>\n<p>class   派生类名  ：  继承方式  基类名 {</p>\n<p>​    成员声明；</p>\n<p>}</p>\n<p>calss D : public B</p>\n<p>公有继承，是一个  is-a关系，每一个类型为D的对象都是一个类型为B的对象</p>\n<p>每一个学生都是一个人</p>\n<p>公有继承都可以用是一个关系去描述</p>\n<p>但是是一个关系都能用公有继承去建模</p>\n<p>是一个关系不等于公有继承</p>\n<h3 id=\"36、复合关系\"><a href=\"#36、复合关系\" class=\"headerlink\" title=\"36、复合关系\"></a>36、复合关系</h3><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">calss Person &#123;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"built_in\">string</span> name;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    PhoneNumber mobileNuber;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>has a关系</p>\n<p>person和phonenumber是有一个的关系</p>\n<p>is implemented in terms of 根据某物实现</p>\n<p>要实现一个集合，已经实现了一个链表</p>\n<p>calss Set : public List{}  ?这样合适吗？不合适，链表不应该被集合继承</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">class Set &#123;</span><br><span class=\"line\">private:</span><br><span class=\"line\">\tlist items;&#x2F;&#x2F;根据链表来实现集合</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>三种关系</p>\n<p>公有继承是是一个关系</p>\n<p>是一个关系不一定能用公有继承来建模</p>\n<p>复合关系：有一个关系，根据某物实现</p>\n<h3 id=\"37、私有继承\"><a href=\"#37、私有继承\" class=\"headerlink\" title=\"37、私有继承\"></a>37、私有继承</h3><p>私有继承绝对不是是一个关系</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">class A : private B&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p>编译器不会将派生类自动转换成基类</p>\n<p>通过私有继承，基类中的<strong>所有属性</strong>在派生类中都变成了私有属性</p>\n<p>用下面的复合关系来替代</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">class A &#123;</span><br><span class=\"line\">private: </span><br><span class=\"line\">\tB b;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在绝大多数情况下，上下的代码一样</p>\n<p>私有继承仅仅是一种实现技术，在软件设计层面上是没有意义的</p>\n<p>使用根据某物实现的关系替代私有继承</p>\n<p>不要使用私有继承</p>\n<p>没有人能弄懂保护继承，忘记它</p>\n<p>私有继承相当于根据某物实现的关系，不建议使用，使用复合关系替代</p>\n<p>保护继承：忘了它吧</p>\n<p>派生类可以继承成员函数的接口和实现</p>\n<p>虚函数、非虚函数、纯虚函数</p>\n<p>有纯虚函数的类不能实例化对象</p>\n<p>声明纯虚函数的目的：使派生类仅仅继承函数的接口</p>\n<p>虚函数的目的：使派生类继承函数的接口和缺省实现</p>\n<p>非虚函数的目的：使派生类继承函数的接口和强制性实现</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> &#123;</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">mf2</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">D</span> :</span> <span class=\"keyword\">public</span> B &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">mf2</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>编译没有错误，只是有一个警告</p>\n<p>D x</p>\n<p>B *pB = &amp;x</p>\n<p>pB-&gt;mf2()会调用B的mf2函数</p>\n<p>D *pD = &amp;x</p>\n<p>pD-&gt;mf2()会调用D的mf2函数</p>\n<p>同一个对象，不同的指针指向它，行为却不同，一种类似精神分类的症状</p>\n<p>所以不许重新定义非虚函数</p>\n<h3 id=\"38、多态\"><a href=\"#38、多态\" class=\"headerlink\" title=\"38、多态\"></a>38、多态</h3><p>调用同一个函数/方法，不同的对象会产生不同的行为</p>\n<p>多态四种实现方式</p>\n<p>表面的实现方式</p>\n<p>​    强制多态：通过将数据进行类型转换实现</p>\n<p>​    函数重载（只有返回值类型不同，不能构成重载，函数const属性不同属于重载）</p>\n<h3 id=\"39、extern\"><a href=\"#39、extern\" class=\"headerlink\" title=\"39、extern\"></a>39、extern</h3><p>全局变量可以为本文件中的其他函数所共用，它的有效范围是从定义变量的位置开始到本源文件结束。</p>\n<p>要想在定义点之前引用该全局变量，则应该在引用之前使用关键字extern对该变量作“外部变量声明”，表示该变量是一个已经定义的外部变量。</p>\n<p>声明可以进行多次，但定义只有一次。</p>\n<p>比如在一个.c文件中定义了一个全局变量 int a，那么要在.h文件中使用extern int a声明。如果其他文件想要使用该全局变量，则只需将它的头文件添加进来即可。</p>\n<h3 id=\"40、浅拷贝、深拷贝\"><a href=\"#40、浅拷贝、深拷贝\" class=\"headerlink\" title=\"40、浅拷贝、深拷贝\"></a>40、浅拷贝、深拷贝</h3><p>对一个已知对象进行拷贝，会自动调用一种构造函数—拷贝构造函数，如果用户没有定义，那么会调用默认拷贝构造函数。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span> &#123;</span></span><br><span class=\"line\">    <span class=\"keyword\">char</span> * name;</span><br><span class=\"line\">    Student() &#123;</span><br><span class=\"line\">        name = <span class=\"keyword\">new</span> <span class=\"keyword\">char</span>[<span class=\"number\">20</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Student a;</span><br><span class=\"line\">    <span class=\"function\">student <span class=\"title\">b</span><span class=\"params\">(a)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>调用一次构造函数，调用两次析构函数，会出错。因为默认构造函数执行的是浅拷贝，即对name拷贝后会出现两个指针指向同一块内存区域。</p>\n<p>所以在对含有指针成员的对象进行拷贝时，必须要自己定义拷贝构造函数，使拷贝后的对象指针成员有自己的内存空间，即进行深拷贝。</p>\n<p>Student(const Student&amp; s) {</p>\n<p>​    name = new char[20];</p>\n<p>​    memcpy(name, s.name, strlen(s,name));</p>\n<p>}</p>\n<p>浅拷贝只是对指针本身的拷贝，拷贝后的两个指针指向同一内存空间，深拷贝不但对指针进行拷贝，而且对指针指向的内容进行拷贝，经过深拷贝后的指针是指向两个不同地址的指针。</p>\n<p>当函数的参数为对象时，实参传递给形参的实际是实参的一个拷贝，会调用拷贝构造函数。</p>\n<p>当参数的返回值为一个对象时，该对象实际上是函数内对象的一个拷贝，用于返回函数调用处。</p>\n<p>浅拷贝带来问题的本质在于析构函数释放多次堆内存，使用std::shared_ptr可以解决。</p>\n<h3 id=\"41、int-a-5-0，1，-2，-3，-4\"><a href=\"#41、int-a-5-0，1，-2，-3，-4\" class=\"headerlink\" title=\"41、int a[5] = {0，1， 2， 3， 4}\"></a>41、int a[5] = {0，1， 2， 3， 4}</h3><p>*(a + 1)  = 1</p>\n<p>&amp;a + 1相当于加了一个数组的偏移，即指向4后面的那一个位置</p>\n<p><code>(((int*)(&amp;a + 1)) - 1) = 4</code></p>\n<h3 id=\"42、const-char-a-“hello”\"><a href=\"#42、const-char-a-“hello”\" class=\"headerlink\" title=\"42、const char * a = “hello”\"></a>42、const char * a = “hello”</h3><p>存储在常量区，不能更改</p>\n<h3 id=\"43、空类的大小\"><a href=\"#43、空类的大小\" class=\"headerlink\" title=\"43、空类的大小\"></a>43、空类的大小</h3><p>class A{};</p>\n<p>sizeof(A)为1</p>\n<p>空类的大小为1个字节：因为空类可以实例化，实例化必然再内存中占有一个位置，因此，编译器为其优化为1个字节。</p>\n<p>class B: public A {</p>\n<p>​    int b;</p>\n<p>}</p>\n<p>B类的大小为4个字节，因为B类中定义了int变量。在空基类被继承后，子类会优化掉基类的1字节大小，节省了空间大小，提高运行效率</p>\n<p>与类大小有关的因素：普通成员变量、虚函数、继承</p>\n<p>与类大小无关的因素：静态成员变量、静态成员函数及普通成员函数。</p>\n<p>class A{virtual void f(){}};</p>\n<p>A的大小为指针的大小（4或8个字节），有虚函数表的地址。</p>\n<h3 id=\"44、字节对齐\"><a href=\"#44、字节对齐\" class=\"headerlink\" title=\"44、字节对齐\"></a>44、字节对齐</h3><p>内存对齐主要遵循下面三个原则</p>\n<p>公式一、前面的地址必须是后面地址的整数倍，不是就补齐</p>\n<p>公式二、整个struct的地址必须是最大字节的整数倍</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">struct A&#123;</span><br><span class=\"line\">    char a;</span><br><span class=\"line\">    int b;</span><br><span class=\"line\">    short c;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">1000 1111 1100</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">struct A&#123;</span><br><span class=\"line\">\tint a;</span><br><span class=\"line\">\tchar b;</span><br><span class=\"line\">\tchar c;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">1111 1100</span><br></pre></td></tr></table></figure>\n\n<p>每个<strong>特定平台</strong>上的编译器都有自己的默认“<strong>对齐系数</strong>”。可以通过预编译命令#pragma pack(n)</p>\n<h3 id=\"45、char-a-“XYZ”-char-b-“XYZ”\"><a href=\"#45、char-a-“XYZ”-char-b-“XYZ”\" class=\"headerlink\" title=\"45、char* a = “XYZ”; char* b = “XYZ”\"></a>45、char* a = “XYZ”; char* b = “XYZ”</h3><p>“XYZ”存储在常量区,</p>\n<p>a, b指向同一个地址。</p>\n<h3 id=\"46、函数指针\"><a href=\"#46、函数指针\" class=\"headerlink\" title=\"46、函数指针\"></a>46、函数指针</h3><p>函数指针指向函数而非对象。和其他指针一样，函数指针指向某种特定类型。函数的类型由它的返回类型和形参类型共同决定，与函数名无关。</p>\n<p><code>bool lengthCompare(const string &amp;, const string &amp;);</code></p>\n<p>该函数的类型为<code>bool (const string &amp;, const string &amp;)</code></p>\n<p>要想声明一个可以指向该函数的指针，只需要用指针替换函数名即可:</p>\n<p><code>bool (*pf)(const string &amp;, const string &amp;);</code></p>\n<p>*pf左右两边的括号必不可少。如果不写这对括号，变成了函数pf，返回值为bool指针</p>\n<p>使用函数指针</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">bool (*p)(const string&amp;, const string&amp;);</span><br><span class=\"line\">pf &#x3D; lengthCompare;</span><br><span class=\"line\">pf &#x3D; &amp;lengthCompare;</span><br><span class=\"line\">&#x2F;&#x2F;二者是等价的，pf指向名为lengthCompare的函数</span><br></pre></td></tr></table></figure>\n\n<p>此外，我们还可以直接使用指向函数的指针调用该函数，无须提前解引用指针。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">bool b1 &#x3D; pf(&quot;ni&quot;, &quot;hao&quot;);</span><br><span class=\"line\">bool b2 &#x3D; (*pf)(&quot;ni&quot;, &quot;hao&quot;);</span><br><span class=\"line\">bool b3 &#x3D; lengthCompare(&quot;ni&quot;, &quot;hao&quot;);</span><br><span class=\"line\">&#x2F;&#x2F;以上三种写法是等价的</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"47、a-i-j\"><a href=\"#47、a-i-j\" class=\"headerlink\" title=\"47、a[i][j]\"></a>47、a[i][j]</h3><p>(*(a + i))[j]           *(a + i)[j]是错误的</p>\n<p>*(*(a+ i) + j)</p>\n<p>*(&amp;a[0][0] + 4 * i + j)</p>\n<h3 id=\"48、二维数组和二级指针\"><a href=\"#48、二维数组和二级指针\" class=\"headerlink\" title=\"48、二维数组和二级指针\"></a>48、二维数组和二级指针</h3><p>两者不一样</p>\n<p>int *<em>p，p是一个指针，指向int\\</em></p>\n<p>int a[4][5]</p>\n<p>a是二维数组名，首先是一个指针，指向一个含有5个元素的int型数组</p>\n<p>a和a[0]的值一样，a[0]是一个一维数组，也是一个指针常量，该指针的值是数组第一个元素的地址。</p>\n<p>a[0] = &amp;a[0][0]</p>\n<p>归并排序第二步合并是归并名字的由来</p>\n<h3 id=\"49、快速排序\"><a href=\"#49、快速排序\" class=\"headerlink\" title=\"49、快速排序\"></a>49、快速排序</h3><p>快排的最优时间复杂度是O(nlogn)，最差复杂度为O(n^2)</p>\n<p>空间复杂度最优为O(logn),最差为O(n);</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">quick_sort</span><span class=\"params\">(<span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(l &gt;= r) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> x = q[l + r &gt;&gt; <span class=\"number\">1</span>], i = l - <span class=\"number\">1</span>, j = r + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(i &lt; j) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[++i] &lt; x);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q[--j] &gt; x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i &lt; j) <span class=\"built_in\">std</span>::swap(q[i], q[j]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    quick_sort(q, l, j);</span><br><span class=\"line\">    quick_sort(q, j + <span class=\"number\">1</span>, r);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">    quick_sort(q, <span class=\"number\">0</span>, n - <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, q[i]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"50、int-p-new-int-10-int-p-new-int-10\"><a href=\"#50、int-p-new-int-10-int-p-new-int-10\" class=\"headerlink\" title=\"50、int *p = new int[10]; int *p = new int[10]()\"></a>50、int *p = new int[10]; int *p = new int[10]()</h3><p>对于内置类型而言，new仅仅是分配内存，除非后面加上（），相当于调用它的构造函数</p>\n<p>对于自定义类型而言，只要一调用呢哇，那么编译器不仅仅给它分配内存，还会调用它的构造函数进行初始化，即使后面没有加（）</p>\n<h3 id=\"51、char-str\"><a href=\"#51、char-str\" class=\"headerlink\" title=\"51、char str[]\"></a>51、char str[]</h3><p>strlen计算字符串的长度，不包含’’\\0’</p>\n<p>sizeof计算<strong>内存</strong>的大小   char str[100] = “qqq”  sizeof(str) = 100; </p>\n<p>char str[] = “Hello”;</p>\n<p>*str = ‘H’       sizeof(str) = 6          strlen(str) = 5</p>\n<p>printf(“%s”, str)        Hello</p>\n<p>printf(“%s”, str + 1) ello</p>\n<p>C语言中操作字符串是通过它在内存中的存储单元的首地址进行的，这是字符串的终极本质。</p>\n<p>对于数组 str = &amp; str[0]</p>\n<p>const char *str = “Hello”</p>\n<p>*str = ‘H’        sizeof(str) = 8(指针大小)        strlen(str) = 5</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">example</span><span class=\"params\">(<span class=\"keyword\">char</span> acWelcome[])</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, <span class=\"keyword\">sizeof</span>(acWelcome));</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">char</span> acWelcome[] = <span class=\"string\">&quot;Welcome to Huawei Test&quot;</span>;</span><br><span class=\"line\">    example(acWelcome);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;\\n%d\\n&quot;</span>, <span class=\"keyword\">sizeof</span>(acWelcome));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210307090612946.png\" alt=\"image-20210307090612946\"></p>\n<p>数组名作为参数传递时，数组名退化为指针，传递过去的其实是数组的首地址</p>\n<h3 id=\"52、多态\"><a href=\"#52、多态\" class=\"headerlink\" title=\"52、多态\"></a>52、多态</h3><p>多态性分为编译时多态性和运行时多态性，</p>\n<p>编译时多态性通过静态编联完成，例如函数重载，运算符重载；</p>\n<p>运行时多态性则是动态编联完成，主要通过虚函数来实现；</p>\n<h3 id=\"53、linux查看系统进程\"><a href=\"#53、linux查看系统进程\" class=\"headerlink\" title=\"53、linux查看系统进程\"></a>53、linux查看系统进程</h3><p>ps：显示所有运行中的进程</p>\n<p>top：进程了动态图，包括cpu、内存、运行时间等</p>\n<h3 id=\"54、linux让进程后台运行\"><a href=\"#54、linux让进程后台运行\" class=\"headerlink\" title=\"54、linux让进程后台运行\"></a>54、linux让进程后台运行</h3><p>当用户注销或网络断开时，终端会收到hangup：HUP信号关闭所有子进程。因此，解决办法就有两条途径：要么让进程忽略HUP信号，要么让进程在新的会话里从而成为不属于此终端的子进程</p>\n<p>1、nohup</p>\n<p>可以让提交的命令忽略hangup信号</p>\n<p>nohup 的使用是十分方便的，只需在要处理的命令前加上 nohup 即可，标准输出和标准错误缺省会被重定向到 nohup.out 文件中。一般我们可在结尾加上”&amp;”来将命令同时放入后台运行，也可用”&gt;filename 2&gt;&amp;1”来更改缺省的重定向文件名。</p>\n<p>nohup不会让任务变为后台任务，需要加上&amp;</p>\n<p>2、setsid</p>\n<p>进程ID叫做PID</p>\n<p>可以设置该进程的父进程为init进程</p>\n<p>3、&amp;</p>\n<p>只要在命令的尾部加上符号&amp;，启动的进程就会成为后台进程。如果要让正在运行的前台任务变为后台任务，可以按ctrl+z暂停该程序，然后执行bg命令（让最近一个暂停的后台任务继续执行）</p>\n<p>4、disown</p>\n<p>可以将指定任务从后台任务列表删除，后台任务不在列表中，那么session就不会向它发出SIGHUP信号。</p>\n<p>5、终端复用器</p>\n<p>Screen 和 tmux</p>\n<h3 id=\"55、快排空间复杂度\"><a href=\"#55、快排空间复杂度\" class=\"headerlink\" title=\"55、快排空间复杂度\"></a>55、快排空间复杂度</h3><p>每次递归需要的空间是固定的，总体空间复杂度即递归层数，因此平均/最好复杂度为O(nlog)，最坏空间复杂度为O(n);</p>\n<h3 id=\"56、C-逗号表达式\"><a href=\"#56、C-逗号表达式\" class=\"headerlink\" title=\"56、C++逗号表达式\"></a>56、C++逗号表达式</h3><p>使用逗号运算符是为了把几个表达式放在一起。</p>\n<p>整个逗号表达式的值为系列中最后一个表达式的值。</p>\n<p>从本质上讲，逗号的作用是将一系列运算按顺序执行。</p>\n<p>表达式1，表达式2</p>\n<p>求解过程是：先求表达式1，在求表达式2。整个逗号表达式的值是表达式2的值。</p>\n<p>最右边的那盒表达式的值将作为整个逗号表达式的值，其他表达式的值会被丢弃。</p>\n"},{"title":"Python程序设计作业#6","url":"/2020/11/30/py6-2018211308-2018211430-%E5%91%A8%E7%91%9E%E5%8F%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Python程序设计-6作业\"><a href=\"#Python程序设计-6作业\" class=\"headerlink\" title=\"Python程序设计#6作业\"></a>Python程序设计#6作业</h1><p>截止时间：2020年11月30日23:59:59</p>\n<h2 id=\"作业题目\"><a href=\"#作业题目\" class=\"headerlink\" title=\"作业题目\"></a>作业题目</h2><p>在作业#5的基础上实现localProxy的图形管理界面localGui</p>\n<p>localGui单独一个源文件</p>\n<p>可通过图形界面（可以使用QDialog）关闭和开启localProxy</p>\n<p>界面上提供remoteProxy的主机地址和端口、认证的用户名和密码（掩码显示）</p>\n<p>建议使用QProcess类管理localProxy进程</p>\n<p>可以实时查看localProxy的运行状态（是否运行、实时吞吐率）</p>\n<p>localGui与localProxy之间采用WebSocket连接（localGui为client）</p>\n<h2 id=\"localProxy代码\"><a href=\"#localProxy代码\" class=\"headerlink\" title=\"localProxy代码\"></a>localProxy代码</h2><p>localProxy代码嵌入下方的code block中。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> getopt</span><br><span class=\"line\"><span class=\"keyword\">import</span> websockets</span><br><span class=\"line\"><span class=\"keyword\">import</span> argparse</span><br><span class=\"line\">VERSION = <span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">gSendBandwidth = <span class=\"number\">0.0</span></span><br><span class=\"line\">gRecvBandwidth = <span class=\"number\">0.0</span></span><br><span class=\"line\">updateBytes = <span class=\"number\">0</span></span><br><span class=\"line\">downloadBytes = <span class=\"number\">0</span></span><br><span class=\"line\">remoteHost = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">remotePort = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socks5</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    addr_from = writer.get_extra_info(<span class=\"string\">&#x27;peername&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;connect from<span class=\"subst\">&#123;addr_from&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    header = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    header = first + header</span><br><span class=\"line\">    ver, num_method = struct.unpack(<span class=\"string\">&quot;!BB&quot;</span>, header)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;ver == VERSION:<span class=\"subst\">&#123;ver == VERSION&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;num_method = %d&#x27;</span> % num_method)</span><br><span class=\"line\">    methods = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(num_method):</span><br><span class=\"line\">        methods.append(ord(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> methods:<span class=\"comment\">#无需认证</span></span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"comment\">#回应一个数据包，包括协议版本号，指定认证方法</span></span><br><span class=\"line\">    writer.write(struct.pack(<span class=\"string\">&quot;!BB&quot;</span>, VERSION, <span class=\"number\">0</span>))</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>)</span><br><span class=\"line\">    ver, cmd, rsv, atype = struct.unpack(<span class=\"string\">&quot;!BBBB&quot;</span>, request)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> ver == VERSION</span><br><span class=\"line\">    <span class=\"comment\">#ipv4</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> atype == <span class=\"number\">1</span>:</span><br><span class=\"line\">        address = socket.inet_ntoa(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>))</span><br><span class=\"line\">    <span class=\"comment\">#域名</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">3</span>:</span><br><span class=\"line\">        domain_length = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">        address = <span class=\"keyword\">await</span> reader.read(domain_length[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#ipv6</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">4</span>:</span><br><span class=\"line\">        address = socket.inet_ntop(socket.AF_INET6, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">16</span>))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    port = struct.unpack(<span class=\"string\">&#x27;!H&#x27;</span>, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">2</span>))</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span>:</span><br><span class=\"line\">            reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(remoteHost, remotePort)</span><br><span class=\"line\">            http_connect = <span class=\"string\">&#x27;CONNECT &#x27;</span> + address + <span class=\"string\">&#x27;:&#x27;</span> + str(port[<span class=\"number\">0</span>]) + <span class=\"string\">&#x27; HTTP/1.1&#x27;</span></span><br><span class=\"line\">            print(<span class=\"string\">&#x27;http_connect&#x27;</span>)</span><br><span class=\"line\">            </span><br><span class=\"line\">            http_connect += <span class=\"string\">&#x27; %&#x27;</span> + username + <span class=\"string\">&#x27;%&#x27;</span> + password + <span class=\"string\">&#x27;%&#x27;</span></span><br><span class=\"line\">            print(http_connect)</span><br><span class=\"line\">            writer_remote.write(http_connect.encode())</span><br><span class=\"line\">            <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">            reply = <span class=\"keyword\">await</span> (reader_remote.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            writer.close()</span><br><span class=\"line\">            writer.wait_closed()</span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> error:</span><br><span class=\"line\">        logging.error(error)</span><br><span class=\"line\">    reply = struct.pack(<span class=\"string\">&quot;!BBBBIH&quot;</span>, VERSION, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">#第一个字节为0表示成功代理</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> cmd == <span class=\"number\">1</span> <span class=\"keyword\">and</span> reply[<span class=\"number\">1</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">        tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> updateBytes</span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>) <span class=\"comment\">#上传</span></span><br><span class=\"line\">        updateBytes += len(data)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> downloadBytes</span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>) <span class=\"comment\"># 下载</span></span><br><span class=\"line\">        downloadBytes += len(data)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">httptunnel</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = (first + http_connect).decode()</span><br><span class=\"line\">    http_connect += <span class=\"string\">&#x27; %&#x27;</span> + username + <span class=\"string\">&#x27;%&#x27;</span> + password + <span class=\"string\">&#x27;%&#x27;</span></span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\"></span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(remoteHost,remotePort)</span><br><span class=\"line\">    writer_remote.write(http_connect.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">    reply = <span class=\"keyword\">await</span> (reader_remote.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    <span class=\"comment\">#连接建立成功</span></span><br><span class=\"line\">    tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span>(<span class=\"params\">reader, writer</span>):</span></span><br><span class=\"line\">    first = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(first == <span class=\"string\">b&#x27;\\x05&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> socks5(first, reader, writer)</span><br><span class=\"line\">    <span class=\"keyword\">elif</span>(first == <span class=\"string\">b&#x27;C&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> httptunnel(first, reader, writer)</span><br><span class=\"line\"></span><br><span class=\"line\">username = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">password = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># async def main():</span></span><br><span class=\"line\"><span class=\"comment\">#     global username, password</span></span><br><span class=\"line\"><span class=\"comment\">#     if(len(sys.argv) != 3):</span></span><br><span class=\"line\"><span class=\"comment\">#         logging.info(&#x27;usage: local-proxy.py username, password&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\">#     else:</span></span><br><span class=\"line\"><span class=\"comment\">#         username = sys.argv[1]</span></span><br><span class=\"line\"><span class=\"comment\">#         password = sys.argv[2]</span></span><br><span class=\"line\"><span class=\"comment\">#     print(username)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#     print(password)</span></span><br><span class=\"line\"><span class=\"comment\">#     server = await asyncio.start_server(test, &#x27;0.0.0.0&#x27;, 10086)</span></span><br><span class=\"line\"><span class=\"comment\">#     async with server:</span></span><br><span class=\"line\"><span class=\"comment\">#         await server.serve_forever()</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">localConsole</span>(<span class=\"params\">ws, path</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> gSendBandwidth <span class=\"comment\">#全局变量，表示当前上传带宽</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> gRecvBandwidth <span class=\"comment\">#全局变量，表示当前下载带宽</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">            <span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">1</span>) <span class=\"comment\">#每隔一秒向gui发送当前速率</span></span><br><span class=\"line\">            print(gSendBandwidth)</span><br><span class=\"line\">            print(gRecvBandwidth)</span><br><span class=\"line\">            msg = <span class=\"keyword\">await</span> ws.send(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;gSendBandwidth&#125;</span> <span class=\"subst\">&#123;gRecvBandwidth&#125;</span>&#x27;</span>)</span><br><span class=\"line\">            print(msg)</span><br><span class=\"line\">    <span class=\"keyword\">except</span> websockets.exceptions.ConnectionClosedError <span class=\"keyword\">as</span> exc:</span><br><span class=\"line\">        logging.error(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;exc&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">except</span> websockets.exceptions.ConnectionClosedOK <span class=\"keyword\">as</span> exc:</span><br><span class=\"line\">        logging.error(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;exc&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calcBandwidth</span>():</span> <span class=\"comment\">#计算带宽函数</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> gSendBandwidth</span><br><span class=\"line\">    <span class=\"keyword\">global</span> gRecvBandwidth</span><br><span class=\"line\">    <span class=\"keyword\">global</span> updateBytes</span><br><span class=\"line\">    <span class=\"keyword\">global</span> downloadBytes</span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        gSendBandwidth = updateBytes / <span class=\"number\">0.5</span>  <span class=\"comment\"># Bps</span></span><br><span class=\"line\">        gRecvBandwidth = downloadBytes / <span class=\"number\">0.5</span></span><br><span class=\"line\">        updateBytes = <span class=\"number\">0</span></span><br><span class=\"line\">        downloadBytes = <span class=\"number\">0</span></span><br><span class=\"line\">        print(gSendBandwidth)</span><br><span class=\"line\">        print(gRecvBandwidth)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">0.5</span>)<span class=\"comment\">#每0.5s计算一次带宽</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">localTask</span>():</span></span><br><span class=\"line\">    _parser = argparse.ArgumentParser(description=<span class=\"string\">&#x27;socks5 https dual proxy&#x27;</span>)</span><br><span class=\"line\">    _parser.add_argument(<span class=\"string\">&#x27;-p&#x27;</span>, dest=<span class=\"string\">&#x27;listenPort&#x27;</span>, metavar=<span class=\"string\">&#x27;listen_port&#x27;</span>, required=<span class=\"literal\">True</span>, help=<span class=\"string\">&#x27;proxy listen port&#x27;</span>)</span><br><span class=\"line\">    _parser.add_argument(<span class=\"string\">&#x27;-u&#x27;</span>, dest=<span class=\"string\">&#x27;username&#x27;</span>, metavar=<span class=\"string\">&#x27;username&#x27;</span>, required=<span class=\"literal\">True</span>, help=<span class=\"string\">&#x27;username in local mode&#x27;</span>)</span><br><span class=\"line\">    _parser.add_argument(<span class=\"string\">&#x27;-w&#x27;</span>, dest=<span class=\"string\">&#x27;password&#x27;</span>, metavar=<span class=\"string\">&#x27;password&#x27;</span>, required=<span class=\"literal\">True</span>, help=<span class=\"string\">&#x27;password in local mode&#x27;</span>)</span><br><span class=\"line\">    _parser.add_argument(<span class=\"string\">&#x27;-k&#x27;</span>, dest=<span class=\"string\">&#x27;consolePort&#x27;</span>, metavar=<span class=\"string\">&#x27;consolePort&#x27;</span>, required=<span class=\"literal\">True</span>, help=<span class=\"string\">&#x27;websockets consolePort port&#x27;</span>) </span><br><span class=\"line\">    _parser.add_argument(<span class=\"string\">&#x27;remoteHost&#x27;</span>, nargs=<span class=\"string\">&#x27;?&#x27;</span>, help=<span class=\"string\">&#x27;remote host in local mode&#x27;</span>)</span><br><span class=\"line\">    _parser.add_argument(<span class=\"string\">&#x27;remotePort&#x27;</span>, nargs=<span class=\"string\">&#x27;?&#x27;</span>, type=int, help=<span class=\"string\">&#x27;remote port in local mode&#x27;</span>)</span><br><span class=\"line\">    args = _parser.parse_args()</span><br><span class=\"line\">    <span class=\"comment\"># if(len(sys.argv) != 7):</span></span><br><span class=\"line\">    <span class=\"comment\">#     logging.info(&#x27;usage: local-proxy.py ip, port, username, password, websockets-port&#x27;)</span></span><br><span class=\"line\">    <span class=\"comment\">#     return</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username, password, remoteHost, remotePort</span><br><span class=\"line\">    <span class=\"comment\">#if args.consolePort: # 这是localproxy的websocket监听端口</span></span><br><span class=\"line\">    ws_server = <span class=\"keyword\">await</span> websockets.serve(localConsole, <span class=\"string\">&#x27;127.0.0.1&#x27;</span>, int(args.consolePort))</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;CONSOLE LISTEN <span class=\"subst\">&#123;ws_server.sockets[<span class=\"number\">0</span>].getsockname()&#125;</span>&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    asyncio.create_task(calcBandwidth()) <span class=\"comment\"># calcBandwidth()函数计算带宽</span></span><br><span class=\"line\">    username = args.username</span><br><span class=\"line\">    password = args.password</span><br><span class=\"line\">    remoteHost = args.remoteHost</span><br><span class=\"line\">    remotePort = args.remotePort</span><br><span class=\"line\">    srv = <span class=\"keyword\">await</span> asyncio.start_server(test, <span class=\"string\">&#x27;127.0.0.1&#x27;</span>, int(args.listenPort)) <span class=\"comment\">#ip 端口号</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> srv:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> srv.serve_forever()</span><br><span class=\"line\"><span class=\"comment\">#gui传过来的参数有 ip 端口号 用户名 密码 websockets端口</span></span><br><span class=\"line\">asyncio.run(localTask())</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"localGui代码\"><a href=\"#localGui代码\" class=\"headerlink\" title=\"localGui代码\"></a>localGui代码</h2><p>localGui代码嵌入下方的code bock中。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtCore <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtGui <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtNetwork <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWebSockets <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> mainwindow <span class=\"keyword\">import</span> Ui_MainWindow</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5 <span class=\"keyword\">import</span> QtWidgets, uic</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> humanfriendly</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainWindow</span>(<span class=\"params\">QtWidgets.QMainWindow</span>):</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, parent=None</span>):</span></span><br><span class=\"line\">        super(MainWindow,self).__init__(parent)</span><br><span class=\"line\">        <span class=\"comment\">#self.pushButton = QPushButton(&#x27;start&#x27;) #注意一会把</span></span><br><span class=\"line\">        uic.loadUi(<span class=\"string\">&quot;mainwindow.ui&quot;</span>, self) <span class=\"comment\"># 加载界面</span></span><br><span class=\"line\">        self.pushButton.clicked.connect(self.startClicked)</span><br><span class=\"line\">        </span><br><span class=\"line\">        self.process = QProcess()</span><br><span class=\"line\">        self.process.setProcessChannelMode(QProcess.MergedChannels)</span><br><span class=\"line\">        <span class=\"comment\">#self.process.finished.connect(self.processFinished)#当进程结束，触发processFinished</span></span><br><span class=\"line\">        self.process.started.connect(self.processStarted)<span class=\"comment\"># 当进程已经开始了，触发processStarted</span></span><br><span class=\"line\">        self.process.readyReadStandardOutput.connect(self.processReadyRead) <span class=\"comment\">#信号 如果stdio有输入，那么执行processReadyRead</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">processReadyRead</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        data = self.process.readAll()</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            msg = data.data().decode().strip()</span><br><span class=\"line\">            logging.debug(<span class=\"string\">f&#x27;msg=<span class=\"subst\">&#123;msg&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> exc:</span><br><span class=\"line\">            <span class=\"comment\">#logging.error(f&#x27;&#123;traceback.format_exc()&#125;&#x27;)</span></span><br><span class=\"line\">            exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">processStarted</span>(<span class=\"params\">self</span>):</span>  <span class=\"comment\">#进程开始后，调用该函数</span></span><br><span class=\"line\">        process = self.sender() <span class=\"comment\"># 此处等同于 self.process 只不过使用sender适应性更好</span></span><br><span class=\"line\">        processId = process.processId()</span><br><span class=\"line\">        logging.debug(<span class=\"string\">f&#x27;pid=<span class=\"subst\">&#123;processId&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        self.pushButton.setText(<span class=\"string\">&#x27;stop&#x27;</span>)</span><br><span class=\"line\">        <span class=\"comment\">#self.processIdLine.setText(str(processId))  #先注释掉这里</span></span><br><span class=\"line\"></span><br><span class=\"line\">        self.websocket = QWebSocket()</span><br><span class=\"line\">        self.websocket.connected.connect(self.websocketConnected)</span><br><span class=\"line\">        self.websocket.disconnected.connect(self.websocketDisconnected)</span><br><span class=\"line\">        self.websocket.textMessageReceived.connect(self.websocketMsgRcvd) <span class=\"comment\">#当收到对方发的信息后</span></span><br><span class=\"line\">        self.websocket.open(QUrl(<span class=\"string\">f&#x27;ws://127.0.0.1:<span class=\"subst\">&#123;self.consolePortLine.text()&#125;</span>/&#x27;</span>)) <span class=\"comment\">#打开websocket连接，里面是端口号</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">startClicked</span>(<span class=\"params\">self</span>):</span>  <span class=\"comment\">#当点击开始按钮时</span></span><br><span class=\"line\">        btn = self.sender()</span><br><span class=\"line\">        text = btn.text().lower()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> text.startswith(<span class=\"string\">&#x27;start&#x27;</span>):</span><br><span class=\"line\">            listenPort = self.listenPortLine.text()  <span class=\"comment\">#本地端口10086</span></span><br><span class=\"line\">            username = self.usernameLine.text()      <span class=\"comment\">#用户名</span></span><br><span class=\"line\">            password = self.passwordLine.text()      <span class=\"comment\">#密码</span></span><br><span class=\"line\">            consolePort = self.consolePortLine.text() <span class=\"comment\">#websockts端口</span></span><br><span class=\"line\">            remoteHost = self.remoteHostLine.text() <span class=\"comment\">#远程主机ip</span></span><br><span class=\"line\">            remotePort = self.remotePortLine.text() <span class=\"comment\">#远程主机端口</span></span><br><span class=\"line\">            pythonExec = os.path.basename(sys.executable)</span><br><span class=\"line\">            <span class=\"comment\"># 从localgui启动localproxy直接使用-w 提供用户密码，不再使用命令行交互输入，因为有些许问题</span></span><br><span class=\"line\">            cmdLine = <span class=\"string\">f&#x27;<span class=\"subst\">&#123;pythonExec&#125;</span> local-proxy.py -p <span class=\"subst\">&#123;listenPort&#125;</span> -u <span class=\"subst\">&#123;username&#125;</span> -w <span class=\"subst\">&#123;password&#125;</span> -k <span class=\"subst\">&#123;consolePort&#125;</span> <span class=\"subst\">&#123;remoteHost&#125;</span> <span class=\"subst\">&#123;remotePort&#125;</span>&#x27;</span></span><br><span class=\"line\">            print(cmdLine)</span><br><span class=\"line\">            logging.debug(<span class=\"string\">f&#x27;cmd=<span class=\"subst\">&#123;cmdLine&#125;</span>&#x27;</span>)</span><br><span class=\"line\">            self.process.start(cmdLine)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.process.kill()</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">websocketConnected</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        self.websocket.sendTextMessage(<span class=\"string\">&#x27;secret&#x27;</span>) <span class=\"comment\">#连接建立后随便发的</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">websocketDisconnected</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        self.process.kill()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#def format_bandwidth()</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">websocketMsgRcvd</span>(<span class=\"params\">self, msg</span>):</span></span><br><span class=\"line\">        logging.debug(<span class=\"string\">f&#x27;msg=<span class=\"subst\">&#123;msg&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        sendBandwidth, recvBandwidth, *_ = msg.split()</span><br><span class=\"line\">        nowTime = QDateTime.currentDateTime().toString(<span class=\"string\">&#x27;hh:mm:ss&#x27;</span>)</span><br><span class=\"line\">        print(sendBandwidth)</span><br><span class=\"line\">        print(recvBandwidth)</span><br><span class=\"line\">        self.sendBandwidthLine.setText(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;nowTime&#125;</span> <span class=\"subst\">&#123;sendBandwidth&#125;</span> Bps&#x27;</span>)</span><br><span class=\"line\">        self.lineEdit_2.setText(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;nowTime&#125;</span> <span class=\"subst\">&#123;recvBandwidth&#125;</span> Bps&#x27;</span>)</span><br><span class=\"line\">app = QApplication(sys.argv)</span><br><span class=\"line\">app.aboutToQuit.connect(app.deleteLater)</span><br><span class=\"line\">form = MainWindow()</span><br><span class=\"line\">form.show()</span><br><span class=\"line\">app.exec_()</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"代码说明\"><a href=\"#代码说明\" class=\"headerlink\" title=\"代码说明\"></a>代码说明</h2><p>源代码中不要出现大段的说明注释，所有文字描述在本节中以行号引用说明。</p>\n<p><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfIAAAKtCAYAAADcoexvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAADLDSURBVHhe7d3rs6zZXR/2/g9w3nneQF7ElyrhGGOX4xqboowLlwtwmBgDBnxRGXx0myQTfEuOA5YISAgJNCAhJCEQY924jSwJaUwAR0lIOXZFsVN2CE7kN0K2YIQ0N400IzTSk/3rs39n1l5nPbfu3bt77fP5Vn2q+1lrPZfuc6a//exzjrT5o1/xFQMA0KdtkYuIiEifUeQiIiIdR5GLiIh0nM0DDzxw/lRERER6iyIXERHpOIpcRESk4yhyERGRjqPIRUREOo4iFxER6TiKXEREpOMsLvJf+ZVfHd718+9Z5S1ve+fwI69/6/CaH33L8NaH3j3899//uuEd73z38IUvfOH8qCIiIrJPFhf5O975ruHf/Mb/e+Y39/Bvh59481uHZ5555vyoIiIisk9WFfkTT3367G76uVmf//znb3vuuc/fHv/c5z43vPFNPzl89rOfPT/q1eaRG5thc++Dw0fOtw+dyzvfR4YH7z071o1HzrdFRE4rm83ZZ9QKPSeu/8Mf/vD51nhizVW81tVF/jMP/2/D97zxkeF73/TB4R++5YPDy3/qA8Mr3vZLw/c99L7hLQ//6tnd9meH3/3d3x0+/vGPbz355BPDR3/78eE7X/W+4Rf/538zW+QfefDeW7/QMwW4Lcmzdcu77bwMVxTrrXPcGO44xUceHO49O/e9D9ZHKgt3/fnGo8hF5LSzprCuotwOmSzoqTJfsuaysrrIX/OP/qfhvpe/Y/im73to+OZX/czwra/96eHbfvQnh+/48TcPr/zZ9w2ffurJC0X+xBNR5I8NN37kPcM//uf/almR33vvWVHeO9zRk5ltkZ6tOSu3g3bbIzfOfiHuvI7tNZ79At1R0ucFf/nXpMhF5LRzNxV5ZKqop+YOkcVF/vZ3vHP41ONPDq//uf9l+Js/8nPDd/7Yu4YXvv4fDd/+Yz85/JU3vHH4tp94/fDKn3vPtsgfe+xTw6OPPrr11Nn2b33iU8P9P/Xu4f3/8v8YXv/GNy+4I78x3Ii74ZHi2q65cbbmIKVZ5pHtOS7eed8q1RsPRmlXd+sjxb9/FLmInHbutiKPtAq7NXborCryT3zy8eEn3/frw40ff/fwTa958/B1r35w+IYf/uHhP//R1wz3/firh5f/7Lu3Rf7kk1Hmj209/fTTw8c++cnhb//8Q8MH/vU/H370DW9aVOSPnN9131mKUa4xfqtkL3bbeeGdjd9ysWgv/pn18+V465ytfc7XXLjzHj9//Wfi6893nu0XgpyPfR5sF/n5TwDKtVPXExkdq48tIrIi8fmzNGvWnnrK4i6fX2VWF/mDv/Crw9e98vXD1//Q64ZveN0PD9/4+tcM/8VP/ODwl9/yA8P3/cI7iyL/1NZnPvP08O8f+93hv/ulNw+//Ju/vrzIz55HwdR/Dr2d35bOnUX6kQdvFMV/Zwk3i/XsGM+f49Yxy1Irr2ebKNnzY1y8vlv7lte7y/m2xz8buzh0a7+5dVnst49/x08Izs93YezWdV04johcWrb/7a7Qa9Zce8+vs5Us8HDVJR5ZXeQ/+LMfGL7+ta8b/uKDrx3ue8MPDX/pTa8avvmt3z9869teMXz/w2/fFvkTTzw+fPLsLjw8/fSnh//wxKPDK/7p64Zf/ciHVhX5rSIq71jL8i6fj6Tav1msRdFH7iju6s+9t8c439iuzf0bP0FYf747vwzcyvm+t1/s2Lr28Z7f7Vaxx98tuL3v6E8+RESWR5GffUafiedXndVF/upfeP/wjT92dhf+xlcP3/TmVw7f/FP/w/BXHnr58B3v+N7hle99aPu31OPPxR9//LGtp556anji008Mv/nxfzt87JP/YV2RnxfYhTvM20XYLvLbd6+3zRR5dYCL54+U11CdsyjBO/fb4XzVl4bnU+07uu4s1V34HV88zp5vH8+vq3wuIrJr4vN2adasPfV8+LzE47F8fpVZXeSvec/7zkr81o/Sv+Wnv2/4trMS/6vv/J7hb/zszeEH3//T27vx8i+7fepTn9qW+7bYn3hiZZGXRVOVel2q59sXynTJHXnVhvX5I7f32xZoOff8NZSFmTmFIq/fv+0+xeuIa2zd2YuIrMndWOQfbhR3a+zQWV3kr33vP779o/Rvf/s/HP7qu/7B8Dd+7r8d/uYv/t3hhz7w1uHxxx7blvcnPvHo8Du/8zvbf4oWf+ktfsz+2OOPry7y22V542Ip3x7PgarAIvWxdi3yPPaNG1mKz+dWgbf/Bv368916TXcW6/mXlOdf7Mi6xvVvS/vsfXmk/BKSpR7HufieiYjskrutyD88UdhTc4fI6iJ/6IO/MvzAw+8aXvWedwyvfu/bhx96/0PDa37pbcNrP/jTw0994OFtiUd5//Zv//ZW3JVHiW8Lfaciz7G6uFpFXmyf37VeSpGfn+vOazjL+XnrLxGRXc633ac61q2xi/vme3LhcPV7sM15accXoXr/+Pf61RcTEZFdEp89S7Nm7SnmwwuKesmay8rqIn/2mWeGTz/11AXxZ+L54/Mnn7j1Z+TxPwQT2/nP0MLjTzy5U5GfDd66q7zQOFWRn+XWvuelFwW1LbbLKPLny7Rafn5t5XGfz67nu13c52480t43i/t57bvrfF8u7H5+3X6sLiKXkYufRfN6Tlz/hxcUdKy5ite6+aNf8RXnT6fzyD/55eE9H/iV4f3/5J/u7H2P/Nrw+jf8hP/TFBERkUvK4jvy+L8ejR+Tf+xjH9tL/Jj9i1/84vlRRUREZJ8sLnIRERE5vShyERGRjqPIRUREOo4iFxER6TiKXEREpOMochERkY6jyEVERDqOIhcREek4ilxERKTjKHIREZGOo8hFREQ6zrbI4/+pDADojyIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDo2E5FvtlsbmvNh7l5AGB/e92R91jkeV211loAOHUHK/LLcKjjt457iHP5ggDAoSnyibF9KXIADu0gRR7jqTUfyjX1unqunm+tqcfrNTmf4+X21Fhr33K83q7H6jkAuEwHvSMfm6/Hl66bGi/H4nm9pjVfKtfmmtbzcmzJmnoMAC7TSRT5mDX7l2O7zJfm9m9ttyxZAwD7OEqRh5hLrfkwNlfuWyrny/X1WGu+NLd/a7tlyRoA2MfRirw0tm7teGrNl2P77t/ablmyBgD20c2fkY89b43tMl9bc7wxa88JAGvtVORRSrV95su52tiacv9yfm6slPNjWuvK/VvztSVrAGBXe92RAwDHpcgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOri/zmzZsAwAG1+nfMTkUuIiIih4kiFxER6TiKXEREpOMochERkY6jyEVERDqOIhcREek4ilxERKTjHK3IN5vN+bN2Yn5qzdR8zi1ZIyIi0nOuvMjnCjZSzrXWTc3PrY9M7S8iItJTTu6OfK6IDzEvIiLSa+7aIo/HJCIi0muuXZFHYrtUZmxMRESkx1zbIs9MzWVaYyIiIj3k2hX5vvMiIiI9RZGfpTUmIiLSQ06uyCNrireen1sfWbKPiIhID7nyIo/SrLUyNRdZsu/SNSIiIr3maHfkIiIisn8UuYiISMdR5CIiIh1HkYuIiHQcRS4iItJxrqTIAYDDafXvmNVFDgCcDkUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1bXeSbzWZr6Vhrbmq+Hhvbbs2VxubK8db82LrWGgA4tp3uyFvFVo7V83PbrbHYLsfq5631redT2/VjPT83BgDHdiVFXltSlFPHWLJ/OT527Pqxnp8bA4BjO0iR53Yqx+u5Ur2m3C615lr751hrrvVYzreUawDgFBysyEv13JJSXHO8emzufLldP9bzAHDqLqXIY7scmyvGers11lqT5vavn9frc7t+rOfnxgDg2HYq8hDFlsrtei7HamNr6vFyrp5fMjb3vB5LOdaaA4BTsXORAwDHp8gBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOKHAA6psgBoGOri/zmzZsAwAG1+nfMTkUuIiIih4kiFxER6TiKXEREpOMochERkY6jyEVERDqOIhcREek4XRf5ZrPZEhERuVvTbZGXBa7MRUTkbs21KHIREZG7NYpcRESk41x5kUcBt9Rzre1IOVbPiYiI3G05SpGXaRVxXdBja0RERO72XHmRlxkr4yUlrchFRESOWORTRazIRURElkWRi4iIdJyjFHldwnPbrShyERGRI/1lt5axuTpL1oiIiNwtOcoduYiIiFxOFLmIiEjHUeQiIiIdR5GLiIh0HEUuIiLSca6kyAGAw2n175jNfffd15wAAE7f6jtyAOB0bO6///7mBABw+hQ5AHRs87KXvaw5AQCcPkUOAB1T5ADQsc1LX/rS5gQAcPoUOQB0bHPPPfc0JwCA0+eOHAA6tnnJS17SnAAATp8iB4COKXIA6NjmxS9+cXMCADh9ihwAOuafnwFAxzYvetGLmhMAwOlT5ADQMUW+wGaz2WrNAcAxbW7cuNGc4CJFDsAp2tx3333NCS5S5ACcos0DDzzQnOAiRQ7AKVpd5OWfF+fzVslNzdXzrTVj8+V2+ViuSa3xHMvxeru1rjUPAKdgpzvyVrGV21Nzl7ldP5bKsbH5sTVj6+sxADi2nYt8yViO13Nzpbh0vn6s56fGWmvSkv0B4BQcrMhjO8fG1pdr1sznWP1Yz0+NtdakJfsDwCk4SJHX83MluMt8jk3NTY211qSlxwSAYzv4n5HPrd1luxxrzdXjU/u31HOxPbUeAI5lrzvyLLhWyZXj9ZrcrseXzuea8rGltX+Olcr51rpyu14HAMd0aT9aBwCu3uoizztTZQ4Ax7fTHTkAcBoUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0bHWR37x5EwA4oFb/jtmpyEVEROQwUeQiIiIdR5GLiIh0HEUuIiLScRS5iIhIxzmJIt9sNhesybH2FREROYUctcjrIq1NpbW+NJXW+pKIiEgvOVqRtwq0pZXWupZWWutaREREeogiHyEiItJDjlLkreKcUqY1P6VMa36KiIjIqUeRTxARETn1KPIJIiIipx5FPkFEROTUc5Qij7SKs6WV1rqWVlrrWkRERHqIIh8hIiLSQ45W5JFWgZam0lpfmkprfUlERKSXHLXIM/sU6bH2FREROYWcRJGLiIjIblHkIiIiHUeRi4iIdBxFLiIi0nEUuYiISMe5kiIHAA6n1b9jVhc5AHA6FDkAdEyRA0DHFDkAdEyRA0DHFDkAdEyRA0DHFDkAdEyRA0DHFDkAdEyRA0DHFDkAdEyRA0DHFDkAdEyRA0DHFDkAdEyRA0DHFDkAdOxaFvlms7mtNQ8A18W1viPfpcjLLwGl1loAODZF3tDa7xBl7gsCAPtS5A2KHIBe7FXkUURpan5sLJ/Xa+q51ny5pjUX5uZK9Vy5PTXW2rccr7frsXoOANbYucjr8pnabs2tXV9u12Ot+bXj9fFq5dpc03peji1ZU48BwBo7FflcAc2V1i7zpbn9p8bGxsuxsf3SknPNHSMsWQMAU06yyHM7leM5t+tYjreU8+X6Wmu+Hps7RliyBgCmnGyRl+q5pfuPHXPqXGGX+Xps7hhhyRoAmHK0PyMvt+uxfdfvMr7keKW59ZdxDACYs3ORhyifNDXfGivH67FyO8daxubLfZeuaY2X61ta68r9W/O1JWsAYMxeRQ4AHJciB4COKXIA6JgiB4COKXIA6JgiB4COKXIA6JgiB4COKXIA6JgiB4COKXIA6JgiB4COKXIA6JgiB4COKXIA6JgiB4COKXIA6JgiB4COrS7ymzdvAgAH1OrfMTsVuYiIiBwmilxERKTjKHIREZGOo8hFREQ6jiIXERHpOIpcRESk4yhyERGRjnOUIt9sNhfUOfS8iIjIdcmVF/lY8WYOPS8iInKdoshFREQ6jiIXERHpOFde5JEo1lKdQ8+LiIhclxytyDOtoj30vIiIyHXJlRf5IYp5zbyIiMh1iiIXERHpOIpcRESk41x5kUeiWEt1Dj0vIiJyXXKUIhcREZHLiSIXERHpOIpcRESk4yhyERGRjqPIRUREOs6VFDkAcDit/h2zusgBgNOhyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocOvLkxz/eHAfuXoocjmxpOT/9a788DF/6+4bPvPcXm/On7smP/H/Dp//Zr28fW/Nz4n2ae6+WrDm2XV8/jLnrinyz2dzW2oarFB/q23J+x9ua86Vc+9xX/bHm/Jwo0V3tWo5xzVlcn33Tj22vPx5vz6847jOv+YHt/vGFpjUf4ktOfY45rdcb8rpbc2OWvJ7f+8Y/t/01zOPv66n/6182ryXlNcX5WvMpjlMfmz50XeS7lm+936FK3JcDlvjcC791tqDSM9/z97Zr44O3NT8l9ttV63xREDEe5RnFGZ79r1+0fT1RVLlvXHOsr4s8S3fpTxjymFMFGOePNUveyxTrW/I6W3Nj5n5d8tcv3qNYu9RUyebvn3gs5fsV+8e6fP/ji0S9Nvevjx3yi0LrfZ/6clCv5XAUeWP7sihylohCjA/SEB+aWZAtUXrxgduaS2N3hXmO8gN8Tl0GY8eckkUex4jtLMh4rbkmx8bk2ijq1nzK47XmxuQ++Zqj6GK7LvLyfanl+zRVuFniu4hztI4ZYi7W1ONZ3PlrV2+Xps6Rx2/9GuUxx8Sv19R7wuVYXeRRTqm13VpXztXj5VxtbL7cd+maem5quxyfm2utqefqeajln3/Hh2YW3q6mSjdKKuaXmvsJQPy4Oz6s4wO9/FBvfXjHMWKuLISyzLPwSzEf++Wdduyb15Zybf0etrSuK/fJ7ViX52rNt+Rrb82FusRbd8UtuX7qC0yuq8fzmuL1tLZLMR7HqcdDHj/fj1IeM/dP5U9kgjI/rJ3vyOuCGnveGsvn9WOptb62Zrw+Xq1cm2taz5dsz41DS/w5edxNx4de+aG41tiHZvnBulbrw78l17fm6oJMcb0xHuVW/zQhXk8ec0yuzbKfEscrjx/q8V2KPK+zHo/XU76GLPTWay3FXL6eubVj566Lu94uxfjYa8zj179uIY/Z2jffxxDFXs9zefYq8tZ4aM2VY/m8fqzndxkbGy/H6vm57XqsNd+ydB3sY+lfmsoP1fjQXWrqR+tRwDFeynPU4yG+qMRclFlrLu6o43n5RSSuYeya81yxLoout1trowxzLo+d6vG4hhgbK/L6dWeZxTlyTaivKV9X/t2A0Pqz/DxeiPdqqsRDHDvWltcU8ktDPI91edx4r+u1Md56b0IeP9+PUh5zbN/ytZa/rlyugxV5SznfeqzndxnL8ZZyvl4/td0ai+1Ujpem5uAyxIfj2IdsbeoDd0x+UGcZlPID/rKV15jnKM/bmitLql4XpsoqxqOEs9TyC0e+p/V++bfna61SjmO1/jJf/Lrll6Q4duybryHEXOs9b8n3IR5L9ZewPH681npt7l8fO+R8vh+lPObYviHmw9LXw3pXdkdeyvn6sZ7fZWxqPM2db825wtjc1D7H9vQH3tccZ7n48H3mta8cfu+//K7hua//6uFzZ4+tdWPqv/Fb37Fsj39WGuVYLe+6lvzN71hXFtYS9V1dKa4tiyDlh3Y9nubmQ/maYzvWl+et58o737G717j+PG89l/vWxoo8/8Jhih+Bt96fOXGtsX993rlf81r+OtTjeZ1xbfF7Lbfj91kof5IT42PnzWtU5KfrJH+0Xo+15uvxufVT8/uub+1fj4+tuWpPfuy3ht970V8fnvuGr2nO382e/Hcf2ZZn+Mx7fn549lUvH579/u/ZFvUXvuorhy/8Zy8YvvjlXzoMX/YfbT+YvvjH/pPhub/4NcPn/t5/td3nqf/n/24ed0x+CKb6wzBLNMZbBZV340v//LE811pLP4RzfWsuxNzYh37rNWaJ1OPlXL6P8bhPkcdcyB/DZ3HF86VfgOrz55e1+P0Rx8vSzXOmsbEQ+4Uo4jhW/YVvTv6EIfbNsfIvD5ZrW/LaWmtjLK+1ngv5ezSsvW6WW13kUUi1Jevq8Xxej5XGxktz+9bz9Vi9XZobH5svLVlzVT79v35o+MKf+vLtf1RR5q0110V8YclSDttSPvd7L/yW4fPf9Be2vviVf/D2B80FXxaPUdhn4vkfvGd47mvvHZ79B39nePp//GDznGuVd3ZxztaHYXzwx1yUdf1BmPvF6yvHx+S5drH0Qzjfv3IsCiReazzPH/eW8yG+tERZjr3Gcqyei/LMoovjt8o8riHWxj71XD2ea7O44vlSZVnmF7GWOF8cv1wfYjvG87W1lH98EOvnZGnH75NyPM+RXxBS/Xcucl2+H6UYi7ny/Uvx65BfipZ+2WQ3O9+R05dnfvhV2/+g0rOvuNlcd6rKUn7mDT/yfCmffSHJUv7CV/+JC69xkW1h3/n8i3/kPz4r/LMP27f8+PDUv/o/m9d0meKcrQ/DEB+0eV1ZiPkBGh/S9foUH6TlB/RlqT/oS3mdWcy5na8tS6Es2yy8WF+XcK5vXUceP9fGWGy33pOca73H9XiuzeKK5yHPF4+xvpRfUGLfPE68TzEXx4nyjbn69W3HJt7P+GITv+fjGPE+1a+tvo5aXnuK62ytK+XvsfIcsW++H6X8fRjvSbyWFK8335MQY/W+XB5Ffs3Fj4vjx+j5H1SKgmqtvwqf/hf/7HYpx3VkKX/u79x/u5Rb17y787vq8g57+/z5NV98wZduvxRcVXHX4hriA7M1F+IDPa8177BCXQyl+PDMdZcpP9DjmuJ5XE/5oV0ryyF/whDXFteer6VV4iFLZEq5PoulvGsN+V60/hw4xsv3Ptfm68z5/DXI8VJ+GWm9hjheS35Bi31b86Wpsm+J/7byvYvHuK54nte/5nh5nNbrzvd7Slx/vR+XS5FfY/HnvFFQrf+4Lusvu8WfC2cpf+bdb79dynHHn6UcWtdwECN32LVtcb/wW7Z39/HFovXarlJcU1kmLfHhm3eFYe4DMoonjrlEHrM1V6tLuSXWtMoifp/EfBR4eYc79oUkzhdr6mvI8VDvk8eN159j8V7FWKuMYjz2ydLMP1POtfE8zpfP6x8TZ0nmmlrM7at13SFeY15z68/fyy8ucZ3lfLzmmI9j52sP5fsWcp/WNcRYHi/Wpfj13f4eGPl15XIp8uvo0Ue3d7f5H1hL666z/MteUfS3S/lMWcpjXw6uzvmddT6fKOx0asVdi2uMD8DWXMoSTNsCXHmnNrZ+yflrcT1RBPGBnR/+eW312lTeGYa6xOsP/rimseONzUUZ5bHrsVYZxXhLro3n+d7knXccL/fPMssvOLXYtyV/itGaS/EaymsplSVaiuPGr8vYr3Vce/lTnVr904y4jhifuoZYU89xdRT5NRMlteTPiuNH11HK+Zff+nDxx+FTTr24a3HNUx+G5Yd2fNCWH8T1HdSY+GCP9eVdWorxKI34kB+z5Dx5Ta25KOkswu11nD2vSzzGyyLJEsnt0tRcnifLNa4/tltlFOMhjhfq8sy5eJ7v4e3t82uu79KXyCJvzaX88ta67jh3vgdxrO1d8Nl7V/+65Xsc116Ox7HjuHmMEM/rLwA537qGGMv96jmujiK/RqK0hj/w+2//R9mP8g57N70Vdy1eQ+vDMD5ws1hCWaZlKY7dDZbyQzc+wOu5PM6UJR/WubYciyLJc5fqYojXWo9niZTrlszFOcsvBFOFWI/X1xHPy9d++0vC2fHzGmKfnF8iryeO1ZpPcQ1zx89riMdSflHIffNY8fupXpv718cOOd967/KYY/tyNRT5NRA/Ev/8t9+3/Q/qpF34Efie5X32hSVec/xt/Phnda33pSfxmsoPw/jwLe+643neWZXi7jrXtD5oU+yb61p31jkX1zCmdSdfy+PE87izyw/68vhZlKF8TfFlJMbKLyWxPsZyuzQ1V8vrqN+jvJZyvB6L53GunC/fy7DkfSnF+5/71ne/tbzuLOOWsfeh3nfqWDFevsZSHr98j1Iec2xfroYi71z8Wfbov4U+irNyXvgXzla5ZsVdygKLO6goiSySHJv6EA+5fxgrhvzATbFdlmiM7fJhHKUU1xfyLjPEXHldcezydbQKIL+UlF80skTyHKX8SUWunZLni8dyvHWnHscux+J5/d7k8UL5xWNOHnvpfvkaW1++Ur5H9XheY5yztV2K8fo1pjx++R6lPObYvlwNRd6rRx/d/s3w+I/oaLYlfX5nfft5Mb+Pa1zcpbLsQnwgRsHGB+Sagoi1Yx/2eQcYx87nKe7088M4SiM+5OeU5yl/apDKD/Uo59gnt0tZUvEYhdr6M+MskSnl+jH54/A4z4Xx8y8P5TXG8xjL4orn5WvK8s/rDXGc8otRLeam/igk39tS/rqEcm0t36N6PPePY7W2SzFevsZSvLaYa/1+jLGYizX1HFdHkXco/sb55f476xmHuMOu3SXFXYoPwXz9UY7lB308jw/eWFN+uI+JdbE+xHaeI4s7yjKLJsbyw38X5Yd2fpCnuO65HxenuJ4s89vHPtu/XJPXWZ4j5T7l+vp9CVlgob621peH2CfGYr/YjudxvnieJZ7vZ26n2Kc8R/3rGuI9y/lUvp5aXseY3Ld+3XneeB7r8n1o/YW4GM/XSH8UeWc++9BbD/QX2sq76gPcYTfE35qPf9p2txR3LT9YyzvcvEPcRxZFfkCXJV6KwokP9bzjWqq83n3FdcX7EMfdfgmorjPG4zWUY1NzOdZSf0nI9yfLN0o5xrIA8+49nsdx473K45TXGfuWP5koi/fCXXvsV32RSPkelOKYeQ1TYm0cv94/zx2vKdbl77f4/VCvzf3rY9MHRd6J/D87if/g9nYVd9gNWdxLPpzuBlEGrbuz2wV79sFff+AukSUThbstqaoce5JfMpbOjRVi830+e1/K96f+/ZpfWOIY8WsRa6d+726/BBQ/rSjHxgr8Moy9R/nTknwd9XZp+xqra6cfirwDcce6/t97n99Z5/MrLOykuOlJlFnye5aeKPITF0XYKslxh/1x+BTFDXD1FPmJin8b/oWv+VNFUZZ32Kch/sJd/M15xQ1wPIr8BD339V99XpanVd63izv+D1cefbR57QBcLUV+wuLPxp+9+d27/f9sXwLFDXD6FHkn4t+Ox/+O+HNfe2+zdC+D4gboz+oiv3nzJkf2qu/+b4b3/uVvHH7jTz//b1R39Vtf+YeHn3nhXxu+9+///ea5ALh6rf4ds1ORywnl2WeH4X0PD8P93zkMX/5lzbKe9Mf/0K1jiIjISUSR3+350K+d/S747mG49z9tF3dLfBEQEZGTiCKX5/Mb/3oYfvAVw/Bn/2S7wNNf+KrzHURE5NhR5NLOxz46DG994zB86ze0y/yXP3C+UEREjhlFLvP5xKPD8PPvHIa/9R3P/x+wuCsXETmJKHJZl/iLbnE3/rdfOgz/+6+fD4qIyLGiyEVERDrO0Yp8s9mcP7szMVeqMzc/lXrfVGdsfGnm9t13fi5Lr3/f84iIyHFz5UWeBTNWIK3xcmxufi5L1s6dbyqxPrWy7/ySlPtOHWff84iIyPFzcnfkrfFybG5+LnNr1xxrKvueZ9frWLNfrN31PCIicho5uSJvZWrt2iLK8iqVye2x+aWZ22/f+bHkfvGYWinXiYhIvzn5Ip8qol1KqLVPOdY67mWdp8y+82OJ/ep9p7Z3PY+IiJxGTrrIL2vNXOaKbZdzzO2z7/xY5q6/nt/1PCIicho52SJfUzD7llG5f+tYuxx/bp9958cyd/3xfIyIiPSXkyzytXNrSmhu/32Pn5nbZ9/5say9/l3PIyIip5GTK/K5Iloy31qTmds/MrUdz1vHqDO3Ztf5Jeev56fWzx1LREROO1de5FlEpTKt+VBmydxUyn3H1o7NT+0TKfdrrb2s+bmM7Z8p58fWiIjI6edod+QiIiKyfxS5iIhIx1HkIiIiHUeRi4iIdBxFLiIi0nGupMgBgMNp9e+Y1UUOAJwORQ4AHVPkANAxRQ4AHVPkANAxRQ4AHVPkANAxRQ4AHVPkANAxRQ4AHVPkANAxRQ4AHVPkANAxRQ4AHVPkANAxRQ4AHVPkANAxRQ4AHVPkANCxu67IN5tNU2stAJy6rot81wJu7XeIMvcFAYBDU+QTY/tS5AAc2uoij3JKre3WunKuHi/namPz5b5L19Rz5fbUWGvfcrzersfqOQC4TDvfkdcFNfa8NZbP68dSa31tzXh9vFq5Nte0npdjS9bUYwBwmfYq8tZ4mCu1fF4/1vO7jI2Nl2Nj+6Ul55o7RliyBgD2cbAibynnW4/1/C5jOd5Szpfra635emzuGGHJGgDYx5XdkZdyvn6s53cZmxpPu8zXY3PHCEvWAMA+TvJH6/VYa74en1u/5HilNccbs/acALDW6iKPQqotWVeP5/N6rDQ2Xprbt55vjY1prSv3b83XlqwBgF3tfEcOAByfIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjq0u8ps3bwIAB9Tq3zE7FbmIiIgcJopcRESk4yhyERGRjqPIRUREOo4iFxER6TiKXEREpOMochERkY5ztCLfbDbnz9qJ+ak1S+anMre/iIhID7nyIs8CnSrRcq61bmo+ttNYpvYXERHpKSd3R94anyvepWORNWtFREROPYr8LGNrRURETj2K/Cxja0VERE49ivwsY2tFREROPYr8LGNrRURETj2K/Cxja0VERE49J1fkkXJurnjHjrPP8UVERHrJlRd5FGetlam5yNh8jpdamZoTERHpJUe7IxcREZH9o8hFREQ6jiIXERHpOIpcRESk4yhyERGRjnMlRQ4AHE6rf8esLnIA4HQocgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDomCIHgI4pcgDo2FmRf1dzAgA4fZvv+ro/05wAAE6fH60DQMcUOQB0bPNn7rmnOQEAnL7NPff8keYEAHD6zorcHTkA9GrzXV/njhwAeuUvuwFAx7oo8s1ms9Wauwq7nH/NPodaC8D1180deZZXFlmtXn/Z1p5j7XUdai0A11t3RV4/nxq7TMc4/tg5D30tAPRDkS90jOOPnfPQ1wJAP3Yu8iiT0tL5crs1X69rrSmft7ZzrN6vHJ9aU8+Va+rn9Vi9b47VyjX12qm5nK/XlfMA3D12KvKxYhnbrsfi+dQ+S/dP5bqcn9ueWlPP1WP5vH6srRlfOpbj9dzYWgCut0sp8lprvhy77PnW+hRzS9aXY0vn68famvGlY2PjY2sBuN4u5UfrU3Olcr5cX4/tO5/bOdaaK7frsaXz9WNtzfjSsbHxsbUAXG+X8pfd6hKZK5W5Irrs+bntemxuvtxurU1jc0uOPzY2Nj62FoDr7Wh/Rl7O1WOt4+26f71vPd8aa60fO0Y9Xhqbax2rtbYcG3s+NQbA9bdzkZfWrNl1rNxuyf3q/cee5/bSsdZ8+VjKtaWpNeX22Lp6e24MgLvDpfxoHQA4DkUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1bXeQ3b94EAA6o1b9jdipyEREROUwUuYiISMdR5CIiIh1HkYuIiHQcRS4iItJxFLmIiEjHUeQiIiId5yhFvtlsLqgzNz+Vet80lqm5qcztN3feuSw5/ljy3EvOv2RNK0uPXyb3qYmIyO658iJvfXCXY3Pzc1m7ds36SO4ztV85d9nHXzJfZmxdZOo4Uyn3Wbt/a/0u1yAiIreiyFesLzO2X2t8l3PM7XMZ54/xufPUWXP8VvbdX0RELubKi7yVuQ/ysQ//qfFSKzk+NT82F5k7bpmp44xlbp99z59jc+eps/T4Y6nXltvxPLfzeTmfKeda8yIid1OOXuRzH8Rj82Mf4kvGyu3W+kiMj81FpvarM3Wcsczts/T8sd0ay4wdZyyt9WuOEWtLdVrj5fbUnIjI3ZijFvnch/BlfUgfogjG9muN73KOuX2m5mMu5Xam3q/enktr/ZpjzJ1/7vhrziUicjfkaEU+94F8mR/YdRGMWZOx9a3xtceOzO2z5pjl2ng+Zkla65buG5nbf8nxYzuJiNztOUqRz30A7/MB3dp36ni7nmtsv7XnH8vcPmuOObV27bW11u97LeXY2uOvObeIyHXMlRf5ZX2Qx9iatWMZmxs7fmbp3NS6qcztd1nnr+dje80+c2vrtNbXx6vX1PNl6m0RkbstRynylkxrLtQZG4+U++26Zm681MrU3FTK47aOMTefmZqLlPuX6+rtsSxdVyb3qZXJ7an5sTkRkbsxV17kIlNRziIi66LI5WTiTltEZH0UuYiISMdR5CIiIh1HkYuIiHScKylyAOBwWv07ZnWRAwCnQ5EDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcUOQB0TJEDQMcU+QKbzWarNTdmzT6HWgvA9dddkWeR1VprL9Pac6y9rkOtBeB66/KOvFVkhy63Yxx/7JyHvhYA+qHIFzrG8cfOeehrAaAfq4s8SiS1tlvr6rnWmrGxejvH8nlrO8fq/crxqTX1XLmmfl6P1fvmWK1cU6+dmsv5el05D8DdY+c78rpAxp6PjU1tL1lbKudyfm57ak09V4/l8/qxtmZ86ViO13NjawG43vYq8tZ4aM2VY3OlU8+v3S7F3JL15djS+fqxtmZ86djY+NhaAK63gxV5Szlfrm/JNa21S8Zie+wYc/svna8fa2vGl46NjY+tBeB6u7I78tKS0sk1rbVzY/X83HY9NjdfbrfWprG5JccfGxsbH1sLwPV2lB+tL9keGxsbL8fq5/X6Nfvn9tgx6vHS2FzrWK215djY86kxAK6/1UUehVFbsm5uzdh8a6xlbN3Y89xeOtaaLx9LubY0tabcHltXb8+NAXB32PmOHAA4PkUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1T5ADQMUUOAB1bXeQ3b94EAA6o1b9jdipyEREROUxWF/l9993XnBijyEVERA4Xd+QiIiIdZ3WR33///c2JMYpcRETkcFHkIiIiHWd1kb/sZS9rToxR5CIiIoeLIhcREek4RynyzWZzQZ25+anU+6axTM1NZW6/ufNOJfcd27+cb62Zm49MzZVZsqaVpccvk/vURERkPKuL/KUvfWlzYkxd5K0P5nJsbn4ua9euWR/Jfab2K+d2OX6Zue3I3PmmjtFan4m5qfmxLD1+K631u1yDiMjdEkW+Yn2Zsf1a42uvqU45duj5MjE+NjeWNcdvZd/9RUTutqwu8nte8OebE2PqIm9l7oN67MN9arzUSo5PzY/NReaOW2bqOHXm9l97/Hpu6f45NnXsVpYefyz12nI7nud2Pi/nM+Vca15E5DpldZH/+Rfc05wYM1fkcx+0Y/NjH9JLxsrt1vpIjI/NRab2qzN1nDr12tgeG2vNZcbmloyV2631U1l6zrHE2lKd1ni5PTUnInIds7rIX/LXL++OfO5D9rI+hA/xQT+2X2t87TlifcrtMuV2PVdnat/M1PHmjl9n7vhzmTv/3PHXnEtE5DpkdZHfc8/l3JHPfeBe5gdy/UE/Zk3G1rfG1x67Trn/Lsdfs388H7MkrXVL943M7b/k+LGdRESue9bfkb/kJc2JMa0in/uA3ecDuLXv1PF2PdfYfmvPvyTl/nPH33e+ztRcK2uPX2du/7XHX3NuEZEes7rIX/ziFzcnxtRFflkf1DG2Zu1YxubGjp9ZOje1bixT+7eON3e+qWO01pdp7btmn7m1dVrr6+PVa+r5MvW2iMh1y/oi/2tf25wY0yrylkxrLtQZG4+U++26Zm681MrU3JIsOfbYmrn5yNRcpNy/XFdvj2XpujK5T61Mbk/Nj82JiFzHrC7ye16wX5GL7BPlLCJyMauL/EUvelFzYowil8uKO20RkTujyEVERDqOIhcREek4q4v8xo0bzYkxilxERORwWV3k9913X3NiTJwAADicVv+O2TzwwAPNCQDg9ClyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjilyAOiYIgeAjt0u8ocffhgA6MgdRf7Rj350+JIv+RKPHj169OjR44k/Nos8JwGA0xV9PXpHDgCcPnfkANApd+QA0Dl35ADQKXfkANA5d+QA0Cl35ADQOXfkcA1tNpvmOHC9uCOHa0qRw93DHTl0Jkq6NDVXz9frxsbyeb0GOC3uyKEzdbGOFe1UAZdzreO1xspt4LS4I4eOLC3VsXWt8XJsbh44Le7IoUNRrKk1H8bmWuPl2Nw8cHrckUPH1hT22Hg5NjcPnBZ35NCZulTHSnaqnOfmptYDp8cdOXQki7ZVuLWpNWNzOZbzrTXA6XBHDlyguKE/7siBLXfh0B935ADQOXfkANApd+QA0LnJO3KPHj169OjR42k/NoscAOjHhSIHAPqjyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgY4ocADqmyAGgAx/60IduK8cVOQB0QJEDQMcUOQBcQ4ocAE5QfQdebydFDgAnqC7uejspcgA4QXVx19tJkQNAxxQ5AJyIqTvwejspcgA4EVPFXW8nRQ4AJ2KquOvtpMgBoGOKHAC69cTw/wOta3amV9eNmgAAAABJRU5ErkJggg==\" alt=\"avatar\"></p>\n"},{"title":"Python程序设计课程大作业","url":"/2020/12/28/py9-2018211308-2018211430-%E5%91%A8%E7%91%9E%E5%8F%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"Python程序设计课程大作业\"><a href=\"#Python程序设计课程大作业\" class=\"headerlink\" title=\"Python程序设计课程大作业\"></a>Python程序设计课程大作业</h1><p>班级：2018211308</p>\n<p>学号：2018211430</p>\n<p>姓名：周瑞发</p>\n<h1 id=\"本地系统\"><a href=\"#本地系统\" class=\"headerlink\" title=\"本地系统\"></a>本地系统</h1><p>【文字描述】</p>\n<p>local-proxy提供socks5和http-tunnel服务，接收来自客户端的请求。同时为了方便用户操作，提供了图形界面供用户登录连接。</p>\n<h2 id=\"SOCKS5服务\"><a href=\"#SOCKS5服务\" class=\"headerlink\" title=\"SOCKS5服务\"></a>SOCKS5服务</h2><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socks5</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    addr_from = writer.get_extra_info(<span class=\"string\">&#x27;peername&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;connect from<span class=\"subst\">&#123;addr_from&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    header = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    header = first + header</span><br><span class=\"line\">    ver, num_method = struct.unpack(<span class=\"string\">&quot;!BB&quot;</span>, header)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;ver == VERSION:<span class=\"subst\">&#123;ver == VERSION&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;num_method = %d&#x27;</span> % num_method)</span><br><span class=\"line\">    methods = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(num_method):</span><br><span class=\"line\">        methods.append(ord(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> methods:<span class=\"comment\">#无需认证</span></span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"comment\">#回应一个数据包，包括协议版本号，指定认证方法</span></span><br><span class=\"line\">    writer.write(struct.pack(<span class=\"string\">&quot;!BB&quot;</span>, VERSION, <span class=\"number\">0</span>))</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>)</span><br><span class=\"line\">    ver, cmd, rsv, atype = struct.unpack(<span class=\"string\">&quot;!BBBB&quot;</span>, request)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> ver == VERSION</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> cmd == <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\">#ipv4</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> atype == <span class=\"number\">1</span>:</span><br><span class=\"line\">        address = socket.inet_ntoa(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>))</span><br><span class=\"line\">    <span class=\"comment\">#域名</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">3</span>:</span><br><span class=\"line\">        domain_length = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">        address = <span class=\"keyword\">await</span> reader.read(domain_length[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#ipv6</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">4</span>:</span><br><span class=\"line\">        address = socket.inet_ntop(socket.AF_INET6, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">16</span>))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    port = struct.unpack(<span class=\"string\">&#x27;!H&#x27;</span>, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">2</span>))</span><br><span class=\"line\">    reply = struct.pack(<span class=\"string\">&quot;!BBBBIH&quot;</span>, VERSION, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    print(address.decode(), str(port[<span class=\"number\">0</span>]))</span><br><span class=\"line\">    <span class=\"comment\"># 得到了地址和端口号，sock5连接建立完成,然后调用函数，与remote-proxy连接</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> xfer_remote(reader, writer, address.decode(), str(port[<span class=\"number\">0</span>]))</span><br></pre></td></tr></table></figure>\n\n<p>【文字描述】</p>\n<p>1、根据socks5协议，首先收到客户端发送过来的协议版本及认证方式，格式为</p>\n<table>\n<thead>\n<tr>\n<th>VER</th>\n<th>NMETHODS</th>\n<th>METHODS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>1</td>\n<td>1TO255</td>\n</tr>\n</tbody></table>\n<p>第一个字段如果是0x05，则表示为socks5协议</p>\n<p>第二个字段表示支持的认证方式的数量</p>\n<p>第三个字段是一个数组，包含了支持的认证方式列表，我们只考虑了无需认证的方式，即METHOD为0x00</p>\n<p>2、local-proxy收到客户端的代理请求后，选择双方都支持的加密方式回复给客户端：</p>\n<table>\n<thead>\n<tr>\n<th>VER</th>\n<th>METHOD</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>1</td>\n</tr>\n</tbody></table>\n<p>我们这里回复的应该是5，0</p>\n<p>此时客户端收到服务端的响应请求后，双方握手完成，开始进行协议交互。</p>\n<p>3、认证结束后，客户端发送请求信息，服务端通过解析客户端发过来的请求，获取地址和端口号。</p>\n<p>4、获取地址和端口号之后，就可以与remote-proxy建立连接了</p>\n<h2 id=\"HTTPS隧道服务\"><a href=\"#HTTPS隧道服务\" class=\"headerlink\" title=\"HTTPS隧道服务\"></a>HTTPS隧道服务</h2><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">httptunnel</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = (first + http_connect).decode()</span><br><span class=\"line\">    <span class=\"comment\">#从http请求中解析出ip和端口号</span></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;:&#x27;</span>): </span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    domain_name = http_connect[<span class=\"number\">8</span> : i]</span><br><span class=\"line\">    j = i</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27; &#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    port = http_connect[i + <span class=\"number\">1</span> : j]</span><br><span class=\"line\">    reply = <span class=\"string\">&#x27;HTTP/1.1 200 OK\\r\\n\\r\\n&#x27;</span></span><br><span class=\"line\">    writer.write(reply.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> xfer_remote(reader, writer, domain_name, port)</span><br></pre></td></tr></table></figure>\n\n<p>【文字描述】</p>\n<p>1、<code>CONNECT www.example.com:443 HTTP/1.1</code>http协议很简单，只需要从请求中解析出地址和端口号就可以了。</p>\n<p>2、回复<code>&#39;HTTP/1.1 200 OK\\r\\n\\r\\n&#39;</code>表明连接建立成功，注意一定要加上<code>\\r\\n\\r\\n</code></p>\n<p>3、连接建立好后，就可以与remote-proxy通信了</p>\n<h2 id=\"与远端模块通信\"><a href=\"#与远端模块通信\" class=\"headerlink\" title=\"与远端模块通信\"></a>与远端模块通信</h2><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xfer_remote</span>(<span class=\"params\">reader, writer, address, port</span>):</span></span><br><span class=\"line\">    <span class=\"comment\">#与remote通信的协议是自己定的，为了方便，我直接使用了http协议</span></span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(<span class=\"string\">&#x27;123.56.111.64&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">    http_connect = <span class=\"string\">&#x27;CONNECT &#x27;</span> + address + <span class=\"string\">&#x27;:&#x27;</span> + port + <span class=\"string\">&#x27; HTTP/1.1&#x27;</span></span><br><span class=\"line\">    http_connect += <span class=\"string\">&#x27; %&#x27;</span> + username + <span class=\"string\">&#x27;%&#x27;</span> + password + <span class=\"string\">&#x27;%&#x27;</span></span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\">    writer_remote.write(http_connect.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">    reply = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">1024</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"string\">&#x27;HTTP/1.1 200 OK&#x27;</span> <span class=\"keyword\">in</span> reply.decode()):<span class=\"comment\">#与remote连接建立成功</span></span><br><span class=\"line\">        tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;connect to remote failed!&#x27;</span>)</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br></pre></td></tr></table></figure>\n\n<p>【文字描述】</p>\n<p>1、local-proxy与remote-proxy之间的通信协议是自己制定的，为了方便，我这里直接使用了http协议。</p>\n<p>2、该函数与remote-proxy建立连接后，得到reader_remote和writer_remote。我们的目标是，将从本地reader读到的信息写进writer_remote，将reader_remote读到的信息写进本地writer。</p>\n<p>3、建立一个task，使从远端读和像远端写并发执行。<code>tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</code></p>\n<p>4、read_trans是用来将本地读到的消息转发给远端，write_trans是将从远端读到的消息转发给本地</p>\n<h2 id=\"图形管理界面\"><a href=\"#图形管理界面\" class=\"headerlink\" title=\"图形管理界面\"></a>图形管理界面</h2><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainWindow</span>(<span class=\"params\">QtWidgets.QMainWindow</span>):</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, parent=None</span>):</span></span><br><span class=\"line\">        super(MainWindow,self).__init__(parent)</span><br><span class=\"line\">        uic.loadUi(<span class=\"string\">&quot;mainwindow.ui&quot;</span>, self) <span class=\"comment\"># 加载界面</span></span><br><span class=\"line\">        self.pushButton.clicked.connect(self.startClicked)</span><br><span class=\"line\">        </span><br><span class=\"line\">        self.process = QProcess()</span><br><span class=\"line\">        self.process.setProcessChannelMode(QProcess.MergedChannels)</span><br><span class=\"line\">        self.process.finished.connect(self.processFinished)<span class=\"comment\">#当进程结束，触发processFinished</span></span><br><span class=\"line\">        self.process.started.connect(self.processStarted)<span class=\"comment\"># 当进程已经开始了，触发processStarted</span></span><br><span class=\"line\">        self.process.readyReadStandardOutput.connect(self.processReadyRead) <span class=\"comment\">#信号 如果stdio有输入，那么执行processReadyRead</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">processReadyRead</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        data = self.process.readAll()</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            msg = data.data().decode().strip()</span><br><span class=\"line\">            logging.debug(<span class=\"string\">f&#x27;msg=<span class=\"subst\">&#123;msg&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> exc:</span><br><span class=\"line\">            logging.error(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;traceback.format_exc()&#125;</span>&#x27;</span>)</span><br><span class=\"line\">            exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">processStarted</span>(<span class=\"params\">self</span>):</span>  <span class=\"comment\">#进程开始后，调用该函数</span></span><br><span class=\"line\">        process = self.sender() <span class=\"comment\"># 此处等同于 self.process 只不过使用sender适应性更好</span></span><br><span class=\"line\">        processId = process.processId()</span><br><span class=\"line\">        logging.debug(<span class=\"string\">f&#x27;pid=<span class=\"subst\">&#123;processId&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        self.pushButton.setText(<span class=\"string\">&#x27;stop&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        self.websocket = QWebSocket()</span><br><span class=\"line\">        self.websocket.connected.connect(self.websocketConnected)</span><br><span class=\"line\">        self.websocket.disconnected.connect(self.websocketDisconnected)</span><br><span class=\"line\">        self.websocket.textMessageReceived.connect(self.websocketMsgRcvd) <span class=\"comment\">#当收到对方发的信息后</span></span><br><span class=\"line\">        self.websocket.open(QUrl(<span class=\"string\">f&#x27;ws://127.0.0.1:<span class=\"subst\">&#123;self.consolePortLine.text()&#125;</span>/&#x27;</span>)) <span class=\"comment\">#打开websocket连接，里面是端口号</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">startClicked</span>(<span class=\"params\">self</span>):</span>  <span class=\"comment\">#当点击开始按钮时</span></span><br><span class=\"line\">        btn = self.sender()</span><br><span class=\"line\">        text = btn.text().lower()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> text.startswith(<span class=\"string\">&#x27;start&#x27;</span>):</span><br><span class=\"line\">            listenPort = self.listenPortLine.text()  <span class=\"comment\">#本地端口10086</span></span><br><span class=\"line\">            username = self.usernameLine.text()      <span class=\"comment\">#用户名</span></span><br><span class=\"line\">            password = self.passwordLine.text()      <span class=\"comment\">#密码</span></span><br><span class=\"line\">            consolePort = self.consolePortLine.text() <span class=\"comment\">#websockts端口</span></span><br><span class=\"line\">            remoteHost = self.remoteHostLine.text() <span class=\"comment\">#远程主机ip</span></span><br><span class=\"line\">            remotePort = self.remotePortLine.text() <span class=\"comment\">#远程主机端口</span></span><br><span class=\"line\">            pythonExec = os.path.basename(sys.executable)</span><br><span class=\"line\">            cmdLine = <span class=\"string\">f&#x27;<span class=\"subst\">&#123;pythonExec&#125;</span> local-proxy.py -p <span class=\"subst\">&#123;listenPort&#125;</span> -u <span class=\"subst\">&#123;username&#125;</span> -w <span class=\"subst\">&#123;password&#125;</span> -k <span class=\"subst\">&#123;consolePort&#125;</span> <span class=\"subst\">&#123;remoteHost&#125;</span> <span class=\"subst\">&#123;remotePort&#125;</span>&#x27;</span></span><br><span class=\"line\">            logging.info(cmdLine)</span><br><span class=\"line\">            logging.debug(<span class=\"string\">f&#x27;cmd=<span class=\"subst\">&#123;cmdLine&#125;</span>&#x27;</span>)</span><br><span class=\"line\">            self.process.start(cmdLine)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.process.kill()</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">processFinished</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        process = self.sender()</span><br><span class=\"line\">        log.debug(<span class=\"string\">f&#x27;pid=<span class=\"subst\">&#123;process.processId()&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        self.startBtn.setText(<span class=\"string\">&#x27;Start&#x27;</span>)</span><br><span class=\"line\">        self.processIdLine.setText(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">websocketConnected</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        self.websocket.sendTextMessage(<span class=\"string\">&#x27;connect successful&#x27;</span>) <span class=\"comment\">#连接建立后发送</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">websocketDisconnected</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        self.process.kill()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">websocketMsgRcvd</span>(<span class=\"params\">self, msg</span>):</span></span><br><span class=\"line\">        logging.debug(<span class=\"string\">f&#x27;msg=<span class=\"subst\">&#123;msg&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        sendBandwidth, recvBandwidth, *_ = msg.split()</span><br><span class=\"line\">        nowTime = QDateTime.currentDateTime().toString(<span class=\"string\">&#x27;hh:mm:ss&#x27;</span>)</span><br><span class=\"line\">        logging.info(sendBandwidth)</span><br><span class=\"line\">        logging.info(recvBandwidth)</span><br><span class=\"line\">        self.sendBandwidthLine.setText(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;nowTime&#125;</span> <span class=\"subst\">&#123;sendBandwidth&#125;</span> Bps&#x27;</span>)</span><br><span class=\"line\">        self.lineEdit_2.setText(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;nowTime&#125;</span> <span class=\"subst\">&#123;recvBandwidth&#125;</span> Bps&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>【文字描述】</p>\n<p>1、界面使用QT的designer设计的，然后将其转换为python的ui代码，<code>uic.loadUi(&quot;mainwindow.ui&quot;, self) # 加载界面</code>加载ui文件，将设计好的界面导入。</p>\n<p>2、当点击开始按钮时，会触发信号startClicked，该函数会打开local-proxy.py程序<code>self.process.start(cmdLine)</code>，当程序开始运行时，又会触发信号processStarted，该函数在界面模块和local-proxy之间建立websocket连接，之后在界面进行的操作就可以发送给local-proxy了。</p>\n<p>3、websocket负责与local-proxy通信，将用户信息发送给local-proxy，然后接收来自local-proxy的速率。</p>\n<h1 id=\"远端系统\"><a href=\"#远端系统\" class=\"headerlink\" title=\"远端系统\"></a>远端系统</h1><p>【文字描述】</p>\n<p>remote-proxy接收来自local-proxy的连接，验证local-proxy的用户，并且提供了流控措施。同时，为了方便对用户数据库的管理，，提供了用户数据库的REST管理接口。</p>\n<h2 id=\"与本地模块通信\"><a href=\"#与本地模块通信\" class=\"headerlink\" title=\"与本地模块通信\"></a>与本地模块通信</h2><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">handle</span>(<span class=\"params\">reader_local, writer_local</span>):</span></span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;start working&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(<span class=\"string\">&#x27;user.db&#x27;</span>)</span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader_local.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = http_connect.decode()</span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\"></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;:&#x27;</span>): </span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    domain_name = http_connect[<span class=\"number\">8</span> : i]</span><br><span class=\"line\">    j = i</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27; &#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    port = http_connect[i + <span class=\"number\">1</span> : j]</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    j = i + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    k = j + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[k] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        k += <span class=\"number\">1</span></span><br><span class=\"line\">    username = http_connect[i + <span class=\"number\">1</span>: j]</span><br><span class=\"line\">    password = http_connect[j + <span class=\"number\">1</span>: k]</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;SELECT * FROM user where name = \\&#x27;&#x27;</span> + username + <span class=\"string\">&#x27;\\&#x27; and password = \\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;&#x27;</span></span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) != <span class=\"number\">1</span>):</span><br><span class=\"line\">        logging.error(<span class=\"string\">&#x27;wrong account&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;right account&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(username <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> username_to_token_bucket.keys()):<span class=\"comment\">#用户名不在dict中，要创建令牌桶</span></span><br><span class=\"line\">        username_to_token_bucket[username] = <span class=\"number\">0</span></span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;init bucket&#x27;</span>)</span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(domain_name,port)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select dataRate FROM user where name = \\&#x27;&#x27;</span> + username + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> </span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">    speed = row[<span class=\"number\">0</span>][<span class=\"number\">0</span>]</span><br><span class=\"line\">    reply = <span class=\"string\">&#x27;HTTP/1.1 200 OK\\r\\n\\r\\n&#x27;</span></span><br><span class=\"line\">    writer_local.write(reply.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_local.drain()</span><br><span class=\"line\"></span><br><span class=\"line\">    tasks = [read_trans(reader_local, writer_remote), write_trans(reader_remote, writer_local, username, speed)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks,return_when=asyncio.FIRST_COMPLETED)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect from clinet&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer, username, speed</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    data = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(data == <span class=\"string\">&#x27;&#x27;</span>):</span><br><span class=\"line\">            data = <span class=\"keyword\">await</span> reader_remote.read(int(<span class=\"number\">0.01</span> * speed))<span class=\"comment\"># 10.01s    speed  Bytes/s</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect from server&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(username_to_token_bucket[username] &lt; <span class=\"number\">10</span>):<span class=\"comment\">#如果桶里的令牌不够那么就等待，注意，这里用了asyncio.sleep(0)</span></span><br><span class=\"line\">            <span class=\"comment\"># 目的是让cpu去执行其他部分的代码，防止在此处阻塞</span></span><br><span class=\"line\">            <span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:<span class=\"comment\">#令牌够了，把data发出去，同时把data清空</span></span><br><span class=\"line\">            username_to_token_bucket[username] -= <span class=\"number\">10</span></span><br><span class=\"line\">            writer.write(data)</span><br><span class=\"line\">            <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">            data = <span class=\"string\">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>【文字描述】</p>\n<p>1、local-proxy和remote-proxy之间的通信协议是自己定的，我这里直接使用了http协议。</p>\n<p>2、在收到local-proxy的消息后，从消息中解析出地址、端口号、用户名和密码。</p>\n<p>3、然后进行用户名密码验证，验证通过之后，从数据库中查询该用户的速率。</p>\n<p>4、向local-proxy回复<code>&#39;HTTP/1.1 200 OK\\r\\n\\r\\n&#39;</code>，表明连接建立成功</p>\n<p>5、接下来local-proxy和remote-proxy就可以进行通信了。</p>\n<p>6、在remote-proxy向local-proxy发送数据时，要在此处执行限速。只有当令牌的数量足够，才会发送数据包，这也就实现了下载限速。</p>\n<h2 id=\"多用户管理\"><a href=\"#多用户管理\" class=\"headerlink\" title=\"多用户管理\"></a>多用户管理</h2><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    asyncio.create_task(token_bucket_plus_one())</span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(handle, <span class=\"string\">&#x27;0.0.0.0&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br></pre></td></tr></table></figure>\n\n<p>【文字描述】</p>\n<p>1、利用start_server函数，监听来自所有IP地址对端口10010的连接。</p>\n<p>2、连接建立后回调handle函数，在handle函数对连接进行处理</p>\n<p>3、每来一个用户，就会新建一个连接并且调用handle函数，这样就实现了多用户管理。</p>\n<h2 id=\"用户流控\"><a href=\"#用户流控\" class=\"headerlink\" title=\"用户流控\"></a>用户流控</h2><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer, username, speed</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    data = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(data == <span class=\"string\">&#x27;&#x27;</span>):</span><br><span class=\"line\">            data = <span class=\"keyword\">await</span> reader_remote.read(int(<span class=\"number\">0.01</span> * speed))<span class=\"comment\"># 10.01s    speed  Bytes/s</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect from server&#x27;</span>)</span><br><span class=\"line\">            username_to_token_bucket.pop(username)<span class=\"comment\">#去掉该用户</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(username_to_token_bucket[username] &lt; <span class=\"number\">10</span>):<span class=\"comment\">#如果桶里的令牌不够那么就等待，注意，这里用了asyncio.sleep(0)</span></span><br><span class=\"line\">            <span class=\"comment\"># 目的是让cpu去执行其他部分的代码，防止在此处阻塞</span></span><br><span class=\"line\">            <span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:<span class=\"comment\">#令牌够了，把data发出去，同时把data清空</span></span><br><span class=\"line\">            username_to_token_bucket[username] -= <span class=\"number\">10</span></span><br><span class=\"line\">            writer.write(data)</span><br><span class=\"line\">            <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">            data = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">token_bucket_plus_one</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> username_to_token_bucket.keys():<span class=\"comment\"># 每1秒可以攒够1000个令牌，所以平均速率为100KB/s</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> username_to_token_bucket[k] &lt; <span class=\"number\">10000</span>:</span><br><span class=\"line\">                username_to_token_bucket[k] += <span class=\"number\">10</span></span><br><span class=\"line\">                print(username_to_token_bucket[k])</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">0.01</span>)</span><br></pre></td></tr></table></figure>\n\n<p>【文字描述】</p>\n<p>1、username_to_token_bucket是一个dict，键为用户名，因为用户名是唯一的，值是该用户对应的令牌桶。</p>\n<p>2、为token_bucket_plus_one创建一个task，每隔一定时间将所有用户对应的令牌桶里令牌的数量加一</p>\n<p>3、限速发生在下载时。当有数据发过来时，不会立即发送到local-proxy，而是等待令牌的数量，只有令牌数量够了，才会将数据转发出去。</p>\n<p>4、每个用户都会建立一个连接，向local-proxy转发数据时，首先根据用户名创建相应的令牌桶，然后根据该用户的限制速度来进行限速。</p>\n<p>5、当用户断开连接时，要在username_to_token_bucket里去掉该用户。</p>\n<h2 id=\"用户数据库管理接口\"><a href=\"#用户数据库管理接口\" class=\"headerlink\" title=\"用户数据库管理接口\"></a>用户数据库管理接口</h2><figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.exception(exceptions.NotFound)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">ignore_404</span>(<span class=\"params\">req, exc</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.text(<span class=\"string\">&#x27;err_url&#x27;</span>, status=<span class=\"number\">404</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 获得所有用户信息</span></span><br><span class=\"line\"><span class=\"meta\">@app.get(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">userList</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    userList = list()</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select name, password, dataRate from user;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> aiosqlite.connect(app.config.DB_NAME) <span class=\"keyword\">as</span> db:</span><br><span class=\"line\">        cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">        <span class=\"keyword\">async</span> <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> cursor:</span><br><span class=\"line\">            user = &#123;<span class=\"string\">&#x27;name&#x27;</span> : row[<span class=\"number\">0</span>], <span class=\"string\">&#x27;password&#x27;</span> : row[<span class=\"number\">1</span>], <span class=\"string\">&#x27;dataRate:&#x27;</span> : row[<span class=\"number\">2</span>]&#125;</span><br><span class=\"line\">            logging.debug(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;user&#125;</span>&#x27;</span>)</span><br><span class=\"line\">            userList.append(user)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(userList)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新用户信息</span></span><br><span class=\"line\"><span class=\"meta\">@app.put(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">updateUserInfo</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    update_user_info = req.json</span><br><span class=\"line\">    name = update_user_info.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    password = update_user_info.get(<span class=\"string\">&#x27;password&#x27;</span>)</span><br><span class=\"line\">    dataRate = update_user_info.get(<span class=\"string\">&#x27;dataRate&#x27;</span>)</span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(app.config.DB_NAME)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select * from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span></span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) == <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;user not exist&quot;</span>&#125;)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;update user set password = \\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;, dataRate = &#x27;</span> + str(dataRate) + <span class=\"string\">&#x27; where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;update successful&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 增加用户信息</span></span><br><span class=\"line\"><span class=\"meta\">@app.post(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insertUserInfo</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    insert_user_info = req.json</span><br><span class=\"line\">    name = insert_user_info.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    password = insert_user_info.get(<span class=\"string\">&#x27;password&#x27;</span>)</span><br><span class=\"line\">    dataRate = insert_user_info.get(<span class=\"string\">&#x27;dataRate&#x27;</span>)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select * from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span>    </span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(app.config.DB_NAME)</span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) != <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;user already exist&quot;</span>&#125;)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;insert into user values(\\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;,\\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;,&#x27;</span> + str(dataRate) + <span class=\"string\">&#x27;);&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;insert successful&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#删除用户信息</span></span><br><span class=\"line\"><span class=\"meta\">@app.delete(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">deleteUserInfo</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    delete_user_info = req.json</span><br><span class=\"line\">    name = delete_user_info.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select * from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span>  </span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(app.config.DB_NAME)</span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) == <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;user not exist&quot;</span>&#125;)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;delete from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;delete successful&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>【文字描述】</p>\n<p>1、通过不同的http请求来实现对用户数据库的增删改查，对应的http请求分别为post,delete,put,get。</p>\n<p>2、在进行删除、增加、更新用户数据时均有<strong>错误处理</strong>，例如，对于更新来说，首先查询待更新的用户是否存在，如果不存在，则返回错误信息，如果存在，则更新并且返回更新成功信息。</p>\n<h1 id=\"程序完整源码\"><a href=\"#程序完整源码\" class=\"headerlink\" title=\"程序完整源码\"></a>程序完整源码</h1><p>【此处根据个人具体情况粘贴程序源码，可以是单个文件或多个文件，但是只限于自己编写的源程序】</p>\n<p>local.py </p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> getopt</span><br><span class=\"line\">VERSION = <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socks5</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    addr_from = writer.get_extra_info(<span class=\"string\">&#x27;peername&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;connect from<span class=\"subst\">&#123;addr_from&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    header = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    header = first + header</span><br><span class=\"line\">    ver, num_method = struct.unpack(<span class=\"string\">&quot;!BB&quot;</span>, header)</span><br><span class=\"line\">    logging.info(<span class=\"string\">f&#x27;ver == VERSION:<span class=\"subst\">&#123;ver == VERSION&#125;</span>&#x27;</span>)</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;num_method = %d&#x27;</span> % num_method)</span><br><span class=\"line\">    methods = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(num_method):</span><br><span class=\"line\">        methods.append(ord(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"number\">0</span> <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> methods:<span class=\"comment\">#无需认证</span></span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"comment\">#回应一个数据包，包括协议版本号，指定认证方法</span></span><br><span class=\"line\">    writer.write(struct.pack(<span class=\"string\">&quot;!BB&quot;</span>, VERSION, <span class=\"number\">0</span>))</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    request = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>)</span><br><span class=\"line\">    ver, cmd, rsv, atype = struct.unpack(<span class=\"string\">&quot;!BBBB&quot;</span>, request)</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> ver == VERSION</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> cmd == <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\">#ipv4</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> atype == <span class=\"number\">1</span>:</span><br><span class=\"line\">        address = socket.inet_ntoa(<span class=\"keyword\">await</span> reader.read(<span class=\"number\">4</span>))</span><br><span class=\"line\">    <span class=\"comment\">#域名</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">3</span>:</span><br><span class=\"line\">        domain_length = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">        address = <span class=\"keyword\">await</span> reader.read(domain_length[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#ipv6</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> atype == <span class=\"number\">4</span>:</span><br><span class=\"line\">        address = socket.inet_ntop(socket.AF_INET6, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">16</span>))</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        writer.close()</span><br><span class=\"line\">        writer.wait_closed()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    port = struct.unpack(<span class=\"string\">&#x27;!H&#x27;</span>, <span class=\"keyword\">await</span> reader.read(<span class=\"number\">2</span>))</span><br><span class=\"line\">    reply = struct.pack(<span class=\"string\">&quot;!BBBBIH&quot;</span>, VERSION, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    writer.write(reply)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    logging.info(address.decode(), str(port[<span class=\"number\">0</span>]))</span><br><span class=\"line\">    <span class=\"comment\"># 得到了地址和端口号，sock5连接建立完成,然后调用函数，与remote-proxy连接</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> xfer_remote(reader, writer, address.decode(), str(port[<span class=\"number\">0</span>]))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">httptunnel</span>(<span class=\"params\">first, reader, writer</span>):</span></span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = (first + http_connect).decode()</span><br><span class=\"line\">    <span class=\"comment\">#从http请求中解析出ip和端口号</span></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;:&#x27;</span>): </span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    domain_name = http_connect[<span class=\"number\">8</span> : i]</span><br><span class=\"line\">    j = i</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27; &#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    port = http_connect[i + <span class=\"number\">1</span> : j]</span><br><span class=\"line\">    reply = <span class=\"string\">&#x27;HTTP/1.1 200 OK\\r\\n\\r\\n&#x27;</span></span><br><span class=\"line\">    writer.write(reply.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> xfer_remote(reader, writer, domain_name, port)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">xfer_remote</span>(<span class=\"params\">reader, writer, address, port</span>):</span></span><br><span class=\"line\">    <span class=\"comment\">#与remote通信的协议是自己定的，为了方便，我直接使用了http协议</span></span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(<span class=\"string\">&#x27;123.56.111.64&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">    http_connect = <span class=\"string\">&#x27;CONNECT &#x27;</span> + address + <span class=\"string\">&#x27;:&#x27;</span> + port + <span class=\"string\">&#x27; HTTP/1.1&#x27;</span></span><br><span class=\"line\">    http_connect += <span class=\"string\">&#x27; %&#x27;</span> + username + <span class=\"string\">&#x27;%&#x27;</span> + password + <span class=\"string\">&#x27;%&#x27;</span></span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\">    writer_remote.write(http_connect.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\">    reply = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">1024</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"string\">&#x27;HTTP/1.1 200 OK&#x27;</span> <span class=\"keyword\">in</span> reply.decode()):<span class=\"comment\">#与remote连接建立成功</span></span><br><span class=\"line\">        tasks = [read_trans(reader, writer_remote), write_trans(reader_remote, writer)]</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.wait(tasks)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;connect to remote failed!&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader_remote.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">        writer.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start</span>(<span class=\"params\">reader, writer</span>):</span></span><br><span class=\"line\">    first = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(first == <span class=\"string\">b&#x27;\\x05&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> socks5(first, reader, writer)</span><br><span class=\"line\">    <span class=\"keyword\">elif</span>(first == <span class=\"string\">b&#x27;C&#x27;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> httptunnel(first, reader, writer)</span><br><span class=\"line\"></span><br><span class=\"line\">username = str()</span><br><span class=\"line\">password = str()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username, password</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(sys.argv) != <span class=\"number\">3</span>):</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;usage: local-proxy.py username, password&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        username = sys.argv[<span class=\"number\">1</span>]</span><br><span class=\"line\">        password = sys.argv[<span class=\"number\">2</span>]</span><br><span class=\"line\">    logging.info(username)</span><br><span class=\"line\">    logging.info(password)</span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(start, <span class=\"string\">&#x27;127.0.0.1&#x27;</span>, <span class=\"number\">10086</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\">        </span><br><span class=\"line\">asyncio.run(main())</span><br></pre></td></tr></table></figure>\n\n<p>localGui.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtCore <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtGui <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtNetwork <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWebSockets <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> mainwindow <span class=\"keyword\">import</span> Ui_MainWindow</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5 <span class=\"keyword\">import</span> QtWidgets, uic</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> humanfriendly</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainWindow</span>(<span class=\"params\">QtWidgets.QMainWindow</span>):</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, parent=None</span>):</span></span><br><span class=\"line\">        super(MainWindow,self).__init__(parent)</span><br><span class=\"line\">        uic.loadUi(<span class=\"string\">&quot;mainwindow.ui&quot;</span>, self) <span class=\"comment\"># 加载界面</span></span><br><span class=\"line\">        self.pushButton.clicked.connect(self.startClicked)</span><br><span class=\"line\">        </span><br><span class=\"line\">        self.process = QProcess()</span><br><span class=\"line\">        self.process.setProcessChannelMode(QProcess.MergedChannels)</span><br><span class=\"line\">        self.process.finished.connect(self.processFinished)<span class=\"comment\">#当进程结束，触发processFinished</span></span><br><span class=\"line\">        self.process.started.connect(self.processStarted)<span class=\"comment\"># 当进程已经开始了，触发processStarted</span></span><br><span class=\"line\">        self.process.readyReadStandardOutput.connect(self.processReadyRead) <span class=\"comment\">#信号 如果stdio有输入，那么执行processReadyRead</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">processReadyRead</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        data = self.process.readAll()</span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            msg = data.data().decode().strip()</span><br><span class=\"line\">            logging.debug(<span class=\"string\">f&#x27;msg=<span class=\"subst\">&#123;msg&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> exc:</span><br><span class=\"line\">            logging.error(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;traceback.format_exc()&#125;</span>&#x27;</span>)</span><br><span class=\"line\">            exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">processStarted</span>(<span class=\"params\">self</span>):</span>  <span class=\"comment\">#进程开始后，调用该函数</span></span><br><span class=\"line\">        process = self.sender() <span class=\"comment\"># 此处等同于 self.process 只不过使用sender适应性更好</span></span><br><span class=\"line\">        processId = process.processId()</span><br><span class=\"line\">        logging.debug(<span class=\"string\">f&#x27;pid=<span class=\"subst\">&#123;processId&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        self.pushButton.setText(<span class=\"string\">&#x27;stop&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        self.websocket = QWebSocket()</span><br><span class=\"line\">        self.websocket.connected.connect(self.websocketConnected)</span><br><span class=\"line\">        self.websocket.disconnected.connect(self.websocketDisconnected)</span><br><span class=\"line\">        self.websocket.textMessageReceived.connect(self.websocketMsgRcvd) <span class=\"comment\">#当收到对方发的信息后</span></span><br><span class=\"line\">        self.websocket.open(QUrl(<span class=\"string\">f&#x27;ws://127.0.0.1:<span class=\"subst\">&#123;self.consolePortLine.text()&#125;</span>/&#x27;</span>)) <span class=\"comment\">#打开websocket连接，里面是端口号</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">startClicked</span>(<span class=\"params\">self</span>):</span>  <span class=\"comment\">#当点击开始按钮时</span></span><br><span class=\"line\">        btn = self.sender()</span><br><span class=\"line\">        text = btn.text().lower()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> text.startswith(<span class=\"string\">&#x27;start&#x27;</span>):</span><br><span class=\"line\">            listenPort = self.listenPortLine.text()  <span class=\"comment\">#本地端口10086</span></span><br><span class=\"line\">            username = self.usernameLine.text()      <span class=\"comment\">#用户名</span></span><br><span class=\"line\">            password = self.passwordLine.text()      <span class=\"comment\">#密码</span></span><br><span class=\"line\">            consolePort = self.consolePortLine.text() <span class=\"comment\">#websockts端口</span></span><br><span class=\"line\">            remoteHost = self.remoteHostLine.text() <span class=\"comment\">#远程主机ip</span></span><br><span class=\"line\">            remotePort = self.remotePortLine.text() <span class=\"comment\">#远程主机端口</span></span><br><span class=\"line\">            pythonExec = os.path.basename(sys.executable)</span><br><span class=\"line\">            cmdLine = <span class=\"string\">f&#x27;<span class=\"subst\">&#123;pythonExec&#125;</span> local-proxy.py -p <span class=\"subst\">&#123;listenPort&#125;</span> -u <span class=\"subst\">&#123;username&#125;</span> -w <span class=\"subst\">&#123;password&#125;</span> -k <span class=\"subst\">&#123;consolePort&#125;</span> <span class=\"subst\">&#123;remoteHost&#125;</span> <span class=\"subst\">&#123;remotePort&#125;</span>&#x27;</span></span><br><span class=\"line\">            print(cmdLine)</span><br><span class=\"line\">            logging.debug(<span class=\"string\">f&#x27;cmd=<span class=\"subst\">&#123;cmdLine&#125;</span>&#x27;</span>)</span><br><span class=\"line\">            self.process.start(cmdLine)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.process.kill()</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">processFinished</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        process = self.sender()</span><br><span class=\"line\">        log.debug(<span class=\"string\">f&#x27;pid=<span class=\"subst\">&#123;process.processId()&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        self.startBtn.setText(<span class=\"string\">&#x27;Start&#x27;</span>)</span><br><span class=\"line\">        self.processIdLine.setText(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">websocketConnected</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        self.websocket.sendTextMessage(<span class=\"string\">&#x27;connect successful&#x27;</span>) <span class=\"comment\">#连接建立后随便发的</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">websocketDisconnected</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        self.process.kill()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">websocketMsgRcvd</span>(<span class=\"params\">self, msg</span>):</span></span><br><span class=\"line\">        logging.debug(<span class=\"string\">f&#x27;msg=<span class=\"subst\">&#123;msg&#125;</span>&#x27;</span>)</span><br><span class=\"line\">        sendBandwidth, recvBandwidth, *_ = msg.split()</span><br><span class=\"line\">        nowTime = QDateTime.currentDateTime().toString(<span class=\"string\">&#x27;hh:mm:ss&#x27;</span>)</span><br><span class=\"line\">        logging.info(sendBandwidth)</span><br><span class=\"line\">        logging.info(recvBandwidth)</span><br><span class=\"line\">        self.sendBandwidthLine.setText(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;nowTime&#125;</span> <span class=\"subst\">&#123;sendBandwidth&#125;</span> Bps&#x27;</span>)</span><br><span class=\"line\">        self.lineEdit_2.setText(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;nowTime&#125;</span> <span class=\"subst\">&#123;recvBandwidth&#125;</span> Bps&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">app = QApplication(sys.argv)</span><br><span class=\"line\">app.aboutToQuit.connect(app.deleteLater)</span><br><span class=\"line\">form = MainWindow()</span><br><span class=\"line\">form.show()</span><br><span class=\"line\">app.exec_()</span><br></pre></td></tr></table></figure>\n\n<p>remote.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asyncio</span><br><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\">logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\"><span class=\"keyword\">import</span> nest_asyncio</span><br><span class=\"line\">nest_asyncio.apply()</span><br><span class=\"line\"><span class=\"keyword\">import</span> aiosqlite</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">handle</span>(<span class=\"params\">reader_local, writer_local</span>):</span></span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;start working&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(<span class=\"string\">&#x27;user.db&#x27;</span>)</span><br><span class=\"line\">    http_connect = (<span class=\"keyword\">await</span> reader_local.read(<span class=\"number\">1024</span>))</span><br><span class=\"line\">    http_connect = http_connect.decode()</span><br><span class=\"line\">    logging.info(http_connect)</span><br><span class=\"line\"></span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;:&#x27;</span>): </span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    domain_name = http_connect[<span class=\"number\">8</span> : i]</span><br><span class=\"line\">    j = i</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27; &#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    port = http_connect[i + <span class=\"number\">1</span> : j]</span><br><span class=\"line\">    i = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[i] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        i += <span class=\"number\">1</span></span><br><span class=\"line\">    j = i + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[j] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        j += <span class=\"number\">1</span></span><br><span class=\"line\">    k = j + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(http_connect[k] != <span class=\"string\">&#x27;%&#x27;</span>):</span><br><span class=\"line\">        k += <span class=\"number\">1</span></span><br><span class=\"line\">    username = http_connect[i + <span class=\"number\">1</span>: j]</span><br><span class=\"line\">    password = http_connect[j + <span class=\"number\">1</span>: k]</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;SELECT * FROM user where name = \\&#x27;&#x27;</span> + username + <span class=\"string\">&#x27;\\&#x27; and password = \\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;&#x27;</span></span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) != <span class=\"number\">1</span>):</span><br><span class=\"line\">        logging.error(<span class=\"string\">&#x27;wrong account&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;right account&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(username <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> username_to_token_bucket.keys()):<span class=\"comment\">#用户名不在dict中，要创建令牌桶</span></span><br><span class=\"line\">        username_to_token_bucket[username] = <span class=\"number\">0</span></span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;init bucket&#x27;</span>)</span><br><span class=\"line\">    reader_remote,writer_remote = <span class=\"keyword\">await</span> asyncio.open_connection(domain_name,port)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select dataRate FROM user where name = \\&#x27;&#x27;</span> + username + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> </span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">    speed = row[<span class=\"number\">0</span>][<span class=\"number\">0</span>]</span><br><span class=\"line\">    reply = <span class=\"string\">&#x27;HTTP/1.1 200 OK\\r\\n\\r\\n&#x27;</span></span><br><span class=\"line\">    writer_local.write(reply.encode())</span><br><span class=\"line\">    <span class=\"keyword\">await</span> writer_local.drain()</span><br><span class=\"line\"></span><br><span class=\"line\">    tasks = [read_trans(reader_local, writer_remote), write_trans(reader_remote, writer_local, username, speed)]</span><br><span class=\"line\">    <span class=\"keyword\">await</span> asyncio.wait(tasks,return_when=asyncio.FIRST_COMPLETED)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">read_trans</span>(<span class=\"params\">reader, writer_remote</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        data = <span class=\"keyword\">await</span> reader.read(<span class=\"number\">4096</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect from clinet&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        writer_remote.write(data)</span><br><span class=\"line\">        <span class=\"keyword\">await</span> writer_remote.drain()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_trans</span>(<span class=\"params\">reader_remote, writer, username, speed</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    data = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(data == <span class=\"string\">&#x27;&#x27;</span>):</span><br><span class=\"line\">            data = <span class=\"keyword\">await</span> reader_remote.read(int(<span class=\"number\">0.01</span> * speed))<span class=\"comment\"># 10.01s    speed  Bytes/s</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> data:</span><br><span class=\"line\">            logging.info(<span class=\"string\">&#x27;disconnect from server&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(username_to_token_bucket[username] &lt; <span class=\"number\">10</span>):<span class=\"comment\">#如果桶里的令牌不够那么就等待，注意，这里用了asyncio.sleep(0)</span></span><br><span class=\"line\">            <span class=\"comment\"># 目的是让cpu去执行其他部分的代码，防止在此处阻塞</span></span><br><span class=\"line\">            <span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:<span class=\"comment\">#令牌够了，把data发出去，同时把data清空</span></span><br><span class=\"line\">            username_to_token_bucket[username] -= <span class=\"number\">10</span></span><br><span class=\"line\">            writer.write(data)</span><br><span class=\"line\">            <span class=\"keyword\">await</span> writer.drain()</span><br><span class=\"line\">            data = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">token_bucket_plus_one</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> username_to_token_bucket</span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> username_to_token_bucket.keys():<span class=\"comment\"># 每1秒可以攒够1000个令牌，所以平均速率为100KB/s</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> username_to_token_bucket[k] &lt; <span class=\"number\">10000</span>:</span><br><span class=\"line\">                username_to_token_bucket[k] += <span class=\"number\">10</span></span><br><span class=\"line\">                print(username_to_token_bucket[k])</span><br><span class=\"line\">        <span class=\"keyword\">await</span> asyncio.sleep(<span class=\"number\">0.01</span>)</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span>():</span></span><br><span class=\"line\">    asyncio.create_task(token_bucket_plus_one())</span><br><span class=\"line\">    server = <span class=\"keyword\">await</span> asyncio.start_server(handle, <span class=\"string\">&#x27;0.0.0.0&#x27;</span>, <span class=\"number\">10010</span>)</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> server:</span><br><span class=\"line\">        <span class=\"keyword\">await</span> server.serve_forever()</span><br><span class=\"line\">username_to_token_bucket = &#123;&#125;</span><br><span class=\"line\">asyncio.run(main())</span><br></pre></td></tr></table></figure>\n\n<p>remoteRest.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sanic <span class=\"keyword\">import</span> Sanic</span><br><span class=\"line\"><span class=\"keyword\">from</span> sanic <span class=\"keyword\">import</span> response</span><br><span class=\"line\"><span class=\"keyword\">from</span> sanic <span class=\"keyword\">import</span> exceptions</span><br><span class=\"line\"><span class=\"keyword\">from</span> sanic.response <span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> aiosqlite</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"></span><br><span class=\"line\">app = Sanic(<span class=\"string\">&quot;RemoteProxyAdmin&quot;</span>)</span><br><span class=\"line\">app.config.DB_NAME = <span class=\"string\">&#x27;user.db&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.exception(exceptions.NotFound)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">ignore_404</span>(<span class=\"params\">req, exc</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.text(<span class=\"string\">&#x27;err_url&#x27;</span>, status=<span class=\"number\">404</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 获得所有用户信息</span></span><br><span class=\"line\"><span class=\"meta\">@app.get(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">userList</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    userList = list()</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select name, password, dataRate from user;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"keyword\">with</span> aiosqlite.connect(app.config.DB_NAME) <span class=\"keyword\">as</span> db:</span><br><span class=\"line\">        cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">        <span class=\"keyword\">async</span> <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> cursor:</span><br><span class=\"line\">            user = &#123;<span class=\"string\">&#x27;name&#x27;</span> : row[<span class=\"number\">0</span>], <span class=\"string\">&#x27;password&#x27;</span> : row[<span class=\"number\">1</span>], <span class=\"string\">&#x27;dataRate:&#x27;</span> : row[<span class=\"number\">2</span>]&#125;</span><br><span class=\"line\">            logging.debug(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;user&#125;</span>&#x27;</span>)</span><br><span class=\"line\">            userList.append(user)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(userList)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新用户信息</span></span><br><span class=\"line\"><span class=\"meta\">@app.put(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">updateUserInfo</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    update_user_info = req.json</span><br><span class=\"line\">    name = update_user_info.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    password = update_user_info.get(<span class=\"string\">&#x27;password&#x27;</span>)</span><br><span class=\"line\">    dataRate = update_user_info.get(<span class=\"string\">&#x27;dataRate&#x27;</span>)</span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(app.config.DB_NAME)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select * from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span></span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) == <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;user not exist&quot;</span>&#125;)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;update user set password = \\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;, dataRate = &#x27;</span> + str(dataRate) + <span class=\"string\">&#x27; where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;update successful&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 增加用户信息</span></span><br><span class=\"line\"><span class=\"meta\">@app.post(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insertUserInfo</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    insert_user_info = req.json</span><br><span class=\"line\">    name = insert_user_info.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    password = insert_user_info.get(<span class=\"string\">&#x27;password&#x27;</span>)</span><br><span class=\"line\">    dataRate = insert_user_info.get(<span class=\"string\">&#x27;dataRate&#x27;</span>)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select * from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span>    </span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(app.config.DB_NAME)</span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) != <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;user already exist&quot;</span>&#125;)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;insert into user values(\\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;,\\&#x27;&#x27;</span> + password + <span class=\"string\">&#x27;\\&#x27;,&#x27;</span> + str(dataRate) + <span class=\"string\">&#x27;);&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;insert successful&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#删除用户信息</span></span><br><span class=\"line\"><span class=\"meta\">@app.delete(&#x27;/user&#x27;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">deleteUserInfo</span>(<span class=\"params\">req</span>):</span></span><br><span class=\"line\">    delete_user_info = req.json</span><br><span class=\"line\">    name = delete_user_info.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;select * from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span>  </span><br><span class=\"line\">    db = <span class=\"keyword\">await</span> aiosqlite.connect(app.config.DB_NAME)</span><br><span class=\"line\">    cursor = <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    row = <span class=\"keyword\">await</span> cursor.fetchall()</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(len(row) == <span class=\"number\">0</span>):</span><br><span class=\"line\">        <span class=\"keyword\">await</span> cursor.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;user not exist&quot;</span>&#125;)</span><br><span class=\"line\">    sql = <span class=\"string\">&#x27;delete from user where name = \\&#x27;&#x27;</span> + name + <span class=\"string\">&#x27;\\&#x27;;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.execute(sql)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">await</span> db.close()    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;msg&quot;</span>:<span class=\"string\">&quot;delete successful&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(&quot;/zrf&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span>(<span class=\"params\">request</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> response.json(&#123;<span class=\"string\">&quot;hello&quot;</span>: <span class=\"string\">&quot;world&quot;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app.run(host=<span class=\"string\">&quot;0.0.0.0&quot;</span>, port=<span class=\"number\">8000</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n"},{"title":"宠物小精灵对战系统文档","url":"/2020/11/10/%E5%AE%A0%E7%89%A9%E5%B0%8F%E7%B2%BE%E7%81%B5%E6%96%87%E6%A1%A3/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"宠物小精灵对战系统文档\"><a href=\"#宠物小精灵对战系统文档\" class=\"headerlink\" title=\"宠物小精灵对战系统文档\"></a>宠物小精灵对战系统文档</h1><h2 id=\"一、题目要求\"><a href=\"#一、题目要求\" class=\"headerlink\" title=\"一、题目要求\"></a>一、题目要求</h2><p><strong>题目一：宠物小精灵的加入</strong></p>\n<blockquote>\n<p>要求：</p>\n<p>设计宠物小精灵的类，为简化游戏设计，精灵的属性包括种类（力量型：高攻击； 肉盾型：高生命值； 防御型：高防御； 敏捷型：低攻击间隔，共四种）、名字、等级、经验值、攻击力、防御力、生命值、攻击间隔等（以上属性必须，其他属性可自行添加）（基本要求：本游戏中只有上面的4种类型。 进一步要求：上述4种类型可以进一步深入划分，比如力量型又可以再细分为：沙瓦朗、火爆猴、腕力等）</p>\n<p>每个精灵初始等级为1，满级15级，每当精灵升级的时候，宠物对应的属性值会有少量增加（主属性增加量相对较多）</p>\n<p>每个精灵有自己独特的攻击方式，如“闪电攻击”，“火焰攻击”等等，请设计一个精灵的基类，并将精灵的攻击方法设为虚方法以方便子类重写</p>\n<p>请写一个测试程序对设计的精灵类的相关属性和方法（包括攻击函数，升级函数等）进行测试</p>\n<p>题目主要考察点：类的继承，对象数据成员设计，成员函数设计 </p>\n</blockquote>\n<p><strong>题目二：用户注册与平台登录</strong></p>\n<blockquote>\n<p>要求：</p>\n<p>每个用户需要注册一个账号，用户名全局唯一，不能有任何两个用户名相同，要考虑注册失败的场景时的反馈</p>\n<p>实现注册、登录、登出功能，均采用C/S模式，客户端和服务端用socket进行通信，服务端保存所有用户的信息</p>\n<p>每个用户拥有：用户名、拥有的精灵，两个属性。 用户注册成功时，系统自动随机分发三个1级精灵给用户</p>\n<p>用户可以查看所有成功注册用户拥有的精灵，也可以查看所有当前在线的用户</p>\n<p>题目主要考察点：socket通信，交互场景反馈，用户信息存储方式，界面交互，其它合理的新颖设计。</p>\n</blockquote>\n<p><strong>题目三：游戏对战的设计</strong></p>\n<blockquote>\n<p>要求：</p>\n<p>已经登录的在线用户可以和服务器进行虚拟决斗，决斗分两种：升级赛和决斗赛，两种比赛都能增长精灵宠物经验值。服务器上有一个虚拟精灵的列表，用户可以挑选其中任意一个进行比赛（升级赛或者决斗赛）。另外决斗赛中用户胜出可以直接获得该战胜的精灵，失败则系统从用户的精灵中随机选三个（不够三个精灵的情况就选择他所有的精灵），然后由用户选一个送出。</p>\n<p>升级赛 只是用户用来增加精灵经验值，规则开发者自定；</p>\n<p>累积多少经验值升一级，规则开发者自定；</p>\n<p>决斗赛的上述规则同升级赛，只是额外还可以赢得一个宠物或失去一个宠物。</p>\n<p>用户如果没有精灵（比如总是失败，已经全部送出去），则系统会随机放给他一个初级精灵。</p>\n<p>请让你的系统自动模拟每场比赛的每次出招。另外，为了增加不确定性，可以加入概率闪避攻击和暴击伤害机制</p>\n<p>比赛的过程和结果由系统根据上述规则自动模拟完成，要求结果具有一定的随机性。</p>\n<p>用户增加新功能，可以查看某个用户的胜率</p>\n<p>用户增加新属性，为宠物个数徽章（金银铜）和高级宠物徽章（金银铜），分别根据拥有的宠物个数的多少和拥有高级宠物（15级）个数的多少颁发</p>\n<p>题目主要考察点：客户端与服务器数据交互（可采用多进程或异步通信或其他方法均可），并发请求处理，类的方法设计，伤害计算方法设计，界面交互，其它合理的新颖设计。</p>\n</blockquote>\n<p><strong>软件设计要求</strong></p>\n<blockquote>\n<p>如有必要的友元函数，要在报告（课程设计报告）和程序中说明每个友元函数的不可替代性，为什么一定要用友元才能实现。</p>\n<p>自己编写的代码，除主函数和必要的友元函数外，不允许出现任何一个非类成员函数。</p>\n<p>任何不改变对象状态（不改写自身对象数据成员值）的成员函数均需显式标注const。</p>\n</blockquote>\n<p><strong>代码规范性要求</strong></p>\n<blockquote>\n<p>代码需遵循课件提出的编码规范要求。</p>\n<p>通过开发环境自动生成的界面类代码，全部数据成员和成员函数需在类声明时加以注释，函数体内的必要步骤要加以注释。</p>\n<p>其他全部类代码的数据成员和成员函数的声明和实现均需加以注释，成员函数的必要步骤要加以注释。</p>\n</blockquote>\n<h2 id=\"二、类的设计\"><a href=\"#二、类的设计\" class=\"headerlink\" title=\"二、类的设计\"></a>二、类的设计</h2><h3 id=\"题目一\"><a href=\"#题目一\" class=\"headerlink\" title=\"题目一\"></a>题目一</h3><p>首先设计精灵的基类，所有精灵都有具备这些属性以及函数</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">pet_base_class</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">    <span class=\"built_in\">string</span> name;<span class=\"comment\">//宠物名字</span></span><br><span class=\"line\">    pet_type type;<span class=\"comment\">//宠物类别</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> id;<span class=\"comment\">//宠物身份唯一标识</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> atk;<span class=\"comment\">//攻击值</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> def;<span class=\"comment\">//防御值</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> hp;<span class=\"comment\">//总血量</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> speed;<span class=\"comment\">//闪避速度</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> crit_rate;<span class=\"comment\">//暴击率</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> remaining_hp;<span class=\"comment\">//当前血量</span></span><br><span class=\"line\">    pet_status status;<span class=\"comment\">//宠物当前状态</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> remaining_chaos_time;<span class=\"comment\">//状态异常剩余时间</span></span><br><span class=\"line\">    <span class=\"comment\">//string skill_name[4];//普通攻击和三种技能</span></span><br><span class=\"line\">    <span class=\"comment\">//string skill_description[4];</span></span><br><span class=\"line\">    <span class=\"comment\">//int skill_pp[3];//普通攻击pp为无限</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> level;<span class=\"comment\">//宠物等级</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> <span class=\"built_in\">exp</span>;<span class=\"comment\">//总的经验值</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> attack_interval;<span class=\"comment\">//攻击间隔,先只弄一个技能，后续再添加,20/9/1 考虑攻击间隔为出招速度，在对战开始时，出招速度</span></span><br><span class=\"line\">    <span class=\"comment\">//快的宠物优先出招，只需要在战斗开始时判断一下谁的出招速度快就可以了</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> total_pp;<span class=\"comment\">//只有一个技能</span></span><br><span class=\"line\">    <span class=\"built_in\">string</span> skill_name;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> remaining_pp;<span class=\"comment\">//剩余技能使用次数，目前只有普通攻击，以后再考虑,2020/9/1考虑添加技能pp</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> exp_need[<span class=\"number\">14</span>];<span class=\"comment\">//每升一级需要的经验，英雄初始为一级，2-15；</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> atk_debuff;<span class=\"comment\">//被干扰后的攻击力</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> def_debuff;<span class=\"comment\">//被干扰后的防御力</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> speed_debuff;<span class=\"comment\">//被干扰后的闪避速度</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    pet_base_class(pet_type);</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">get_name</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> name; &#125;<span class=\"comment\">//获得宠物名字</span></span><br><span class=\"line\">    <span class=\"function\">pet_type <span class=\"title\">get_type</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> type; &#125;<span class=\"comment\">//获得宠物类型</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_id</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> id; &#125;<span class=\"comment\">//获得宠物id，唯一标识</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_atk</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> atk; &#125;<span class=\"comment\">//获得宠物攻击值</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_def</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> def; &#125;<span class=\"comment\">//获得宠物防御值</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_hp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> hp; &#125;<span class=\"comment\">//获得宠物总血量</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_speed</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> speed; &#125;<span class=\"comment\">//获得宠物攻速</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_crit_rate</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> crit_rate; &#125;<span class=\"comment\">//获得宠物暴击率</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_remaining_hp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> remaining_hp; &#125;<span class=\"comment\">//获得宠物当前血量</span></span><br><span class=\"line\">    <span class=\"function\">pet_status <span class=\"title\">get_status</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> status; &#125;<span class=\"comment\">//获得宠物当前状态</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_remaining_chaos_time</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> remaining_chaos_time;&#125;<span class=\"comment\">//获得宠物异常状态剩余时间</span></span><br><span class=\"line\">    <span class=\"comment\">//string* get_skill_name() &#123; return skill_name; &#125;;//获得技能名字</span></span><br><span class=\"line\">    <span class=\"comment\">//string* get_skill_description() &#123; return skill_description; &#125;;//获得技能描述</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_pp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> total_pp; &#125;<span class=\"comment\">//获得技能总pp</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_remaining_pp</span><span class=\"params\">()</span> </span>&#123;<span class=\"keyword\">return</span> remaining_pp;&#125;<span class=\"comment\">//获得技能剩余pp</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_level</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> level; &#125;<span class=\"comment\">//获得宠物等级</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_exp</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> <span class=\"built_in\">exp</span>; &#125;<span class=\"comment\">//获得宠物总经验值</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_attack_interval</span><span class=\"params\">()</span> </span>&#123; <span class=\"keyword\">return</span> attack_interval; &#125;<span class=\"comment\">//获得宠物攻击间隔</span></span><br><span class=\"line\">    <span class=\"comment\">//int* get_remaining_pp() &#123; return remaining_pp; &#125;;//获得技能剩余次数</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_atk_debuff</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> atk_debuff;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_def_debuff</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> def_debuff;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get_speed_debuff</span><span class=\"params\">()</span></span>&#123;<span class=\"keyword\">return</span> speed_debuff;&#125;</span><br><span class=\"line\">    <span class=\"function\">bullet* <span class=\"title\">normal_attack</span><span class=\"params\">(<span class=\"keyword\">int</span>&amp;)</span></span>;<span class=\"comment\">//普通攻击,返回攻击对象的指针，将其传入对方的unde_attack函数中</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">under_attack</span><span class=\"params\">(bullet*,<span class=\"keyword\">int</span>&amp;)</span></span>;<span class=\"comment\">//受到攻击,返回true说明战斗失败，接收攻击方的攻击信息</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> bullet* <span class=\"title\">skill</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>;<span class=\"comment\">//使用技能,纯虚函数，使用方法与normal_attack类似</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span>;<span class=\"comment\">//输出精灵信息</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_exp</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span></span>;<span class=\"comment\">//获取经验值,每次执行完该函数就要执行level_up_exp（）；</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">level_up_exp</span><span class=\"params\">()</span></span>;<span class=\"comment\">//通用升级函数，当exp经验值到了，会自动升一级，函数有潜在的问题，没有考虑一下子升多级的情况</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">deal_chaos</span><span class=\"params\">()</span></span>;<span class=\"comment\">//处理异常状态函数,每次受到技能攻击后执行该函数</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">chaos_recover</span><span class=\"params\">()</span></span>;<span class=\"comment\">//当宠物战败时，用于恢复到原来的状态</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">level_up_attribute</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>;<span class=\"comment\">//将自身属性升级，在level_up_exp（）中被调用</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">get_status_string</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (status)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> normal:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;normal&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> critical:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;critical&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> dizz:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;dizz&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> attack_debased:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;attack_debased&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> defence_debased:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;defence_debased&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> speed_debased:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;speed_debased&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>枚举类型，pet_type表示宠物类型，pet_status表示宠物的状态</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">enum</span> pet_type</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    ATK, <span class=\"comment\">//high attack</span></span><br><span class=\"line\">    HP,\t<span class=\"comment\">//high HP</span></span><br><span class=\"line\">    DEF, <span class=\"comment\">//high defence</span></span><br><span class=\"line\">    SPE\t<span class=\"comment\">//high speed</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">enum</span> pet_status</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    normal,<span class=\"comment\">//正常</span></span><br><span class=\"line\">    critical,<span class=\"comment\">//暴击</span></span><br><span class=\"line\">    dizz,<span class=\"comment\">//眩晕，无法释放技能</span></span><br><span class=\"line\">    attack_debased,<span class=\"comment\">//攻击力被降低</span></span><br><span class=\"line\">    defence_debased,<span class=\"comment\">//防御值被降低</span></span><br><span class=\"line\">    speed_debased<span class=\"comment\">//闪避速度被降低</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>攻击类的设计，每当宠物使用技能时，就会将攻击的信息传入bullet中，由对方的宠物接收该bullet，进行血量以及状态的修改</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">bullet</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    bullet();</span><br><span class=\"line\">    bullet(<span class=\"keyword\">const</span> bullet&amp;);</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"keyword\">operator</span>=(<span class=\"keyword\">const</span> bullet&amp;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> damage;<span class=\"comment\">//基础伤害</span></span><br><span class=\"line\">    pet_status status;<span class=\"comment\">//该技能会对对方造成的debuff</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>设计不同属性的精灵，完成升级函数的设计</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Speed</span> :</span> <span class=\"keyword\">public</span> pet_base_class</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">        Speed() :pet_base_class(SPE) &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">level_up_attribute</span><span class=\"params\">()</span></span>;<span class=\"comment\">//升级属性</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Attack</span> :</span><span class=\"keyword\">public</span> pet_base_class</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">        Attack() :pet_base_class(ATK) &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">level_up_attribute</span><span class=\"params\">()</span></span>;<span class=\"comment\">//升级属性</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Defence</span> :</span><span class=\"keyword\">public</span> pet_base_class</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">        Defence() :pet_base_class(DEF) &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">level_up_attribute</span><span class=\"params\">()</span></span>;<span class=\"comment\">//升级属性</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tank</span> :</span><span class=\"keyword\">public</span> pet_base_class</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">        Tank() :pet_base_class(HP) &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">protected</span>:</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">level_up_attribute</span><span class=\"params\">()</span></span>;<span class=\"comment\">//升级属性</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>具体精灵的实现，设计每个精灵独有的攻击属性</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//皮卡丘</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pikachu</span> :</span> <span class=\"keyword\">public</span> Speed</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">bullet* <span class=\"title\">skill</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    Pikachu(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>);<span class=\"comment\">//生成相应等级的宠物</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//火球鼠</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cyndaquil</span> :</span> <span class=\"keyword\">public</span> Speed</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">bullet* <span class=\"title\">skill</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    Cyndaquil(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>);<span class=\"comment\">//生成相应等级的宠物</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//烈焰猴</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Infernape</span> :</span> <span class=\"keyword\">public</span> Attack</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">bullet* <span class=\"title\">skill</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    Infernape(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>);<span class=\"comment\">//生成相应等级的宠物</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//喷火龙</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Charizard</span> :</span> <span class=\"keyword\">public</span> Attack</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">bullet* <span class=\"title\">skill</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    Charizard(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>);<span class=\"comment\">//生成相应等级的宠物</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//妙蛙种子</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bulbasaur</span> :</span> <span class=\"keyword\">public</span> Defence</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">bullet* <span class=\"title\">skill</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    Bulbasaur(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>);<span class=\"comment\">//生成相应等级的宠物</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//卡比兽</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Snorlax</span> :</span> <span class=\"keyword\">public</span> Defence</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">bullet* <span class=\"title\">skill</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    Snorlax(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>);<span class=\"comment\">//生成相应等级的宠物</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//杰尼龟</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Squirtle</span> :</span> <span class=\"keyword\">public</span> Tank</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">bullet* <span class=\"title\">skill</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    Squirtle(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>);<span class=\"comment\">//生成相应等级的宠物</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//独角虫</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Weedle</span> :</span> <span class=\"keyword\">public</span> Tank</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">bullet* <span class=\"title\">skill</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    Weedle(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>);<span class=\"comment\">//生成相应等级的宠物</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"题目二\"><a href=\"#题目二\" class=\"headerlink\" title=\"题目二\"></a>题目二</h3><p>用户的注册和登录，使用socket进行通信，分为客户端和服务器端</p>\n<h4 id=\"客户端\"><a href=\"#客户端\" class=\"headerlink\" title=\"客户端\"></a>客户端</h4><p>用户类的设计</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">user</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    user();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> user_name;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> user_password;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> win_session;<span class=\"comment\">//胜场</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> total_session;<span class=\"comment\">//总场</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> senior_pet_medal;<span class=\"comment\">//高级精灵奖章:15级精灵个数</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> number_pet_medal;<span class=\"comment\">//精灵个数奖章:精灵个数</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>登录窗口设计</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Ui &#123;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">login_widget</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">login_widget</span> :</span> <span class=\"keyword\">public</span> QWidget</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Q_OBJECT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">explicit</span> <span class=\"title\">login_widget</span><span class=\"params\">(QWidget *parent = <span class=\"number\">0</span>)</span></span>;</span><br><span class=\"line\">    ~login_widget();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    Ui::login_widget *ui;</span><br><span class=\"line\"></span><br><span class=\"line\">signals:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">login</span><span class=\"params\">(<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">regist</span><span class=\"params\">(<span class=\"built_in\">string</span>, <span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">public</span> slots:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_login_button</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_regist_button</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_exit_button</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_regist_in_regist</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_return_to_login</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">warning</span><span class=\"params\">(QString warn)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>网络层 接收端设计</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">server</span> :</span> <span class=\"keyword\">public</span> QObject</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Q_OBJECT</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">\tSOCKET sock;<span class=\"comment\">//创建套接字</span></span><br><span class=\"line\">    <span class=\"comment\">//const int PORT = 8000;</span></span><br><span class=\"line\">\t<span class=\"comment\">//char buf[1024];//用于接收信息</span></span><br><span class=\"line\">    sockaddr_in servAddr;<span class=\"comment\">//服务端地址</span></span><br><span class=\"line\">    sockaddr fromAddr;</span><br><span class=\"line\">    QString username;</span><br><span class=\"line\">    <span class=\"comment\">//struct sockaddr clntAddr;//客户端地址</span></span><br><span class=\"line\">\t<span class=\"comment\">//Pikachu* pet;//定义了一只宠物</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\tserver();</span><br><span class=\"line\">    ~server();</span><br><span class=\"line\"></span><br><span class=\"line\">signals:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">login_success</span><span class=\"params\">(QString)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">warning</span><span class=\"params\">(QString)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">init_user</span><span class=\"params\">(user&amp;)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">refresh_pet_backpack</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">refresh_user_info</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">refresh_user_status</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">receive_pet_information</span><span class=\"params\">(<span class=\"built_in\">string</span>&amp;)</span></span>;<span class=\"comment\">//接收宠物信息</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">show_choose_defeat_pet</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">refresh_user_medal</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">public</span> slots:</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">login</span><span class=\"params\">(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> password)</span></span>;<span class=\"comment\">//发送登录请求</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">regist</span><span class=\"params\">(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> password)</span></span>;<span class=\"comment\">//发送注册信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_all_user_information</span><span class=\"params\">()</span></span>;<span class=\"comment\">//获得所有用户信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_all_user_status</span><span class=\"params\">()</span></span>;<span class=\"comment\">//获得所有用户在线状态</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_user_pet_information</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span>;<span class=\"comment\">//获得某个用户的精灵信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">logout</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span>;<span class=\"comment\">//退出登录</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update_user_pet_information</span><span class=\"params\">(pet_base_class&amp; pet,<span class=\"built_in\">string</span> username)</span></span>;<span class=\"comment\">//更新某用户的精灵信息 </span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update_user_information</span><span class=\"params\">(user&amp; u)</span></span>;<span class=\"comment\">//更新用户信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">delete_user_pet</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span></span>;<span class=\"comment\">//删除某个精灵信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_server_pet_information</span><span class=\"params\">()</span></span>;<span class=\"comment\">//获得服务器精灵信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_1_level_pet</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span>;<span class=\"comment\">//获得一个初始精灵</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_myuser</span><span class=\"params\">()</span></span>;<span class=\"comment\">//get user information</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_user_pet_through_id</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span></span>;<span class=\"comment\">//根据宠物id获取宠物的详细信息</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insert_pet</span><span class=\"params\">(pet_base_class&amp;,<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_random_3_pet</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;<span class=\"comment\">//决斗赛失败，用户随机失去一个精灵</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">query_number_pet_and_15_number_pet</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;<span class=\"comment\">//查询用户宠物个数，15级宠物个数</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">receive</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>展示用户信息的窗口</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Ui &#123;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">user_info_widget</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">user_info_widget</span> :</span> <span class=\"keyword\">public</span> QWidget</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Q_OBJECT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">explicit</span> <span class=\"title\">user_info_widget</span><span class=\"params\">(QWidget *parent = <span class=\"number\">0</span>)</span></span>;</span><br><span class=\"line\">    ~user_info_widget();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">exit_user_info_widget</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    Ui::user_info_widget *ui;</span><br><span class=\"line\">signals:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">exit_user_info</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">show_others_pet_backpack</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">public</span> slots:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">refresh_user_info</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">refresh_user_status</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_my_item</span><span class=\"params\">(QTableWidgetItem*)</span></span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"服务器端\"><a href=\"#服务器端\" class=\"headerlink\" title=\"服务器端\"></a>服务器端</h4><p>数据库的设计</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">database</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">\tsqlite3* db;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\tdatabase();</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">insert_user</span><span class=\"params\">(user&amp;)</span></span>;<span class=\"comment\">//插入用户</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">query_user</span><span class=\"params\">(<span class=\"built_in\">string</span> user_name, user&amp;)</span></span>;<span class=\"comment\">//根据用户名查询用户,查询的结果保存在user类中</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">update_user</span><span class=\"params\">(user&amp;)</span></span>;<span class=\"comment\">//更新用户信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">get_user_list</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt;&gt;&amp;)</span></span>;<span class=\"comment\">//获得用户信息列表</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">get_pet_list</span><span class=\"params\">(<span class=\"built_in\">string</span> user_name, <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">string</span>&gt;&gt;&amp;)</span></span>;<span class=\"comment\">//获取某用户的精灵信息,第一个参数为精灵名</span></span><br><span class=\"line\">\t<span class=\"built_in\">unordered_map</span>&lt;<span class=\"built_in\">string</span>, <span class=\"keyword\">int</span>&gt; user_online_status;<span class=\"comment\">//每当注册一个用户，就把用户名放进来 &lt;用户名，状态&gt;</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update_num_of_pet</span><span class=\"params\">()</span></span>;<span class=\"comment\">//每当精灵数改变时，就执行该函数，更新精灵数量</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_pet_number</span><span class=\"params\">(<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>&amp; uname)</span></span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">insert_pet</span><span class=\"params\">(pet&amp;)</span></span>;<span class=\"comment\">//插入精灵</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">update_pet</span><span class=\"params\">(pet&amp;)</span></span>;<span class=\"comment\">//更新精灵</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">delete_pet</span><span class=\"params\">(<span class=\"built_in\">string</span>&amp;)</span></span>;<span class=\"comment\">//删除精灵</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">query_pet</span><span class=\"params\">(<span class=\"keyword\">int</span> id, pet&amp;)</span></span>;<span class=\"comment\">//根据id查询精灵</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> num_of_pet;<span class=\"comment\">//计数，当前数据库有多少条记录，就是宠物的id，唯一身份标识</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>网络层 发送端设计</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">server</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">\tSOCKET sock;<span class=\"comment\">//创建套接字</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> <span class=\"keyword\">int</span> PORT = <span class=\"number\">8000</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//char buf[1024];//用于接收信息</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">sockaddr_in</span> <span class=\"title\">servAddr</span>;</span><span class=\"comment\">//服务端地址</span></span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">sockaddr_in</span> <span class=\"title\">clntAddr</span>;</span><span class=\"comment\">//客户端地址</span></span><br><span class=\"line\">\tdatabase* my_database;</span><br><span class=\"line\">\t<span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, <span class=\"built_in\">string</span>&gt; itos_pet;<span class=\"comment\">//8个精灵精灵名字和序号对照表，用于随机选取数字</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> pet_id;<span class=\"comment\">//服务器有16个精灵，id为1-16.每当分发新精灵时，id要加一。</span></span><br><span class=\"line\">\t<span class=\"comment\">//注意：每当启动服务器时要计算出当前宠物个数，初始化pet_id和user_online_status,暂时未做，要放在构造函数中初始化</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">\tserver();</span><br><span class=\"line\">\t~server() &#123; <span class=\"keyword\">delete</span> my_database; &#125;;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">deal_login</span><span class=\"params\">(<span class=\"built_in\">string</span> username,<span class=\"built_in\">string</span> password)</span></span>;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">deal_regist</span><span class=\"params\">(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> password)</span></span>;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">deal_logout</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span>;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_all_user_status</span><span class=\"params\">()</span></span>;<span class=\"comment\">//发送所有用户的在线状态信息、</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_all_user_information</span><span class=\"params\">()</span></span>;<span class=\"comment\">//发送所有用户的信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_user_pet_infomation</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span>;<span class=\"comment\">//发送某用户拥有的精灵信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_server_pet_information</span><span class=\"params\">()</span></span>;<span class=\"comment\">//发送服务器精灵信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">new_1_level_pet</span><span class=\"params\">(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> pet_name)</span></span>;<span class=\"comment\">//给用户分发一个1级精灵</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update_user_pet_information</span><span class=\"params\">(pet&amp;)</span></span>;<span class=\"comment\">//更新用户精灵的信息，这里输入暂定为一个精灵对象</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">delete_user_pet</span><span class=\"params\">(<span class=\"built_in\">string</span>&amp;)</span></span>;<span class=\"comment\">//删除用户的一个精灵</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update_user_information</span><span class=\"params\">(user&amp;)</span></span>;<span class=\"comment\">//更新用户信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_user_information</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span>;<span class=\"comment\">//发送用户信息</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">send_user_pet_through_id</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span></span>;<span class=\"comment\">//通过id发送精灵</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_pet_when_win</span><span class=\"params\">(pet&amp;)</span></span>;<span class=\"comment\">//决斗赛胜利了，那么获得对手的精灵</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_random_3_pet</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span>;<span class=\"comment\">//随机获得三个精灵</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_pet_number</span><span class=\"params\">(<span class=\"built_in\">string</span> uname)</span></span>;<span class=\"comment\">//查询宠物个数和15级宠物个数</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">receive</span><span class=\"params\">()</span></span>;<span class=\"comment\">//从客户端收到的信息</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>用户类设计</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">user</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    user();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">print</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> user_name;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> user_password;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> win_session;<span class=\"comment\">//胜场</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> total_session;<span class=\"comment\">//总场</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> senior_pet_medal;<span class=\"comment\">//高级精灵奖章:15级精灵个数</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> number_pet_medal;<span class=\"comment\">//精灵个数奖章:精灵个数</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"题目三\"><a href=\"#题目三\" class=\"headerlink\" title=\"题目三\"></a>题目三</h3><p>选择精灵场景</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Ui &#123;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">choose_pet_widget</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">choose_pet_widget</span> :</span> <span class=\"keyword\">public</span> QWidget</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Q_OBJECT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">explicit</span> <span class=\"title\">choose_pet_widget</span><span class=\"params\">(QWidget *parent = <span class=\"number\">0</span>)</span></span>;</span><br><span class=\"line\">    ~choose_pet_widget();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">exit_choose_pet_widget</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">signals:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">exit_choose_pet</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">start_battle</span><span class=\"params\">(<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>,<span class=\"keyword\">int</span>)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    Ui::choose_pet_widget *ui;</span><br><span class=\"line\"><span class=\"keyword\">public</span> slots:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">refresh_choose_pet_backpack</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_pet_1</span><span class=\"params\">(QTableWidgetItem*)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">get_pet_2</span><span class=\"params\">(QTableWidgetItem*)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_start_button</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_promotion_competition</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_duels_competition</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>对战场景</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Ui &#123;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">battle_widget</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">battle_widget</span> :</span> <span class=\"keyword\">public</span> QWidget</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Q_OBJECT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">explicit</span> <span class=\"title\">battle_widget</span><span class=\"params\">(QWidget *parent = <span class=\"number\">0</span>)</span></span>;</span><br><span class=\"line\">    ~battle_widget();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">battle</span><span class=\"params\">(pet_base_class&amp; a,pet_base_class&amp; b)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    Ui::battle_widget *ui;</span><br><span class=\"line\">    pet_base_class * user_pet;</span><br><span class=\"line\">    pet_base_class * server_pet;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> battle_style;<span class=\"comment\">//1为升级赛，2为决斗赛</span></span><br><span class=\"line\">signals:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">init_two_pet</span><span class=\"params\">(<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update_after_battle</span><span class=\"params\">(<span class=\"keyword\">bool</span> is_win,<span class=\"built_in\">string</span> server_pet_name,<span class=\"keyword\">int</span> server_pet_level,<span class=\"keyword\">int</span> battle_s,<span class=\"keyword\">int</span> user_pet_id)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">public</span> slots:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">init_battle_ground</span><span class=\"params\">(<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>,<span class=\"keyword\">int</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_normal_attack</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_skill</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">click_quit</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>主界面的设计</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Ui &#123;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainWindow</span>;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainWindow</span> :</span> <span class=\"keyword\">public</span> QMainWindow</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Q_OBJECT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">explicit</span> <span class=\"title\">MainWindow</span><span class=\"params\">(QWidget *parent = <span class=\"number\">0</span>)</span></span>;</span><br><span class=\"line\">    ~MainWindow();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">paintEvent</span><span class=\"params\">(QPaintEvent *)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">closeEvent</span><span class=\"params\">(QCloseEvent *)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    Ui::MainWindow *ui;</span><br><span class=\"line\">    login_widget *login_window;</span><br><span class=\"line\">    pet_backpack *pet_backpack_window;</span><br><span class=\"line\">    user_info_widget * user_info_window;</span><br><span class=\"line\">    choose_pet_widget * choose_pet_window;</span><br><span class=\"line\">    battle_widget * battle_window;</span><br><span class=\"line\">    server * myserver;</span><br><span class=\"line\">    user* myuser;</span><br><span class=\"line\">    <span class=\"comment\">//battle_controller * battle;</span></span><br><span class=\"line\">    pet_base_class * mypet;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> save_user_pet_information;</span><br><span class=\"line\"><span class=\"keyword\">public</span> slots:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">start</span><span class=\"params\">(QString)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">init_user</span><span class=\"params\">(user&amp;)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">exit_MainWindow</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">show_pet_backpack</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">exit_pet_backpack</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">show_others_pet_backpack</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"comment\">//void exit_others_pet_backpack();</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">show_user_info_window</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">exit_user_info_window</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">show_choose_pet_window</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">exit_choose_pet_window</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">start_battle</span><span class=\"params\">(<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">init_two_pet</span><span class=\"params\">(<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>,<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update_after_battle</span><span class=\"params\">(<span class=\"keyword\">bool</span> is_win,<span class=\"built_in\">string</span> server_pet_name,<span class=\"keyword\">int</span> server_pet_level,<span class=\"keyword\">int</span> battle_s,<span class=\"keyword\">int</span> user_pet_id)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">receive_pet_information</span><span class=\"params\">(<span class=\"built_in\">string</span>&amp;)</span></span>;<span class=\"comment\">//接收宠物信息</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">show_choose_defeat_pet</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">refresh_user_medal</span><span class=\"params\">(<span class=\"built_in\">string</span>)</span></span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"三、具体实现\"><a href=\"#三、具体实现\" class=\"headerlink\" title=\"三、具体实现\"></a>三、具体实现</h2><h3 id=\"题目一-1\"><a href=\"#题目一-1\" class=\"headerlink\" title=\"题目一\"></a>题目一</h3><h4 id=\"1、精灵的构造\"><a href=\"#1、精灵的构造\" class=\"headerlink\" title=\"1、精灵的构造\"></a>1、精灵的构造</h4><p>每个精灵都会在自己的父类上进行构造。基类的构造函数初始化所有精灵的通用属性，属性类的构造函数初始化精灵的升级函数，具体的精灵类则实现该精灵特有的攻击函数，下面以Cyndaquil为例</p>\n<p>基类</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">pet_base_class::pet_base_class(pet_type t)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;type = t;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;atk = <span class=\"number\">50</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;def = <span class=\"number\">20</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;hp = <span class=\"number\">500</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;speed = <span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;crit_rate = <span class=\"number\">0</span>;<span class=\"comment\">//初始暴击率为0%</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;status = normal;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;level = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;<span class=\"built_in\">exp</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;attack_interval = <span class=\"number\">2000</span>;<span class=\"comment\">//2000毫秒</span></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_chaos_time = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>属性类</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Speed::level_up_attribute</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;atk += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">4</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;atk_debuff += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">2</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;def += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">2</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;def_debuff += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">2</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;hp += <span class=\"keyword\">this</span>-&gt;level;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;speed += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">4</span>;<span class=\"comment\">//speed应该是闪避速度，攻击间隔才是攻击速度</span></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;speed_debuff += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">4</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;crit_rate += <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;attack_interval -= <span class=\"number\">50</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;atk_debuff = <span class=\"keyword\">this</span>-&gt;atk;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;def_debuff = <span class=\"keyword\">this</span>-&gt;def;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;speed_debuff = <span class=\"keyword\">this</span>-&gt;speed;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_hp = <span class=\"keyword\">this</span>-&gt;hp;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_pp = <span class=\"keyword\">this</span>-&gt;total_pp;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>精灵类</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//火球鼠</span></span><br><span class=\"line\">Cyndaquil::Cyndaquil(<span class=\"keyword\">int</span> level,<span class=\"keyword\">int</span> _id)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;name = <span class=\"string\">&quot;Cyndaquil&quot;</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;type = SPE;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;id = _id;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;total_pp = <span class=\"number\">8</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_pp = <span class=\"keyword\">this</span>-&gt;total_pp;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;skill_name = <span class=\"string\">&quot;Cyndaquil_skill&quot;</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//this-&gt;level = level;</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (level &lt; <span class=\"number\">2</span>) <span class=\"keyword\">this</span>-&gt;<span class=\"built_in\">exp</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> <span class=\"keyword\">this</span>-&gt;<span class=\"built_in\">exp</span> = <span class=\"keyword\">this</span>-&gt;exp_need[level - <span class=\"number\">2</span>];</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; level; i++) <span class=\"keyword\">this</span>-&gt;level_up_exp();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">bullet* <span class=\"title\">Cyndaquil::skill</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_pp--;</span><br><span class=\"line\">\tbullet* attack = <span class=\"keyword\">new</span> bullet;</span><br><span class=\"line\">\tattack-&gt;damage = <span class=\"keyword\">this</span>-&gt;atk_debuff * <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">3</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> p = rand() % <span class=\"number\">100</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (p &lt; <span class=\"number\">40</span>)<span class=\"comment\">//有40%的几率降低对方防御</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tattack-&gt;status = defence_debased;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tattack-&gt;status = normal;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"keyword\">this</span>-&gt;get_name() &lt;&lt; <span class=\"string\">&quot; use skill_attack, damage = &quot;</span> &lt;&lt; attack-&gt;damage &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> attack;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2、精灵攻击方式\"><a href=\"#2、精灵攻击方式\" class=\"headerlink\" title=\"2、精灵攻击方式\"></a>2、精灵攻击方式</h4><h5 id=\"普通攻击\"><a href=\"#普通攻击\" class=\"headerlink\" title=\"普通攻击\"></a>普通攻击</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">bullet* <span class=\"title\">pet_base_class::normal_attack</span><span class=\"params\">(<span class=\"keyword\">int</span> &amp; i)</span><span class=\"comment\">//普通攻击暴击i为1，不暴击为0</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tbullet* attack = <span class=\"keyword\">new</span> bullet;</span><br><span class=\"line\">\tattack-&gt;status = normal;</span><br><span class=\"line\">    attack-&gt;damage = <span class=\"keyword\">this</span>-&gt;atk_debuff * <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">3</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//cout &lt;&lt; &quot;normal attack damage &quot; &lt;&lt; attack-&gt;damage;</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> p = rand() % <span class=\"number\">100</span>;</span><br><span class=\"line\">    i = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (p &lt;= <span class=\"keyword\">this</span>-&gt;crit_rate)<span class=\"comment\">//普通攻击如果暴击</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">        i = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\tattack-&gt;status = critical;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(attack-&gt;damage != <span class=\"number\">0</span>)</span><br><span class=\"line\">            attack-&gt;damage += <span class=\"number\">10</span> * <span class=\"keyword\">this</span>-&gt;level;<span class=\"comment\">//伤害增加</span></span><br><span class=\"line\">        <span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;critical!&quot;</span>&lt;&lt;<span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"keyword\">this</span>-&gt;get_name() &lt;&lt;<span class=\"string\">&quot; use normal_attack, damage = &quot;</span> &lt;&lt; attack-&gt;damage &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> attack;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>普通攻击造成一定的伤害，并且有一定几率暴击，暴击的效果和精灵的当前等级有关</p>\n<h5 id=\"技能攻击\"><a href=\"#技能攻击\" class=\"headerlink\" title=\"技能攻击\"></a>技能攻击</h5><p>不同精灵的技能有不同的攻击属性，下面以Pikachu为例</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">bullet* <span class=\"title\">Pikachu::skill</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_pp--;</span><br><span class=\"line\">\tbullet* attack = <span class=\"keyword\">new</span> bullet;</span><br><span class=\"line\">\tattack-&gt;damage = <span class=\"keyword\">this</span>-&gt;atk_debuff * <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">3</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> p = rand() % <span class=\"number\">100</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (p &lt; <span class=\"number\">30</span>)<span class=\"comment\">//有30%的几率降低对方攻击力</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tattack-&gt;status = attack_debased;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tattack-&gt;status = normal;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"keyword\">this</span>-&gt;get_name() &lt;&lt; <span class=\"string\">&quot; use skill_attack, damage = &quot;</span> &lt;&lt; attack-&gt;damage &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> attack;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>技能攻击会造成一定伤害，并且有一定几率使对手陷入异常状态，异常状态包括攻击力下降，防御力下降，闪避速度下降，眩晕</p>\n<h5 id=\"受到伤害\"><a href=\"#受到伤害\" class=\"headerlink\" title=\"受到伤害\"></a>受到伤害</h5><p>精灵使用技能后，计算出该技能的伤害和异常状态，返回值传入bullet类中，然后对手精灵接收该bullet类</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">pet_base_class::under_attack</span><span class=\"params\">(bullet* attack,<span class=\"keyword\">int</span>&amp; i)</span><span class=\"comment\">//被攻击精灵 的 状态</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> damage;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> p = rand() % <span class=\"number\">100</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (p &lt; <span class=\"keyword\">this</span>-&gt;speed_debuff)<span class=\"comment\">//如果闪避</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">        i = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\tdamage = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;sidestep&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tdamage = attack-&gt;damage - <span class=\"keyword\">this</span>-&gt;def_debuff * <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">8</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (damage &lt; <span class=\"number\">0</span>) damage = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"keyword\">this</span>-&gt;get_name() &lt;&lt; <span class=\"string\">&quot; &quot;</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">switch</span> (attack-&gt;status)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> normal:</span><br><span class=\"line\">        i = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;under normal attack&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;<span class=\"comment\">//受到了普通攻击效果，可能是普通攻击或者技能攻击</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> critical:</span><br><span class=\"line\">        i =<span class=\"number\">2</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;under critical normal attack&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> dizz:</span><br><span class=\"line\">        i=<span class=\"number\">3</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;under dizz&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> attack_debased:</span><br><span class=\"line\">        i=<span class=\"number\">4</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;under attack_debased&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> defence_debased:</span><br><span class=\"line\">        i=<span class=\"number\">5</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;under defence_debased&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> speed_debased:</span><br><span class=\"line\">        i=<span class=\"number\">6</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;under speed_debased&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">default</span>:</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"keyword\">this</span>-&gt;get_name() &lt;&lt; <span class=\"string\">&quot; takes damage: &quot;</span> &lt;&lt; damage &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>-&gt;remaining_chaos_time == <span class=\"number\">0</span> || attack-&gt;status != normal)<span class=\"comment\">//如果不处于异常状态</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;status = attack-&gt;status;<span class=\"comment\">//被攻击 获得debuff</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (attack-&gt;status != normal &amp;&amp; attack-&gt;status != critical)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;remaining_chaos_time = <span class=\"number\">2</span>;<span class=\"comment\">//默认会debuff两个回合</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (damage &gt;= <span class=\"keyword\">this</span>-&gt;remaining_hp)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;remaining_hp = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;<span class=\"comment\">//血量为0，返回true，战斗失败</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;remaining_hp -= damage;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"keyword\">this</span>-&gt;get_name() &lt;&lt; <span class=\"string\">&quot; hp is : &quot;</span> &lt;&lt; <span class=\"keyword\">this</span>-&gt;remaining_hp &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"异常状态处理\"><a href=\"#异常状态处理\" class=\"headerlink\" title=\"异常状态处理\"></a>异常状态处理</h5><p>异常状态会持续两个回合</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pet_base_class::deal_chaos</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (remaining_chaos_time == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;atk_debuff = <span class=\"keyword\">this</span>-&gt;atk;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;def_debuff = <span class=\"keyword\">this</span>-&gt;def;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;speed_debuff = <span class=\"keyword\">this</span>-&gt;speed;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;status = normal;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">switch</span> (<span class=\"keyword\">this</span>-&gt;status)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> dizz:</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;status:dizz  &quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;atk_debuff = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> attack_debased:</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;status:attack_debased&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;atk_debuff = <span class=\"keyword\">this</span>-&gt;atk - <span class=\"number\">2</span> * <span class=\"keyword\">this</span>-&gt;level;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> defence_debased:</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;status:defence_debased&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;def_debuff = <span class=\"keyword\">this</span>-&gt;def - <span class=\"number\">2</span> * <span class=\"keyword\">this</span>-&gt;level;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> speed_debased:</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;status:speed_debased&quot;</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;speed_debuff = <span class=\"keyword\">this</span>-&gt;speed - <span class=\"number\">2</span> * <span class=\"keyword\">this</span>-&gt;level;</span><br><span class=\"line\">\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>-&gt;remaining_chaos_time &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>-&gt;remaining_chaos_time--;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pet_base_class::chaos_recover</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;status = normal;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_chaos_time = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;atk_debuff = <span class=\"keyword\">this</span>-&gt;atk;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;def_debuff = <span class=\"keyword\">this</span>-&gt;def;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;speed_debuff = <span class=\"keyword\">this</span>-&gt;speed;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_hp = <span class=\"keyword\">this</span>-&gt;hp;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_pp = <span class=\"keyword\">this</span>-&gt;remaining_pp;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"升级函数\"><a href=\"#升级函数\" class=\"headerlink\" title=\"升级函数\"></a>升级函数</h5><p>每种属性的精灵有着不同的升级函数，当经验累积到一定程度，就会自动升级</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Speed::level_up_attribute</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;atk += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">4</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;atk_debuff += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">2</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;def += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">2</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;def_debuff += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">2</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;hp += <span class=\"keyword\">this</span>-&gt;level;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;speed += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">4</span>;<span class=\"comment\">//speed应该是闪避速度，攻击间隔才是攻击速度</span></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;speed_debuff += <span class=\"keyword\">this</span>-&gt;level / <span class=\"number\">4</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;crit_rate += <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;attack_interval -= <span class=\"number\">50</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;atk_debuff = <span class=\"keyword\">this</span>-&gt;atk;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;def_debuff = <span class=\"keyword\">this</span>-&gt;def;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;speed_debuff = <span class=\"keyword\">this</span>-&gt;speed;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_hp = <span class=\"keyword\">this</span>-&gt;hp;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>-&gt;remaining_pp = <span class=\"keyword\">this</span>-&gt;total_pp;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"题目二-1\"><a href=\"#题目二-1\" class=\"headerlink\" title=\"题目二\"></a>题目二</h3><h4 id=\"客户端-1\"><a href=\"#客户端-1\" class=\"headerlink\" title=\"客户端\"></a>客户端</h4><h5 id=\"构造函数\"><a href=\"#构造函数\" class=\"headerlink\" title=\"构造函数\"></a>构造函数</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">server::server()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    WSADATA wsaData;</span><br><span class=\"line\">    WSAStartup(MAKEWORD(<span class=\"number\">2</span>, <span class=\"number\">2</span>), &amp;wsaData);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//创建套接字</span></span><br><span class=\"line\">    sock = socket(PF_INET, SOCK_DGRAM, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//绑定套接字</span></span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(&amp;servAddr, <span class=\"number\">0</span>, <span class=\"keyword\">sizeof</span>(servAddr));  <span class=\"comment\">//每个字节都用0填充</span></span><br><span class=\"line\">    servAddr.sin_family = PF_INET;  <span class=\"comment\">//使用IPv4地址</span></span><br><span class=\"line\">    servAddr.sin_addr.s_addr = inet_addr(<span class=\"string\">&quot;127.0.0.1&quot;</span>);</span><br><span class=\"line\">    servAddr.sin_port = htons(<span class=\"number\">1234</span>);  <span class=\"comment\">//端口</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"发送登录请求\"><a href=\"#发送登录请求\" class=\"headerlink\" title=\"发送登录请求\"></a>发送登录请求</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::login</span><span class=\"params\">(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> password)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;username = QString::fromStdString(username);</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;1;&quot;</span>;</span><br><span class=\"line\">    msg += username;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += password;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span> &lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">    <span class=\"comment\">//qDebug()&lt;&lt;WSAGetLastError();</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;receive();</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"发送注册请求\"><a href=\"#发送注册请求\" class=\"headerlink\" title=\"发送注册请求\"></a>发送注册请求</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::regist</span><span class=\"params\">(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> password)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;2;&quot;</span>;</span><br><span class=\"line\">    msg += username;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += password;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span> &lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;receive();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"获得所有用户信息\"><a href=\"#获得所有用户信息\" class=\"headerlink\" title=\"获得所有用户信息\"></a>获得所有用户信息</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::get_all_user_information</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg = <span class=\"string\">&quot;3&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;receive();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"获取所有用户在线状态\"><a href=\"#获取所有用户在线状态\" class=\"headerlink\" title=\"获取所有用户在线状态\"></a>获取所有用户在线状态</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::get_all_user_status</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg = <span class=\"string\">&quot;4&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;receive();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"获得某个用户的精灵信息\"><a href=\"#获得某个用户的精灵信息\" class=\"headerlink\" title=\"获得某个用户的精灵信息\"></a>获得某个用户的精灵信息</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::get_user_pet_information</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg = <span class=\"string\">&quot;5;&quot;</span>;</span><br><span class=\"line\">    msg += username;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;receive();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"发送注销请求\"><a href=\"#发送注销请求\" class=\"headerlink\" title=\"发送注销请求\"></a>发送注销请求</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::logout</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg = <span class=\"string\">&quot;6;&quot;</span>;</span><br><span class=\"line\">    msg += username;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"更新用户的精灵信息\"><a href=\"#更新用户的精灵信息\" class=\"headerlink\" title=\"更新用户的精灵信息\"></a>更新用户的精灵信息</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::update_user_pet_information</span><span class=\"params\">(pet_base_class&amp; pet,<span class=\"built_in\">string</span> username)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;7;&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_id());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += username;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += pet.get_name();</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_atk());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_def());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_hp());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_crit_rate());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_speed());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_level());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_exp());</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"更新用户的信息\"><a href=\"#更新用户的信息\" class=\"headerlink\" title=\"更新用户的信息\"></a>更新用户的信息</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::update_user_information</span><span class=\"params\">(user&amp; u)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;8;&quot;</span>;</span><br><span class=\"line\">    msg += u.user_name;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += u.user_password;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(u.win_session);</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(u.total_session);</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(u.senior_pet_medal);</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(u.number_pet_medal);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"删除用户宠物\"><a href=\"#删除用户宠物\" class=\"headerlink\" title=\"删除用户宠物\"></a>删除用户宠物</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::delete_user_pet</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;9;&quot;</span>;</span><br><span class=\"line\">    msg += to_string(id);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"获得服务器端宠物信息\"><a href=\"#获得服务器端宠物信息\" class=\"headerlink\" title=\"获得服务器端宠物信息\"></a>获得服务器端宠物信息</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::get_server_pet_information</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg = <span class=\"string\">&quot;:&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"随机获得一个一级的宠物\"><a href=\"#随机获得一个一级的宠物\" class=\"headerlink\" title=\"随机获得一个一级的宠物\"></a>随机获得一个一级的宠物</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::get_1_level_pet</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg = <span class=\"string\">&quot;;;&quot;</span>;</span><br><span class=\"line\">    msg += username;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"插入一个宠物\"><a href=\"#插入一个宠物\" class=\"headerlink\" title=\"插入一个宠物\"></a>插入一个宠物</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::insert_pet</span><span class=\"params\">(pet_base_class&amp; pet,<span class=\"built_in\">string</span> username)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;&gt;;&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_id());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += username;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += pet.get_name();</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_atk());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_def());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_hp());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_crit_rate());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_speed());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_level());</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;,&quot;</span>;</span><br><span class=\"line\">    msg += to_string(pet.get_exp());</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"随机获得三个宠物\"><a href=\"#随机获得三个宠物\" class=\"headerlink\" title=\"随机获得三个宠物\"></a>随机获得三个宠物</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::get_random_3_pet</span><span class=\"params\">(<span class=\"built_in\">string</span> username)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">    msg += <span class=\"string\">&quot;?;&quot;</span>;</span><br><span class=\"line\">    msg += username;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* ch = msg.c_str();</span><br><span class=\"line\">    qDebug() &lt;&lt; <span class=\"string\">&quot;clinet:&quot;</span>&lt;&lt; ch;</span><br><span class=\"line\">    sendto(sock, ch, <span class=\"built_in\">strlen</span>(ch), <span class=\"number\">0</span>, (struct sockaddr*)&amp;servAddr, <span class=\"keyword\">sizeof</span>(servAddr));</span><br><span class=\"line\">    <span class=\"keyword\">this</span>-&gt;receive();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"接收来自服务器的信息\"><a href=\"#接收来自服务器的信息\" class=\"headerlink\" title=\"接收来自服务器的信息\"></a>接收来自服务器的信息</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::receive</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> addrLen = <span class=\"keyword\">sizeof</span>(fromAddr);</span><br><span class=\"line\">    <span class=\"keyword\">char</span> buf[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    <span class=\"built_in\">memset</span>(buf, <span class=\"number\">0</span>, <span class=\"keyword\">sizeof</span>(buf));</span><br><span class=\"line\">    recvfrom(sock, buf, <span class=\"number\">1023</span>, <span class=\"number\">0</span>, &amp;fromAddr, &amp;addrLen);<span class=\"comment\">//接收请求报文</span></span><br><span class=\"line\">    <span class=\"comment\">//if (buff_size &lt;= 0) continue;</span></span><br><span class=\"line\">    qDebug() &lt;&lt;  <span class=\"string\">&quot;server:&quot;</span> &lt;&lt; buf;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span>(buf[<span class=\"number\">0</span>]-<span class=\"string\">&#x27;0&#x27;</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">        <span class=\"comment\">//login successful</span></span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">login_success</span><span class=\"params\">(<span class=\"keyword\">this</span>-&gt;username)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">warning</span><span class=\"params\">(<span class=\"string\">&quot;Wrong password!&quot;</span>)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">warning</span><span class=\"params\">(<span class=\"string\">&quot;User does not exist!&quot;</span>)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">warning</span><span class=\"params\">(<span class=\"string\">&quot;User already exists!&quot;</span>)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">5</span>:</span><br><span class=\"line\">        <span class=\"comment\">//regist successful</span></span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">warning</span><span class=\"params\">(<span class=\"string\">&quot;Regist successful! Login again please&quot;</span>)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">6</span>:</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">        user* u = <span class=\"keyword\">new</span> user;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">        u-&gt;user_name = msg; msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">        u-&gt;user_password = msg; msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">        u-&gt;win_session = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">        u-&gt;total_session = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">        u-&gt;senior_pet_medal = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">        u-&gt;number_pet_medal = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">init_user</span><span class=\"params\">(*u)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> u;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">7</span>:</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> msg = buf;</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">refresh_pet_backpack</span><span class=\"params\">(msg)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">8</span>:</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> msg = buf;</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">refresh_user_info</span><span class=\"params\">(msg)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">9</span>:</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> msg = buf;</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">refresh_user_status</span><span class=\"params\">(msg)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">10</span>:</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> msg = buf;</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">receive_pet_information</span><span class=\"params\">(msg)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">11</span>:</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> msg = buf;</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">show_choose_defeat_pet</span><span class=\"params\">(msg)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">12</span>:</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> msg = buf;</span><br><span class=\"line\">        <span class=\"function\">emit <span class=\"title\">refresh_user_medal</span><span class=\"params\">(msg)</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"服务器端-1\"><a href=\"#服务器端-1\" class=\"headerlink\" title=\"服务器端\"></a>服务器端</h4><h5 id=\"接收来自客户端的信息\"><a href=\"#接收来自客户端的信息\" class=\"headerlink\" title=\"接收来自客户端的信息\"></a>接收来自客户端的信息</h5><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">server::receive</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">char</span> buf[<span class=\"number\">1024</span>];</span><br><span class=\"line\">        <span class=\"built_in\">memset</span>(buf, <span class=\"number\">0</span>, <span class=\"keyword\">sizeof</span>(buf));</span><br><span class=\"line\">        <span class=\"keyword\">int</span> nSize = <span class=\"keyword\">sizeof</span>(SOCKADDR);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> buff_size = recvfrom(sock, buf, <span class=\"number\">1023</span>, <span class=\"number\">0</span>, (struct sockaddr*)&amp;clntAddr, &amp;nSize);<span class=\"comment\">//接收请求报文 </span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (buff_size &lt;= <span class=\"number\">0</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%s\\n&quot;</span>, buf);</span><br><span class=\"line\">        <span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;form ip adrress&quot;</span> &lt;&lt; ntohl(clntAddr.sin_addr.s_addr) &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (buf[<span class=\"number\">0</span>] - <span class=\"string\">&#x27;0&#x27;</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//登陆请求,buf里包含着用户名和密码，中间用，分隔     1;username,password</span></span><br><span class=\"line\">            <span class=\"built_in\">string</span> uname, pword;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                uname += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                pword += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (deal_login(uname, pword))</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//注册请求，buf里包含着用户名和密码，中间用，分隔     2;username,password</span></span><br><span class=\"line\">            <span class=\"built_in\">string</span> uname, pword;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                uname += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                pword += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            deal_regist(uname, pword);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//获取所有的用户信息   3</span></span><br><span class=\"line\">            send_all_user_information();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//获得用户在线状态   4</span></span><br><span class=\"line\">            send_all_user_status();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">5</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//获得某用户的精灵信息  5;uname</span></span><br><span class=\"line\">            <span class=\"built_in\">string</span> uname;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                uname += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            send_user_pet_infomation(uname);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">6</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//退出登录 6;uname</span></span><br><span class=\"line\">            <span class=\"built_in\">string</span> uname;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                uname += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            deal_logout(uname);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">7</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//更新某用户的精灵信息     7;id,username,name,atk,def,hp,crit_rate,speed,level,exp</span></span><br><span class=\"line\">            <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">            pet *p = <span class=\"keyword\">new</span> pet;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;id = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;username = msg; msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;name = msg; msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;atk = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;def = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;hp = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;crit_rate = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;speed = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;level = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;<span class=\"built_in\">exp</span> = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            update_user_pet_information(*p);</span><br><span class=\"line\">            p-&gt;print();</span><br><span class=\"line\">            <span class=\"keyword\">delete</span> p;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">8</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//更新用户信息     8;name,password,win,total,senior_pet_model,number_pet_medel </span></span><br><span class=\"line\">            <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">            user* u = <span class=\"keyword\">new</span> user;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            u-&gt;user_name = msg; msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            u-&gt;user_password = msg; msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            u-&gt;win_session = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            u-&gt;total_session = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            u-&gt;senior_pet_medal = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            u-&gt;number_pet_medal = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            update_user_information(*u);</span><br><span class=\"line\">            <span class=\"comment\">//u-&gt;print();</span></span><br><span class=\"line\">            <span class=\"keyword\">delete</span> u;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">9</span>:</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//删除某用户的精灵信息     9;id</span></span><br><span class=\"line\">            <span class=\"built_in\">string</span> id;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                id += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">cout</span> &lt;&lt; id &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">            delete_user_pet(id);</span><br><span class=\"line\">           </span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">10</span>:   <span class=\"comment\">//:冒号</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//发送服务器精灵信息    10</span></span><br><span class=\"line\">            send_server_pet_information();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">11</span>: <span class=\"comment\">//;分号</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">//给用户一个初始精灵    ;;username</span></span><br><span class=\"line\">            <span class=\"built_in\">string</span> uname;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                uname += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> p = rand() % <span class=\"number\">8</span>;</span><br><span class=\"line\">            new_1_level_pet(uname, itos_pet[p]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">12</span>:<span class=\"comment\">//&lt; 小于号 &lt;;uname</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">string</span> uname;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                uname += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            send_user_information(uname);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">13</span>:<span class=\"comment\">//=等号  &lt;;id</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">string</span> id;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                id += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            send_user_pet_through_id(stoi(id));</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">14</span>: <span class=\"comment\">// &gt;大于号   插入获得的精灵  &gt;;id,username,name,atk,def,hp,crit_rate,speed,level,exp</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">string</span> msg;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> i;</span><br><span class=\"line\">            pet* p = <span class=\"keyword\">new</span> pet;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;id = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;username = msg; msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;name = msg; msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;atk = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;def = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;hp = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;crit_rate = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;speed = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;,&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;level = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++) msg += buf[i];</span><br><span class=\"line\">            p-&gt;<span class=\"built_in\">exp</span> = stoi(msg); msg = <span class=\"string\">&quot;&quot;</span>; i++;</span><br><span class=\"line\">            get_pet_when_win(*p);</span><br><span class=\"line\">            p-&gt;print();</span><br><span class=\"line\">            <span class=\"keyword\">delete</span> p;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">15</span>:<span class=\"comment\">//随机三个精灵，  ?;username</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">string</span> uname;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                uname += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            get_random_3_pet(uname);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">16</span>:<span class=\"comment\">//查询用户宠物个数和15级宠物个数</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">string</span> uname;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; buf[i] != <span class=\"string\">&#x27;\\0&#x27;</span>; i++)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                uname += buf[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            get_pet_number(uname);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"54. 螺旋矩阵","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/54.%E8%9E%BA%E6%97%8B%E7%9F%A9%E9%98%B5/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>方向为右下左上，注意dx[4] = {0, 1, -1, 0}</p>\n<p>循环m * n次</p>\n<p>每次将这个数加入数组中，然后计算出下一个位置，判断是否可以走（是否超过范围，是否已经走过）</p>\n<p>如果这个点不能走，那就换个方向</p>\n<p>然后更新到x, y，即下一次循环的数字</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">spiralOrder</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> dx[<span class=\"number\">4</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>&#125;, dy[<span class=\"number\">4</span>] = &#123;<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>, <span class=\"number\">0</span>&#125;;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> n = matrix.size(), m = matrix[<span class=\"number\">0</span>].size();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, x = <span class=\"number\">0</span>, y = <span class=\"number\">0</span>, d = <span class=\"number\">0</span>; i &lt; n * m; i++) &#123;</span><br><span class=\"line\">            res.push_back(matrix[x][y]);</span><br><span class=\"line\">            matrix[x][y] = <span class=\"number\">-101</span>;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> a = x + dx[d], b = y + dy[d];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!(a &gt;= <span class=\"number\">0</span> &amp;&amp; a &lt; n &amp;&amp; b &gt;= <span class=\"number\">0</span> &amp;&amp; b &lt; m &amp;&amp; matrix[a][b] != <span class=\"number\">-101</span>)) &#123;</span><br><span class=\"line\">                d = (++d) % <span class=\"number\">4</span>; </span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            x = x + dx[d], y = y + dy[d];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"88. 合并两个有序数组","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/88.%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>类似归并排序的归并部分，注意，我们要倒着排序，从数组1的第m - 1个数和数组2的第n - 1个数开始，这样nums1中的值就不会被覆盖了</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">merge</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums1, <span class=\"keyword\">int</span> m, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums2, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = n + m - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = m - <span class=\"number\">1</span>, j = n - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(i &gt;= <span class=\"number\">0</span> &amp;&amp; j &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums1[i] &gt;= nums2[j]) nums1[k--] = nums1[i--];</span><br><span class=\"line\">            <span class=\"keyword\">else</span> nums1[k--] = nums2[j--];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//while(i &gt;= 0) nums1[k--] = nums1[i--];</span></span><br><span class=\"line\">        <span class=\"comment\">//这个不需要写，因为本来就在nums1那里</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(j &gt;= <span class=\"number\">0</span>) nums1[k--] = nums2[j--];</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"102. 二叉树的层序遍历","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/102.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>层序遍历，首先将根节点插入队列中（注意不能为空）</p>\n<p>然后获得该层的节点数k，遍历k次，每次取出队头，然后将val插入数组中，并且把该节点的左右子节点放入队尾。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">levelOrder</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">queue</span>&lt;TreeNode*&gt; q;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root) q.push(root);</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q.size()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> k = q.size();</span><br><span class=\"line\">            <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; level;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(k--) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">auto</span> t = q.front();</span><br><span class=\"line\">                q.pop();</span><br><span class=\"line\">                level.push_back(t-&gt;val);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;left) q.push(t-&gt;left);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;right) q.push(t-&gt;right);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            res.push_back(level);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"104. 二叉树的最大深度","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/104.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>找出左子树的最大深度，找出右子数的最大深度，二者之间取一个最大值，然后加上该层，加1。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxDepth</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> max(maxDepth(root-&gt;left), maxDepth(root-&gt;right)) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"103. 二叉树的锯齿形层序遍历","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/103.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%94%AF%E9%BD%BF%E5%BD%A2%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>reverse一遍即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">zigzagLevelOrder</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">queue</span>&lt;TreeNode*&gt; q;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root) q.push(root);</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q.size()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> k = q.size();</span><br><span class=\"line\">            <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; level;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(k--) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">auto</span> t = q.front();</span><br><span class=\"line\">                q.pop();</span><br><span class=\"line\">                level.push_back(t-&gt;val);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;left) q.push(t-&gt;left);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;right) q.push(t-&gt;right);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(cnt % <span class=\"number\">2</span> == <span class=\"number\">1</span>) reverse(level.begin(), level.end());</span><br><span class=\"line\">            cnt++;</span><br><span class=\"line\">            res.push_back(level);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"105. 从前序与中序遍历序列构造二叉树","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/105.%E4%BB%8E%E5%89%8D%E5%BA%8F%E4%B8%8E%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86%E5%BA%8F%E5%88%97%E6%9E%84%E9%80%A0%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>首先用一个哈希表存储inorder，key为数值，value为下标</p>\n<p>preorder的第一个数是头节点</p>\n<p>在inorder中找到该头节点，利用哈希表可以快速找到</p>\n<p>可以计算出inorder头节点左边的长度，就是左子树，右边的长度就是右子数。</p>\n<p>当pl &gt; pr时返回nullptr</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">buildTree</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; preorder, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; inorder)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; inorder.size(); i++) hash[inorder[i]] = i;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> build(preorder, inorder, <span class=\"number\">0</span>, preorder.size() - <span class=\"number\">1</span>, <span class=\"number\">0</span>, inorder.size() - <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">build</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; preorder, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; inorder, <span class=\"keyword\">int</span> pl, <span class=\"keyword\">int</span> pr, <span class=\"keyword\">int</span> il, <span class=\"keyword\">int</span> ir)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(pl &gt; pr) <span class=\"keyword\">return</span> <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = hash[preorder[pl]];</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> root = <span class=\"keyword\">new</span> TreeNode(preorder[pl]);</span><br><span class=\"line\">        root-&gt;left = build(preorder, inorder, pl + <span class=\"number\">1</span>, pl + k - il, il, k - <span class=\"number\">1</span>);</span><br><span class=\"line\">        root-&gt;right = build(preorder, inorder, pl + k - il + <span class=\"number\">1</span>, pr, k + <span class=\"number\">1</span>, ir);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> root;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"144. 二叉树的前序遍历","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/144.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>递归版本很简单</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">preorderTraversal</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        res.push_back(root-&gt;val);</span><br><span class=\"line\">        dfs(root-&gt;left);</span><br><span class=\"line\">        dfs(root-&gt;right);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>迭代版本</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">preorderTraversal</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"built_in\">stack</span>&lt;TreeNode*&gt; stk;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(root || stk.size()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(root) &#123;</span><br><span class=\"line\">                res.push_back(root-&gt;val);</span><br><span class=\"line\">                stk.push(root);</span><br><span class=\"line\">                root = root-&gt;left;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            root = stk.top();</span><br><span class=\"line\">            stk.pop();</span><br><span class=\"line\">            root = root-&gt;right;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"155. 最小栈","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/155.%E6%9C%80%E5%B0%8F%E6%A0%88/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>用两个栈实现，一个正常栈，一个单调栈。</p>\n<p>注意，当两个元素相同时，也要插入单调栈中</p>\n<p>比如 3 3 3 3 3 3</p>\n<p>这都要插到单调栈中，否则，当要pop时，我们不知道是否要pop单调栈</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MinStack</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; stk;</span><br><span class=\"line\">    <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; minp;</span><br><span class=\"line\">    <span class=\"comment\">/** initialize your data structure here. */</span></span><br><span class=\"line\">    MinStack() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">push</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">        stk.push(x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(minp.empty() || minp.top() &gt;= x) minp.push(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> x = stk.top();</span><br><span class=\"line\">        stk.pop();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(minp.top() == x) minp.pop();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">top</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> stk.top();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getMin</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> minp.top();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your MinStack object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * MinStack* obj = new MinStack();</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;push(x);</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;pop();</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_3 = obj-&gt;top();</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_4 = obj-&gt;getMin();</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"2.两数相加","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/2.%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>注意，需要new节点</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> dummy = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">-1</span>), cur = dummy;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l1 || l2 || t) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(l1) t += l1-&gt;val, l1 = l1-&gt;next;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(l2) t += l2-&gt;val, l2 = l2-&gt;next;</span><br><span class=\"line\">            cur = cur-&gt;next = <span class=\"keyword\">new</span> ListNode(t % <span class=\"number\">10</span>);</span><br><span class=\"line\">            t /= <span class=\"number\">10</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dummy-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"300. 最长递增子序列","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/300.%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>注意是最长上升子序列，不是最大子段和</p>\n<p>f[i]表示以i结尾的上升子序列的长度</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">lengthOfLIS</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(nums.size())</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = INT_MIN;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; i; j++) </span><br><span class=\"line\">                <span class=\"keyword\">if</span>(nums[i] &gt; nums[j])</span><br><span class=\"line\">                    f[i] = max(f[i], f[j]);</span><br><span class=\"line\">            f[i] += <span class=\"number\">1</span>;</span><br><span class=\"line\">            res = max(res, f[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"704.二分查找","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/704.%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>两个模板应该都是可以的，check函数</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">search</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r + <span class=\"number\">1</span> &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &lt;= target) l = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> r = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"comment\">// int mid = l + r &gt;&gt; 1;</span></span><br><span class=\"line\">            <span class=\"comment\">// if(nums[mid] &lt; target) l = mid + 1;</span></span><br><span class=\"line\">            <span class=\"comment\">// else r = mid;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums[l] == target) <span class=\"keyword\">return</span> l;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n","categories":["LeetCode"]},{"title":"剑指 Offer 22. 链表中倒数第k个节点","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/%E5%89%91%E6%8C%87Offer22.%E9%93%BE%E8%A1%A8%E4%B8%AD%E5%80%92%E6%95%B0%E7%AC%ACk%E4%B8%AA%E8%8A%82%E7%82%B9/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>快指针先走k步，然后快慢指针一起走，直到快指针为空</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">getKthFromEnd</span><span class=\"params\">(ListNode* head, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> fast = head, slow = head;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(k--) fast = fast-&gt;next;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(fast) fast = fast-&gt;next, slow = slow-&gt;next;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> slow;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"url":"/2021/03/16/%E5%88%B7%E9%9D%A2%E7%BB%8F/5/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"进程线程区别\"><a href=\"#进程线程区别\" class=\"headerlink\" title=\"进程线程区别\"></a>进程线程区别</h3><p>根本区别：进程是操作系统资源分配的基本单位，而线程是cpu调度的基本单位</p>\n<p>在开销方面：每个进程都有独立的代码和数据空间（程序上下文），程序之间的切换会有较大的开销；线程可以看作轻量级进程，同一类线程共享代码和数据空间，每个线程都有自己独立运行的运行栈和程序计数器，线程之间切换的开销小</p>\n<p>所处环境：再操作系统中能同时运行多个进程；而在同一个进程中有多个线程同时执行（通过cpu调度，每个时间片只有一个线程在执行）</p>\n<p>内存分配方面，系统在运行的时候会为每个进程分配不同的内存空间；而对线程而言，出来cpu外，系统不会为线程分配内存（线程所使用的资源来自其所属进程的资源）</p>\n<h3 id=\"进程调度算法\"><a href=\"#进程调度算法\" class=\"headerlink\" title=\"进程调度算法\"></a>进程调度算法</h3><h4 id=\"先来先服务\"><a href=\"#先来先服务\" class=\"headerlink\" title=\"先来先服务\"></a>先来先服务</h4><p>最简单的一种调度算法。当每个进程就绪后，它就加入就绪队列。当前正运行的进程停止执行后，选择在就绪队列中存在时间最长的进程执行。适合长作业，不适合短作业</p>\n<h4 id=\"时间片轮转\"><a href=\"#时间片轮转\" class=\"headerlink\" title=\"时间片轮转\"></a>时间片轮转</h4><p>轮转法是基于抢占策略的，以一个周期性间隔产生时钟中断，当中断发生后，当前正在执行的进程被置于就绪队列中，然后基于先来先服务的策略选择下一个就绪作业。</p>\n<h4 id=\"短进程优先调度\"><a href=\"#短进程优先调度\" class=\"headerlink\" title=\"短进程优先调度\"></a>短进程优先调度</h4><p>选择预计处理时间最短的作业</p>\n<h3 id=\"页面置换算法\"><a href=\"#页面置换算法\" class=\"headerlink\" title=\"页面置换算法\"></a>页面置换算法</h3><p>地址映射过程中，若在页面中发现所要访问的页面不在内存中，则产生缺页中断。当发生缺页中断时，如果操作系统内存中没有空闲页面，则操作系统必须在内存中选择一个页面将其移出内存，以便为即将调入内存中的页面让出空间。而用来选择淘汰哪一个页面的规则叫做页面置换算法。</p>\n<h4 id=\"最佳置换算法OPT\"><a href=\"#最佳置换算法OPT\" class=\"headerlink\" title=\"最佳置换算法OPT\"></a>最佳置换算法OPT</h4><p>从内存中移出永远不再需要的页面；如果没有这样的页面，则选择最长时间不需要访问的页面。这样可以保证最低的缺页率。但是，我们是无法直到哪个页面不会再被使用，因此这是一种理想化的算法，可以用来评价其他算法。</p>\n<h4 id=\"先进先出算法FIFO\"><a href=\"#先进先出算法FIFO\" class=\"headerlink\" title=\"先进先出算法FIFO\"></a>先进先出算法FIFO</h4><p>最简单的页面置换算法。当需要淘汰一个页面时，总是选择驻留主存时间最长的页面进行淘汰，即先进入主存的页面先淘汰。理由是：最早调入主存的页面不再被使用的可能性最大。FIFO算法还会产生当所分配的物理块数增大而页故障不减反增的异常现象。belady异常</p>\n<h4 id=\"最近最久未使用算法LRU\"><a href=\"#最近最久未使用算法LRU\" class=\"headerlink\" title=\"最近最久未使用算法LRU\"></a>最近最久未使用算法LRU</h4><p>利用局部性原理，利用最近的过去预测最近的将来。局部性原理，任务过去一段时间里不曾被访问的页面，再最近的将来可能也不会被访问。当要淘汰一个页面时，总是选择在最近一段时间内最久不用的页面予以淘汰。</p>\n<p>LRU是怎么实现的，哈希表+双链表</p>\n<h3 id=\"写时复制\"><a href=\"#写时复制\" class=\"headerlink\" title=\"写时复制\"></a>写时复制</h3><p>在linux程序中，fork()会产生一个和父进程完全相同的子进程，但子进程在此后多会exec系统调用，出于效率考虑，linux引入了写时复制技术，也就是只有进程空间的各段内容要发生变化时，才会将父进程内容复制一份给子进程。</p>\n<p>那么子进程的物理空间没有代码，怎么去取指令执行exec系统调用呢？</p>\n<p>在fork之后exec之前两个进程用的是相同的物理空间，子进程的代码段，数据段，堆栈都是指向父进程的物理空间，也就是说，两者的虚拟空间不同，但其对应的物理空间是同一个。当父子进程中有更改相应段的行为发生时，再为子进程相应的段分配物理空间，如果不是因为exec，内核会给子进程的数据段，堆栈段分配相应的物理空间，而代码段继续共享父进程的物理空间（两者的代码完全相同）。而如果是因为exec，由于两者执行的代码不同，子进程的代码段也会分配单独的物理空间。</p>\n<p>写时拷贝是一种可以推迟甚至免除拷贝数据的技术。资源的复制只有在需要写入时才进行，在此之前，只是以只读方式共享。这种技术使地址空间上页的拷贝被推迟到实际发生写入时。再页根本不会被写入的情况下举例来说，fork()后立即调用exec()，就无须复制了。fork()的实际开销就是复制父进程的页表以及给子进程创建唯一的进程描述符。</p>\n<h3 id=\"OSI七层网络模型\"><a href=\"#OSI七层网络模型\" class=\"headerlink\" title=\"OSI七层网络模型\"></a>OSI七层网络模型</h3><p>物理层  数据链路层  网络层  传输层  会话层   表示层  应用层  </p>\n<h3 id=\"UDP-TCP-区别\"><a href=\"#UDP-TCP-区别\" class=\"headerlink\" title=\"UDP TCP 区别\"></a>UDP TCP 区别</h3><h4 id=\"UDP\"><a href=\"#UDP\" class=\"headerlink\" title=\"UDP\"></a>UDP</h4><p>UDP协议全程是用户数据报协议，在网络中它与TCP协议一样用于处理数据包，是一种无连接的协议。位于传输层，处于IP协议的上一层。报文发送之后，是无法得知其是否安全完整到达的，尽力而为的交付</p>\n<p>面向无连接。在发送端，应用层将数据传递给传输层的UDP协议，UDP只会给数据增加一个UDP头标识是UDP协议，然后就传递给网络层了。</p>\n<p>在接收端，网络层将数据传递给传输层，UDP只去除IP报文头就传递给应用层</p>\n<p>有着单播、多播、广播的功能</p>\n<p>UDP是面向报文的</p>\n<p>不可靠</p>\n<p>头部开销小，传输数据报文时是很高效的</p>\n<h4 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP\"></a>TCP</h4><p>第一次握手：客户端发送，SYN = 1, seq = x，请求发送后，客户端便进入SYN-SENT状态</p>\n<p>第二次握手：服务端收到该报文后，如果同意连接，则会发送一个应答，该应答中也会包含自身的数据数据的初始序号，发送完成后便进入SYN-RECEIVE状态 SYN = 1, seq = y, ack = x + 1;</p>\n<p>第三次握手：客户端返回堆服务端确认的确认，SYN = 0, seq = x + 1, ack = y + 1;客户端发完这个报文段后便进入了ESTABLISHED状态。服务端收到这个应答后也进入了ESTABLISHED状态，此时连接建立成功</p>\n<p>TCP核心思想：既要保证数据可靠传输，又要提高传输的效率，而用三次恰恰可以满足上面两方面的需求。</p>\n"},{"title":"110. 平衡二叉树","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/110.%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>该题比较简单</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">bool</span> ans = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isBalanced</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = dfs(root-&gt;left);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> r = dfs(root-&gt;right);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">abs</span>(l - r) &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            ans = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> max(l, r) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"33. 搜索旋转排序数组","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/33.%E6%90%9C%E7%B4%A2%E6%97%8B%E8%BD%AC%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>注意细节，尤其是最下面那里用r，不要用l</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">search</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r + <span class=\"number\">1</span> &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &lt; nums[<span class=\"number\">0</span>]) r = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> l = mid;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(target &lt; nums[<span class=\"number\">0</span>]) l = r + <span class=\"number\">1</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> l = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//这个地方两个模板都是可以的</span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &lt; target) l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> r = mid;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//注意用r，不要用l，对于[1], 0这个例子来说，l = 1, r = 0,会越界</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums[r] != target) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> l;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"232. 用栈实现队列","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/232.%E7%94%A8%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>使用两个栈</p>\n<p>push，和empty操作在stk1进行即可。</p>\n<p>pop（）操作，把stk1的元素全部移动到stk2中，那么stk1的最后一个元素就成了stk2.top()，然后再把stk2移动到stk1.</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyQueue</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; stk1, stk2;</span><br><span class=\"line\">    <span class=\"comment\">/** Initialize your data structure here. */</span></span><br><span class=\"line\">    MyQueue() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/** Push element x to the back of queue. */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">push</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">        stk1.push(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/** Removes the element from in front of queue and returns that element. */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">pop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stk1.size()) &#123;</span><br><span class=\"line\">            stk2.push(stk1.top());</span><br><span class=\"line\">            stk1.pop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> t = stk2.top();</span><br><span class=\"line\">        stk2.pop();</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stk2.size()) &#123;</span><br><span class=\"line\">            stk1.push(stk2.top());</span><br><span class=\"line\">            stk2.pop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> t;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/** Get the front element. */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">peek</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stk1.size()) &#123;</span><br><span class=\"line\">            stk2.push(stk1.top());</span><br><span class=\"line\">            stk1.pop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> t = stk2.top();</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stk2.size()) &#123;</span><br><span class=\"line\">            stk1.push(stk2.top());</span><br><span class=\"line\">            stk2.pop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> t;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/** Returns whether the queue is empty. */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">empty</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> stk1.empty();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your MyQueue object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * MyQueue* obj = new MyQueue();</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;push(x);</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_2 = obj-&gt;pop();</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_3 = obj-&gt;peek();</span></span><br><span class=\"line\"><span class=\"comment\"> * bool param_4 = obj-&gt;empty();</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"46. 全排列","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/46.%E5%85%A8%E6%8E%92%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>a注意 st数组要初始化长度，path最开始传参传个{}</p>\n<p>其实可以定义成类成员变量，就可以不用传递了。</p>\n<p>vector&lt;int&gt; path</p>\n<p>构造函数中，初始化大小 path = vector&lt;int&gt;(nums.size());</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">permute</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt; <span class=\"title\">st</span><span class=\"params\">(nums.size())</span></span>;</span><br><span class=\"line\">        dfs(nums, <span class=\"number\">0</span>, res, &#123;&#125;, st);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> u, <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; res, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; path, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt;&amp; st)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(u == nums.size()) res.push_back(path);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!st[i]) &#123;</span><br><span class=\"line\">                    st[i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                    path.push_back(nums[i]);</span><br><span class=\"line\">                    dfs(nums, u + <span class=\"number\">1</span>, res, path, st);</span><br><span class=\"line\">                    st[i] = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    path.pop_back();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"543. 二叉树的直径","url":"/2021/03/15/%E5%8A%9B%E6%89%A3/543.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E7%9B%B4%E5%BE%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>一个节点root，找出它左子树的最大深度，找出它右子树的最大深度，二者相加就是穿过root节点的最大直径</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">diameterOfBinaryTree</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> left = dfs(root-&gt;left);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> right = dfs(root-&gt;right);</span><br><span class=\"line\">        ans = max(ans, left + right);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> max(left, right) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"69. x 的平方根","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/69.x%E7%9A%84%E5%B9%B3%E6%96%B9%E6%A0%B9/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>二分，注意不要用mid * mid &lt;= x,会爆int，用 mid &lt;= x / mid;</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">mySqrt</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = x / <span class=\"number\">2</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r + <span class=\"number\">1</span> &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(mid &lt;= x / mid) l = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> r = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"3.16字节跳动一面二面","url":"/2021/03/16/%E9%9D%A2%E8%AF%95/3.16%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E4%B8%80%E9%9D%A2%E4%BA%8C%E9%9D%A2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"大体情况\"><a href=\"#大体情况\" class=\"headerlink\" title=\"大体情况\"></a>大体情况</h2><p>下午三点开始一面，大约持续了45分钟，主要在问项目，同时穿插一些操作系统，计算机网络的知识。二面4点开始，问了一道算法题和c++相关的知识，持续45分钟。</p>\n<h2 id=\"一面\"><a href=\"#一面\" class=\"headerlink\" title=\"一面\"></a>一面</h2><p>1、自我介绍，一分钟多一点</p>\n<p>2、讲解项目，问了TCP边界</p>\n<p>3、问有些应用层协议</p>\n<p>4、TCP拆包技术</p>\n<p>5、TCP报文头</p>\n<p>6、单例模式</p>\n<p>7、线程同步手段</p>\n<p>8、互斥锁和自旋锁区别</p>\n<p>9、线程池</p>\n<p>10、32操作系统上的程序最大可以用多少内存 </p>\n<p>11、操作系统抽象，虚拟内存，访问到的页在硬盘上，如何调到内存，详细</p>\n<p>12、DNS报文TTL过期如何处理，没有域名请求时不需要处理TTL过期问题，当有域名请求时再判断是否过期。</p>\n<p>13、一个两位数的质数，将其变换为另一个质数。每次只能改变一位，要求变换后的数字依然是质数。找出从一个质数变换到另一个质数的所有方式。</p>\n<p>把所有的质数找出来，当成一个个点，可以转换的两个质数之间连一条线，作为边。通过图的搜索就能搜到从一个点到另一个点的所有路径。</p>\n<h2 id=\"二面\"><a href=\"#二面\" class=\"headerlink\" title=\"二面\"></a>二面</h2><p>1、0到正无穷，给定一个数n，找出使和为n的组合数量</p>\n<p>比如 5</p>\n<p>1 + 1 + 1 + 1、1 + 2 + 2等等组合，找出总共有多少组合。不会，请求提示，面试官说动态规划，更不会了，继续请求，说类似背包问题，依然不会。然后面试官换了道题。</p>\n<p>2、n个排序数组，合并成一个有序数组</p>\n<p>这个比较简单，多路归并，问了一下复杂度，然后写代码实现。</p>\n<p>3、给了一段c++代码，问哪里有问题</p>\n<p>其实就是深拷贝浅拷贝</p>\n<p>4、指针与引用，面试官说汇编层面引用就是用指针实现的</p>\n<p>区别 指针可以先定义，然后再指向某个对象，可以设置为null；引用必须在定义时绑定到某对象</p>\n<p>​     指针可以改变指向的对象，引用不能改变绑定的对象</p>\n<p>​    对指针进行sizeof操作得到的是指针本身的大小；对引用进行sizeof操作得到的是被绑定到变量占用的内存大小</p>\n<p>​    指针可以有二级、三级等多级指针，引用没有</p>\n<p>函数传引用参数传递的什么？其实就是传递变量的地址。传指针和传地址在汇编层面上的实现是一样的，传引用相当于传指针。</p>\n<p>​    引用是否占用内存？引用保存的就是地址，是需要占内存的。引用占不占内存是不确定的，如果编译器进行了优化，有可能不占内存，传指针和传引用本质上都是把实参的地址压入栈中。</p>\n<p>5、extern “C”</p>\n<p>extern “C”的主要作用就是为了能够正确实现C++代码调用其他C语言代码。加上extern “C”后，会指示编译器将这部分代码按照C语言的方式进行编译。由于C++支持函数重载，因此编译器编译函数过程中会将函数的参数类型也加到编译后的代码中，而不仅仅是函数名。而C语言不支持函数重载，因此编译C语言代码的函数时不会带上函数的参数类型，一般只包括函数名。</p>\n<p>这个功能十分有用处，因为在C++出现以前，很多代码都是C语言写的，而且很底层的库也是C语言写的，为了更好的支持原来的C代码和已经写好的C语言库，需要在C++中尽可能的支持C，而extern “C”就是其中的一个策略。</p>\n<p>由于C、C++编译器对函数的编译处理是不完全相同的，尤其对于C++来说，支持函数的重载，编译后的函数一般是以函数名和形参类型来命名的。</p>\n<p>例如函数void func(int, int)，编译后的可能是_FUN_INT_INT（不同编译器可能不一样，但都类似，用函数名和参数类型来命名编译后的函数名）；而C语言没有类似的重载机制，一般是利用函数名来指明编译后的函数名的，对应上面的函数可能会是_FUN这样的名字</p>\n<p>6、智能指针</p>\n"},{"title":"3.16字节跳动面试","url":"/2021/03/15/%E9%9D%A2%E8%AF%95/3.16%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E9%9D%A2%E8%AF%95/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>明天是我的第一次面试，有点紧张。今天下午接到hr电话约面试时间时，就开始紧张了。吃过晚饭，心情才平静下来。谁都有第一次，第一次一般都会紧张，到了大学，第一次见室友、第一次去餐厅吃饭、第一次找教室上课，难免会紧张。紧张不要紧，重要的是要保持头脑清醒，清醒的头脑才是最重要的。</p>\n<p>想一下如何自我介绍吧，先百度搜一下。</p>\n<p>面试官你好，我叫周瑞发，来自北京邮电大学计算机专业。我在学校努力学习，大三上学期平均分到达90分。平时学校会有很多大作业，我都认真对待，大作业的分数基本上都是90+，最高得到了98分。同时，我还经常担任组长，和队友一起完成项目。平时写代码都是用C++，因此对C++比较熟悉。</p>\n"},{"title":"剑指 Offer 03. 数组中重复的数字","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer03.%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E7%9A%84%E6%95%B0%E5%AD%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>把每个数字都放到对应的位置上，最后出现的结果为，数字都放到对应的位置了，会有多个相同的数字想要放到同一个位置。所以我们写一个while循环，用来把数字交换到对应的位置上。while循环结束后，有两种情况，要么已经放在位置上了，要自己想放的位置已经有数字了，那么此时就找到了重复数字。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">findRepeatNumber</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(nums[i] != i &amp;&amp; nums[i] != nums[nums[i]]) swap(nums[i], nums[nums[i]]);</span><br><span class=\"line\">            <span class=\"comment\">//如果数字没有被放到对应位置，说明对应位置的数字和自己一样，找到了重复数字</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[i] != i) <span class=\"keyword\">return</span> nums[i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>另一种做法，可以把该数对应位置上的数变为负数，标识存在该数。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">findRepeatNumber</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> n = nums.size();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//如果nums[i]位置上的数已经被标记过了，nums[i]和以前的数重复了。</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[<span class=\"built_in\">abs</span>(nums[i])] &lt; <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"built_in\">abs</span>(nums[i]);</span><br><span class=\"line\">            nums[<span class=\"built_in\">abs</span>(nums[i])] *= <span class=\"number\">-1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//最后注意返回0，如果0重复的话，由于0的负数还是0，所以无法进行标记</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 09. 用两个栈实现队列","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer09.%E7%94%A8%E4%B8%A4%E4%B8%AA%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>插入操作在第一个栈中，想要删除时，把栈1中的数移动到栈2中，栈2的top元素就是要删除的元素，删除完成后再移动到栈1中。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CQueue</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; stk1, stk2;</span><br><span class=\"line\">    CQueue() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">appendTail</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>&#123;</span><br><span class=\"line\">        stk1.push(value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">deleteHead</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(stk1.empty()) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stk1.size()) &#123;</span><br><span class=\"line\">            stk2.push(stk1.top());</span><br><span class=\"line\">            stk1.pop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> t = stk2.top();</span><br><span class=\"line\">        stk2.pop();</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stk2.size()) &#123;</span><br><span class=\"line\">            stk1.push(stk2.top());</span><br><span class=\"line\">            stk2.pop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> t;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your CQueue object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * CQueue* obj = new CQueue();</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;appendTail(value);</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_2 = obj-&gt;deleteHead();</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 07. 重建二叉树","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer07.%E9%87%8D%E5%BB%BA%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>注意 </p>\n<p>前序遍历   <strong>根</strong> 左子树  右子树</p>\n<p>中序遍历    左子树 <strong>根</strong> 右子树</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">buildTree</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; preorder, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; inorder)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; inorder.size(); i++) hash[inorder[i]] = i;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> build(preorder, <span class=\"number\">0</span>, preorder.size() - <span class=\"number\">1</span>, inorder, <span class=\"number\">0</span>, inorder.size() - <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">build</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; preorder, <span class=\"keyword\">int</span> pl, <span class=\"keyword\">int</span> pr, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; inorder, <span class=\"keyword\">int</span> il, <span class=\"keyword\">int</span> ir)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(pl &gt; pr) <span class=\"keyword\">return</span> <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = hash[preorder[pl]];</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> root = <span class=\"keyword\">new</span> TreeNode(preorder[pl]);</span><br><span class=\"line\">        root-&gt;left = build(preorder, pl + <span class=\"number\">1</span>, pl + k - il, inorder, il, k - <span class=\"number\">1</span>);</span><br><span class=\"line\">        root-&gt;right = build(preorder, pl + k - il + <span class=\"number\">1</span>, pr, inorder, k + <span class=\"number\">1</span>, ir);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> root;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 10- I. 斐波那契数列","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer10-I.%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"递归\"><a href=\"#递归\" class=\"headerlink\" title=\"递归\"></a>递归</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">fib</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n == <span class=\"number\">0</span> || n == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> n;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (fib(n - <span class=\"number\">1</span>) + fib(n - <span class=\"number\">2</span>)) % <span class=\"number\">1000000007</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"动态规划\"><a href=\"#动态规划\" class=\"headerlink\" title=\"动态规划\"></a>动态规划</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">fib</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n == <span class=\"number\">0</span> || n == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> n;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(n + <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">        f[<span class=\"number\">0</span>] = <span class=\"number\">0</span>, f[<span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">            f[i] = (f[i - <span class=\"number\">1</span>] + f[i - <span class=\"number\">2</span>]) % <span class=\"number\">1000000007</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[n];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"迭代\"><a href=\"#迭代\" class=\"headerlink\" title=\"迭代\"></a>迭代</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">fib</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n == <span class=\"number\">0</span> || n == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> n;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = <span class=\"number\">0</span>, b = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> t = b;</span><br><span class=\"line\">            b = (b + a) % <span class=\"number\">1000000007</span>;</span><br><span class=\"line\">            a = t;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 10- II. 青蛙跳台阶问题","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer10-II.%E9%9D%92%E8%9B%99%E8%B7%B3%E5%8F%B0%E9%98%B6%E9%97%AE%E9%A2%98/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>动态规划</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> MOD = <span class=\"number\">1000000007</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">numWays</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n &lt; <span class=\"number\">2</span>) <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">f</span><span class=\"params\">(n + <span class=\"number\">1</span>)</span></span>;</span><br><span class=\"line\">        f[<span class=\"number\">0</span>] = <span class=\"number\">1</span>, f[<span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">            f[i] = (f[i - <span class=\"number\">1</span>] + f[i - <span class=\"number\">2</span>]) % MOD;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> f[n];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>优化</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> MOD = <span class=\"number\">1000000007</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">numWays</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n &lt; <span class=\"number\">2</span>) <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>, b = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> t = b;</span><br><span class=\"line\">            b = (a + b) % MOD;</span><br><span class=\"line\">            a = t;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 11. 旋转数组的最小数字","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer11.%E6%97%8B%E8%BD%AC%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%B0%8F%E6%95%B0%E5%AD%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>用二分来做，麻烦的是有重复的元素</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210317120257458.png\" alt=\"image-20210317120257458\"></p>\n<p>要去掉后半部分与number[0]重复的元素，这样，小于number[0]的就属与后半部分，大于等于number[0]的属于前半部分。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">minArray</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; numbers)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> n = numbers.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"comment\">//从数组尾部移除与number[0]相等的元素。</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n &gt; <span class=\"number\">0</span> &amp;&amp; numbers[<span class=\"number\">0</span>] == numbers[n]) n--;</span><br><span class=\"line\">        <span class=\"comment\">//如果是单调上升，数组没有发生旋转，那么直接返回number[0]。</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(numbers[n] &gt;= numbers[<span class=\"number\">0</span>]) <span class=\"keyword\">return</span> numbers[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = n;</span><br><span class=\"line\">        <span class=\"comment\">//开始二分</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(numbers[mid] &gt;= numbers[<span class=\"number\">0</span>]) l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> r = mid;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> numbers[r];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 04. 二维数组中的查找","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer04.%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9F%A5%E6%89%BE/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>从右上角开始看，如果右上角的数大于target，那么则表明对应的一行不用管了</p>\n<p>如果小于target，则表明对应的列不用管了。</p>\n<p>复杂度为O(m + n)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">findNumberIn2DArray</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; matrix, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(matrix.empty() || matrix[<span class=\"number\">0</span>].empty()) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = matrix[<span class=\"number\">0</span>].size() - <span class=\"number\">1</span>; i &lt; matrix.size() &amp;&amp; j &gt;= <span class=\"number\">0</span>;) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(matrix[i][j] &lt; target) i++;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(matrix[i][j] &gt; target) j--;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 13. 机器人的运动范围","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer13.%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84%E8%BF%90%E5%8A%A8%E8%8C%83%E5%9B%B4/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"BFS\"><a href=\"#BFS\" class=\"headerlink\" title=\"BFS\"></a>BFS</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getSum</span><span class=\"params\">(<span class=\"keyword\">int</span> x )</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(x) &#123;</span><br><span class=\"line\">            res += x % <span class=\"number\">10</span>;</span><br><span class=\"line\">            x /= <span class=\"number\">10</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getSum</span><span class=\"params\">(<span class=\"built_in\">pair</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt; x)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> getSum(x.first) + getSum(x.second);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">movingCount</span><span class=\"params\">(<span class=\"keyword\">int</span> m, <span class=\"keyword\">int</span> n, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"built_in\">queue</span>&lt;<span class=\"built_in\">pair</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt;&gt; q;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt;&gt; <span class=\"title\">st</span><span class=\"params\">(m, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt;(n, <span class=\"literal\">false</span>))</span></span>;</span><br><span class=\"line\">        q.push(&#123;<span class=\"number\">0</span>, <span class=\"number\">0</span>&#125;);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> dx[<span class=\"number\">4</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>&#125;, dy[<span class=\"number\">4</span>] = &#123;<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>, <span class=\"number\">0</span>&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q.size()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> t = q.front();</span><br><span class=\"line\">            q.pop();</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(getSum(t) &gt; k || st[t.first][t.second]) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            res++;</span><br><span class=\"line\">            st[t.first][t.second] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> a = t.first + dx[i], b = t.second + dy[i];</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(a &gt;= <span class=\"number\">0</span> &amp;&amp; a &lt; m &amp;&amp; b &gt;= <span class=\"number\">0</span> &amp;&amp; b &lt; n &amp;&amp; !st[a][b]) q.push(&#123;a, b&#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"DFS\"><a href=\"#DFS\" class=\"headerlink\" title=\"DFS\"></a>DFS</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getSum</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(x) &#123;</span><br><span class=\"line\">            res += x % <span class=\"number\">10</span>;</span><br><span class=\"line\">            x /= <span class=\"number\">10</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">movingCount</span><span class=\"params\">(<span class=\"keyword\">int</span> m, <span class=\"keyword\">int</span> n, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt;&gt; <span class=\"title\">st</span><span class=\"params\">(m, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt;(n, <span class=\"literal\">false</span>))</span></span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(m, n, k, <span class=\"number\">0</span>, <span class=\"number\">0</span>, st);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> dx[<span class=\"number\">4</span>] = &#123;<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>, <span class=\"number\">0</span>&#125;, dy[<span class=\"number\">4</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"keyword\">int</span> m, <span class=\"keyword\">int</span> n, <span class=\"keyword\">int</span> k, <span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y, <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">bool</span>&gt;&gt;&amp; st)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(x &lt; <span class=\"number\">0</span> || x &gt;= m || y &lt; <span class=\"number\">0</span> || y &gt;= n || getSum(x) + getSum(y) &gt; k || st[x][y])</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        st[x][y] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) </span><br><span class=\"line\">            res += dfs(m, n, k, x + dx[i], y + dy[i], st);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 14- I. 剪绳子","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer14-I.%E5%89%AA%E7%BB%B3%E5%AD%90/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>注意当绳子长度小于等于3时，由于至少分两段，所以返回1 * (n - 1)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">cuttingRope</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n &lt;= <span class=\"number\">3</span>) <span class=\"keyword\">return</span> <span class=\"number\">1</span> * ( n - <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"comment\">//尽可能多的3</span></span><br><span class=\"line\">        <span class=\"comment\">//全3、一个2、两个2</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n % <span class=\"number\">3</span> == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            res = <span class=\"number\">4</span>;</span><br><span class=\"line\">            n -= <span class=\"number\">4</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(n % <span class=\"number\">3</span> == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">            res = <span class=\"number\">2</span>;</span><br><span class=\"line\">            n -= <span class=\"number\">2</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = n / <span class=\"number\">3</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(k--) res *= <span class=\"number\">3</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 14- II. 剪绳子 II","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer14-II.%E5%89%AA%E7%BB%B3%E5%AD%90II/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span></span><br><span class=\"line\">    <span class=\"keyword\">typedef</span> <span class=\"keyword\">long</span> <span class=\"keyword\">long</span> LL;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">int</span> MOD = <span class=\"number\">1000000007</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">cuttingRope</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n = <span class=\"number\">3</span>) <span class=\"keyword\">return</span> <span class=\"number\">1</span>  (n - <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n % <span class=\"number\">3</span> == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            res = <span class=\"number\">4</span>;</span><br><span class=\"line\">            n -= <span class=\"number\">4</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(n % <span class=\"number\">3</span> == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">            res = <span class=\"number\">2</span>;</span><br><span class=\"line\">            n -= <span class=\"number\">2</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = n  <span class=\"number\">3</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(k--) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//注意类型转换</span></span><br><span class=\"line\">            res = ((LL)res)  <span class=\"number\">3</span> % MOD;         </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 15. 二进制中1的个数","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer15.%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"算法一-判断某一位是不是1\"><a href=\"#算法一-判断某一位是不是1\" class=\"headerlink\" title=\"算法一 判断某一位是不是1\"></a>算法一 判断某一位是不是1</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hammingWeight</span><span class=\"params\">(<span class=\"keyword\">uint32_t</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n) &#123;</span><br><span class=\"line\">            res += (n &amp; <span class=\"number\">1</span>);</span><br><span class=\"line\">            n &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>无符号右移，&gt;&gt;&gt;，不管是正是负，高位均会补0；</p>\n<h2 id=\"算法二-除k取余法\"><a href=\"#算法二-除k取余法\" class=\"headerlink\" title=\"算法二 除k取余法\"></a>算法二 除k取余法</h2><p>是将十进制转化为二进制的做法</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hammingWeight</span><span class=\"params\">(<span class=\"keyword\">uint32_t</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n) &#123;</span><br><span class=\"line\">            res += n % <span class=\"number\">2</span>;</span><br><span class=\"line\">            n /= <span class=\"number\">2</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"算法三\"><a href=\"#算法三\" class=\"headerlink\" title=\"算法三\"></a>算法三</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hammingWeight</span><span class=\"params\">(<span class=\"keyword\">uint32_t</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//会把该数最右边的1变为0</span></span><br><span class=\"line\">            <span class=\"comment\">//如果n最右边的1在第k位，那么n - 1会把第k位的1减掉，变成0.</span></span><br><span class=\"line\">            n = n &amp; (n - <span class=\"number\">1</span>);</span><br><span class=\"line\">            res++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 16. 数值的整数次方","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer16.%E6%95%B0%E5%80%BC%E7%9A%84%E6%95%B4%E6%95%B0%E6%AC%A1%E6%96%B9/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>快速幂</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">typedef</span> <span class=\"keyword\">long</span> <span class=\"keyword\">long</span> LL;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">myPow</span><span class=\"params\">(<span class=\"keyword\">double</span> x, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">double</span> res = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"comment\">//注意，n可能为-2147483648，它的相反数int会溢出</span></span><br><span class=\"line\">        LL k = (LL)<span class=\"built_in\">abs</span>(n);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(k) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(k &amp; <span class=\"number\">1</span>) res *= x;</span><br><span class=\"line\">            k &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">            x = x * x;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n &gt; <span class=\"number\">0</span> ? res : <span class=\"number\">1</span> / res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>不使用long long</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">myPow</span><span class=\"params\">(<span class=\"keyword\">double</span> x, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">double</span> res = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k;</span><br><span class=\"line\">        <span class=\"comment\">//如果n是-2147483648，它的相反数会溢出，就让k为INT_MAX,由于这会导致在循环中少乘一次，那么我就先乘一次</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n == INT_MIN) k = INT_MAX, x = x * x;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> k = <span class=\"built_in\">abs</span>(n);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(k) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(k &amp; <span class=\"number\">1</span>) res *= x;</span><br><span class=\"line\">            k &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">            x = x * x;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n &gt; <span class=\"number\">0</span> ? res : <span class=\"number\">1</span> / res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 05. 替换空格","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer05.%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>非常简单</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">replaceSpace</span><span class=\"params\">(<span class=\"built_in\">string</span> s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">string</span> res;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> c : s) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(c == <span class=\"string\">&#x27; &#x27;</span>) res += <span class=\"string\">&quot;%20&quot;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> res += c;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 06. 从尾到头打印链表","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer06.%E4%BB%8E%E5%B0%BE%E5%88%B0%E5%A4%B4%E6%89%93%E5%8D%B0%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>s</p>\n<p>第一种做法，链表值存入数组，把数组reverse</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">reversePrint</span><span class=\"params\">(ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(head) &#123;</span><br><span class=\"line\">            res.push_back(head-&gt;val);</span><br><span class=\"line\">            head = head-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//reverse(res.begin(), res.end());</span></span><br><span class=\"line\">        <span class=\"comment\">//return res;</span></span><br><span class=\"line\">        <span class=\"comment\">//或者这样写</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;(res.rbegin(), res.rend());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>第二种做法，反转链表，然后存入数组</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">reversePrint</span><span class=\"params\">(ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">        ListNode* a = <span class=\"literal\">nullptr</span>, *b = head;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(b) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> t = b-&gt;next;</span><br><span class=\"line\">            b-&gt;next = a;</span><br><span class=\"line\">            a = b;</span><br><span class=\"line\">            b = t;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(a) &#123;</span><br><span class=\"line\">            res.push_back(a-&gt;val);</span><br><span class=\"line\">            a = a-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"快速幂","url":"/2021/03/17/%E7%AE%97%E6%B3%95/%E5%BF%AB%E9%80%9F%E5%B9%82/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>$$<br>a^k mod p<br>$$</p>\n<p>其中 $0 &lt;= a, k, p &lt;= 10 ^9$,快速幂可以在$O(log k)$的时间复杂度内计算出来</p>\n<p>如果正常循环求需要$O(k)$</p>\n<p>把k拆成$2^0, 2^1, 2^2 …, 2^logk)$</p>\n<p>考虑k的二进制</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"keyword\">long</span> <span class=\"keyword\">long</span> LL;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">quick_mi</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> k, <span class=\"keyword\">int</span> p)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(k) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(k &amp; <span class=\"number\">1</span>) res = (LL)res * a % p;</span><br><span class=\"line\">        k &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">        a = (LL)a * a  % p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> a, k, p;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;a, &amp;k, &amp;p);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>, quick_mi(a, k, p));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210317162333333.png\" alt=\"image-20210317162333333\"></p>\n","categories":["算法"]},{"title":"剑指 Offer 12. 矩阵中的路径","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer12.%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>注意写法，首先遍历每一个点，作为遍历起点；使用dx、dy数组，保存四个方向；将board[x][y]置为’.’，表明已经访问过了；然后遍历四个方向，如果返回true，则返回true，如果都不返回true，则在最后返回false。最后要将board[x][y]恢复</p>\n<p>一定注意写法。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">exist</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">char</span>&gt;&gt;&amp; board, <span class=\"built_in\">string</span> word)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> n = board.size(), m = board[<span class=\"number\">0</span>].size();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++)</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; m; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(dfs(board, i, j, word, <span class=\"number\">0</span>)) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> dx[<span class=\"number\">4</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>&#125;, dy[<span class=\"number\">4</span>] = &#123;<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>, <span class=\"number\">0</span>&#125;;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">char</span>&gt;&gt;&amp; board, <span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y, <span class=\"built_in\">string</span>&amp; word, <span class=\"keyword\">int</span> u)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(word[u] != board[x][y]) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(u == word.size() - <span class=\"number\">1</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> t = board[x][y];</span><br><span class=\"line\">        board[x][y] = <span class=\"string\">&#x27;.&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">4</span>; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> a = x + dx[i], b = y + dy[i];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a &gt;= <span class=\"number\">0</span> &amp;&amp; a &lt; board.size() &amp;&amp; b &gt;= <span class=\"number\">0</span> &amp;&amp; b &lt; board[<span class=\"number\">0</span>].size() &amp;&amp; board[a][b] != <span class=\"string\">&#x27;.&#x27;</span>) </span><br><span class=\"line\">                <span class=\"keyword\">if</span>(dfs(board, a, b, word, u + <span class=\"number\">1</span>)) </span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        board[x][y] = t;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 18. 删除链表的节点","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer18.%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E7%9A%84%E8%8A%82%E7%82%B9/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">deleteNode</span><span class=\"params\">(ListNode* head, <span class=\"keyword\">int</span> val)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//给定了头节点，想要删除一个点，只能从头遍历一遍</span></span><br><span class=\"line\">        <span class=\"keyword\">auto</span> dummy = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">-1</span>);</span><br><span class=\"line\">        dummy-&gt;next = head;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> cur = dummy;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(cur-&gt;next) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(cur-&gt;next-&gt;val == val) &#123;</span><br><span class=\"line\">                cur-&gt;next = cur-&gt;next-&gt;next;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            cur = cur-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dummy-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//原剑指offer问题</span></span><br><span class=\"line\">    <span class=\"comment\">//给定node，让删除node，我能做的只是删除node的下一个节点</span></span><br><span class=\"line\">    <span class=\"comment\">//那么我们可以把下一个节点的值移到node上来，就可以了</span></span><br><span class=\"line\">    <span class=\"comment\">//class Solution &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">// public:</span></span><br><span class=\"line\">    <span class=\"comment\">//     void deleteNode(ListNode* node) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//         node-&gt;val = node-&gt;next-&gt;val;</span></span><br><span class=\"line\">    <span class=\"comment\">//         node-&gt;next = node-&gt;next-&gt;next;</span></span><br><span class=\"line\">    <span class=\"comment\">//     &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;;</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 20. 表示数值的字符串","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer20.%E8%A1%A8%E7%A4%BA%E6%95%B0%E5%80%BC%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>e前面必须有数字  $.e1, e1$是错误的</p>\n<p>e后面必须有数字且必须是整数  $12e, 12e+5.4$是错误的</p>\n<p>加减号仅可出现在最开始或e的后面，也就是一个数字最多有两个加减号</p>\n<p>$.123$是正确的</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isNumber</span><span class=\"params\">(<span class=\"built_in\">string</span> s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//去除首尾空格</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = s.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(i &lt; s.size() &amp;&amp; s[i] == <span class=\"string\">&#x27; &#x27;</span>) i++;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(j &gt;= <span class=\"number\">0</span> &amp;&amp; s[j] == <span class=\"string\">&#x27; &#x27;</span>) j--;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(i &gt; j) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        s = s.substr(i, j - i + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;+&#x27;</span> || s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;-&#x27;</span>) s = s.substr(<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(s.empty() || (s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;.&#x27;</span> &amp;&amp; s.size() == <span class=\"number\">1</span>)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> dot = <span class=\"number\">0</span>, e = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; s.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(s[i] &lt;= <span class=\"string\">&#x27;9&#x27;</span> &amp;&amp; s[i] &gt;= <span class=\"string\">&#x27;0&#x27;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(s[i] == <span class=\"string\">&#x27;.&#x27;</span>) &#123;</span><br><span class=\"line\">                dot++;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(dot &gt; <span class=\"number\">1</span> || e) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(s[i] == <span class=\"string\">&#x27;e&#x27;</span> || s[i] == <span class=\"string\">&#x27;E&#x27;</span>) &#123;</span><br><span class=\"line\">                e++;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(e &gt; <span class=\"number\">1</span> || i + <span class=\"number\">1</span> == s.size() || i == <span class=\"number\">0</span> || s[i - <span class=\"number\">1</span>] == <span class=\"string\">&#x27;.&#x27;</span> &amp;&amp; i == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(s[i + <span class=\"number\">1</span>] == <span class=\"string\">&#x27;-&#x27;</span> || s[i + <span class=\"number\">1</span>] == <span class=\"string\">&#x27;+&#x27;</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(i + <span class=\"number\">2</span> == s.size()) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">                    i++;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 21. 调整数组顺序使奇数位于偶数前面","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer21.%E8%B0%83%E6%95%B4%E6%95%B0%E7%BB%84%E9%A1%BA%E5%BA%8F%E4%BD%BF%E5%A5%87%E6%95%B0%E4%BD%8D%E4%BA%8E%E5%81%B6%E6%95%B0%E5%89%8D%E9%9D%A2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">exchange</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(i &lt; j) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//注意要加上 i &lt; j判断，否则，对用例[1, 3, 5]会越界</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span>(i &lt; j &amp;&amp; nums[i] % <span class=\"number\">2</span> == <span class=\"number\">1</span>) i++;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(i &lt; j &amp;&amp; nums[j] % <span class=\"number\">2</span> == <span class=\"number\">0</span>) j--;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i &lt; j) swap(nums[i], nums[j]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nums;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 24. 反转链表","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer24.%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"非递归\"><a href=\"#非递归\" class=\"headerlink\" title=\"非递归\"></a>非递归</h2><p>非递归写法非常简单</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">reverseList</span><span class=\"params\">(ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">        ListNode* a = <span class=\"literal\">nullptr</span>, *b = head;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(b) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> t = b-&gt;next;</span><br><span class=\"line\">            b-&gt;next = a;</span><br><span class=\"line\">            a = b;</span><br><span class=\"line\">            b = t;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"递归\"><a href=\"#递归\" class=\"headerlink\" title=\"递归\"></a>递归</h2><p>递归写法比较困难</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210317205658141.png\" alt=\"image-20210317205658141\"></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">reverseList</span><span class=\"params\">(ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//由于我们下面有用到head-&gt;next-&gt;next，所以要保证head和head-&gt;next不为空</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!head || !head-&gt;next) <span class=\"keyword\">return</span> head;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> tail = reverseList(head-&gt;next);</span><br><span class=\"line\">        head-&gt;next-&gt;next = head;</span><br><span class=\"line\">        head-&gt;next = <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        <span class=\"comment\">//不要忘了置为空</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> tail;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 25. 合并两个排序的链表","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer25.%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%8E%92%E5%BA%8F%E7%9A%84%E9%93%BE%E8%A1%A8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">mergeTwoLists</span><span class=\"params\">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> dummy = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">-1</span>), cur = dummy;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l1 &amp;&amp; l2) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(l1-&gt;val &lt;= l2-&gt;val) cur = cur-&gt;next = l1, l1 = l1-&gt;next;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> cur = cur-&gt;next = l2, l2 = l2-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l1) cur-&gt;next = l1;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l2) cur-&gt;next = l2;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dummy-&gt;next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 22. 链表中倒数第k个节点","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer22.%E9%93%BE%E8%A1%A8%E4%B8%AD%E5%80%92%E6%95%B0%E7%AC%ACk%E4%B8%AA%E8%8A%82%E7%82%B9/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>快慢指针，快指针先走k步，然后和慢指针一起走，直到快指针指向nullptr</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode* <span class=\"title\">getKthFromEnd</span><span class=\"params\">(ListNode* head, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> fast = head, slow = head;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(k--) fast = fast-&gt;next;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(fast) fast = fast-&gt;next, slow = slow-&gt;next;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> slow;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 28. 对称的二叉树","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer28.%E5%AF%B9%E7%A7%B0%E7%9A%84%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>递归，需要传入两个参数，左子树和右子树</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isSymmetric</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(root-&gt;left, root-&gt;right);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* left, TreeNode* right)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!left &amp;&amp; !right) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!left || !right || left-&gt;val != right-&gt;val) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(left-&gt;left, right-&gt;right) &amp;&amp; dfs(left-&gt;right, right-&gt;left);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 26. 树的子结构","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer26.%E6%A0%91%E7%9A%84%E5%AD%90%E7%BB%93%E6%9E%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isPart</span><span class=\"params\">(TreeNode* A, TreeNode* B)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!B) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!A || A-&gt;val != B-&gt;val) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> isPart(A-&gt;left, B-&gt;left) &amp;&amp; isPart(A-&gt;right, B-&gt;right);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isSubStructure</span><span class=\"params\">(TreeNode* A, TreeNode* B)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//空树不是任意一个树的子结构，所以B为空返回false；如果A为空，那么就没有任何树可能是它的子结构，返回false</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!A || !B) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isPart(A, B)) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> isSubStructure(A-&gt;left, B) || isSubStructure(A-&gt;right, B);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 29. 顺时针打印矩阵","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer29.%E9%A1%BA%E6%97%B6%E9%92%88%E6%89%93%E5%8D%B0%E7%9F%A9%E9%98%B5/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">spiralOrder</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(matrix.empty() || matrix[<span class=\"number\">0</span>].empty()) <span class=\"keyword\">return</span> &#123;&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> m = matrix.size(), n = matrix[<span class=\"number\">0</span>].size();</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> dx[<span class=\"number\">4</span>] = &#123;<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>&#125;, dy[<span class=\"number\">4</span>] = &#123;<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">-1</span>, <span class=\"number\">0</span>&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, d = <span class=\"number\">0</span>, x = <span class=\"number\">0</span>, y = <span class=\"number\">0</span>; i &lt; m * n; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> t = matrix[x][y];</span><br><span class=\"line\">            res.push_back(t);</span><br><span class=\"line\">            <span class=\"comment\">//标记已经访问过了，为了渐变用了一个不会出现在matrix中的数字标记。</span></span><br><span class=\"line\">            <span class=\"comment\">//其实应该用另一个数组来标记哪里走过了。</span></span><br><span class=\"line\">            matrix[x][y] = INT_MAX;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> a = dx[d] + x, b = dy[d] + y;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a &gt;= <span class=\"number\">0</span> &amp;&amp; a &lt; m &amp;&amp; b &gt;= <span class=\"number\">0</span> &amp;&amp; b &lt; n &amp;&amp; matrix[a][b] != INT_MAX);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> (++d) %= <span class=\"number\">4</span>;</span><br><span class=\"line\">            x = dx[d] + x, y = dy[d] + y;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 27. 二叉树的镜像","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer27.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%95%9C%E5%83%8F/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>递归</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">TreeNode* <span class=\"title\">mirrorTree</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">        swap(root-&gt;left, root-&gt;right);</span><br><span class=\"line\">        mirrorTree(root-&gt;left);</span><br><span class=\"line\">        mirrorTree(root-&gt;right);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> root;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 30. 包含min函数的栈","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer30.%E5%8C%85%E5%90%ABmin%E5%87%BD%E6%95%B0%E7%9A%84%E6%A0%88/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MinStack</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; stk, stkmin;</span><br><span class=\"line\">    <span class=\"comment\">/** initialize your data structure here. */</span></span><br><span class=\"line\">    MinStack() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">push</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">        stk.push(x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(stkmin.empty() || stkmin.top() &gt;= x) stkmin.push(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> t = stk.top();</span><br><span class=\"line\">        stk.pop();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(t &lt;= stkmin.top()) stkmin.pop();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">top</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> stk.top();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">min</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> stkmin.top();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your MinStack object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * MinStack* obj = new MinStack();</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;push(x);</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;pop();</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_3 = obj-&gt;top();</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_4 = obj-&gt;min();</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 31. 栈的压入、弹出序列","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer31.%E6%A0%88%E7%9A%84%E5%8E%8B%E5%85%A5%E3%80%81%E5%BC%B9%E5%87%BA%E5%BA%8F%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>用栈模拟一遍即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">validateStackSequences</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; pushed, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; popped)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; stk;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> j = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; pushed.size(); i++) &#123;</span><br><span class=\"line\">            stk.push(pushed[i]);</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(stk.size() &amp;&amp; stk.top() == popped[j]) &#123;</span><br><span class=\"line\">                stk.pop();</span><br><span class=\"line\">                j++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> stk.empty();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 32 - I. 从上到下打印二叉树","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer32-I.%E4%BB%8E%E4%B8%8A%E5%88%B0%E4%B8%8B%E6%89%93%E5%8D%B0%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"BFS\"><a href=\"#BFS\" class=\"headerlink\" title=\"BFS\"></a>BFS</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">levelOrder</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"built_in\">queue</span>&lt;TreeNode*&gt; q;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root) q.push(root);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q.size()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> k = q.size();</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(k--) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">auto</span> t = q.front();</span><br><span class=\"line\">                q.pop();</span><br><span class=\"line\">                res.push_back(t-&gt;val);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;left) q.push(t-&gt;left);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;right) q.push(t-&gt;right);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 32 - II. 从上到下打印二叉树 II","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer32-II.%E4%BB%8E%E4%B8%8A%E5%88%B0%E4%B8%8B%E6%89%93%E5%8D%B0%E4%BA%8C%E5%8F%89%E6%A0%91II/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"BFS\"><a href=\"#BFS\" class=\"headerlink\" title=\"BFS\"></a>BFS</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">levelOrder</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"built_in\">queue</span>&lt;TreeNode*&gt; q;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root) q.push(root);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q.size()) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; level;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> k = q.size();</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(k--) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">auto</span> t = q.front();</span><br><span class=\"line\">                q.pop();</span><br><span class=\"line\">                level.push_back(t-&gt;val);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;left) q.push(t-&gt;left);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;right) q.push(t-&gt;right);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            res.push_back(level);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 32 - III. 从上到下打印二叉树 III","url":"/2021/03/17/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer32-III.%E4%BB%8E%E4%B8%8A%E5%88%B0%E4%B8%8B%E6%89%93%E5%8D%B0%E4%BA%8C%E5%8F%89%E6%A0%91III/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>将数组reverse一下即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">levelOrder</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"built_in\">queue</span>&lt;TreeNode*&gt; q;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root) q.push(root);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q.size()) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; level;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> k = q.size();</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(k--) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">auto</span> t = q.front();</span><br><span class=\"line\">                q.pop();</span><br><span class=\"line\">                level.push_back(t-&gt;val);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;left) q.push(t-&gt;left);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(t-&gt;right) q.push(t-&gt;right);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(cnt % <span class=\"number\">2</span> == <span class=\"number\">1</span>) reverse(level.begin(), level.end());</span><br><span class=\"line\">            cnt++; </span><br><span class=\"line\">            res.push_back(level);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"二叉树的先序遍历和后序遍历无法确定一颗二叉树","url":"/2021/03/18/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86%E5%92%8C%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E6%97%A0%E6%B3%95%E7%A1%AE%E5%AE%9A%E4%B8%80%E9%A2%97%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>当二叉树中某个节点仅仅只有一个孩子节点的时候，就无法根据其先序和后序唯一的确定一个二叉树。</p>\n<blockquote>\n<p>preorder: 1 2 3 4<br>postorder:2 4 3 1<br>那么，构建出来的树可能是下面两种情况：</p>\n</blockquote>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/20191107191123992.png\" alt=\"在这里插入图片描述\"></p>\n"},{"title":"extern \"C\"","url":"/2021/03/18/c++/externC/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>extern “C”的主要作用就是为了能够正确实现c++代码调用其他C语言代码。加上extern “C”后，会指示编译器将这部分代码按照C语言的方式进行编译。由于C++支持函数重载，因此编译器编译函数过程中会将函数的参数类型也加到编译器的代码中，而不仅仅是函数名；而C语言不支持函数重载，因此编译C语言代码时不会带上函数的参数类型，一般只包括函数名。</p>\n<p>extern：</p>\n<p>当进行编译时，该关键字告诉编译器它所声明的函数和变量等可以在本模块或者文件以及其他模块或者文件使用。通常，程序员都是在.h文件中使用该关键字进行声明，然后在其他模块或文件中引用。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifdef</span> __cplusplus <span class=\"comment\">/* 如果采用了C++，如下代码使用C编译器 */</span></span></span><br><span class=\"line\">    <span class=\"keyword\">extern</span> <span class=\"string\">&quot;C&quot;</span> &#123; <span class=\"comment\">/* 如果没有采用C++，顺序预编译 */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br><span class=\"line\"><span class=\"comment\">/* 采用C编译器编译的C语言代码段 */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifdef</span> __cplusplus <span class=\"comment\">/* 结束使用C编译器 */</span></span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>一个c++程序想要引用已经写好的c语言库</p>\n<p>比如</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//cfunc.c</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">foo</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//mian.cpp</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">extern</span> <span class=\"keyword\">int</span> <span class=\"title\">foo</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = foo(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>会报链接错误</p>\n<p>main函数中引用的foo函数会被编译为<code>&quot;int __cdecl foo(int,int)&quot;</code>，在链接时，由于找不到外部符号，所以会导致链接错误。</p>\n<p>然而，.c文件中的函数会被编译为int _foo</p>\n<p>所以，为了使foo按照c语言的方式进行编译，那么加上 <code>extern &quot;C&quot;</code></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"string\">&quot;C&quot;</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">foo</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span></span>;</span><br></pre></td></tr></table></figure>\n\n<p>这样就可以通过编译了</p>\n<p>那么一个c程序想要引用c++编写的库呢？</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//cppfunc.cpp</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">foo</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//main.c</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">extern</span> <span class=\"keyword\">int</span> <span class=\"title\">foo</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = foo(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>此时会报链接错误</p>\n<p>找不到_func外部符号，由于cppfunc.cpp中的foo会被编译成<code>int __cdecl foo(int,int)</code>，所以找不到外部符号。</p>\n<p>如何改呢？注意C语言里面是没有 extern “C”</p>\n<p>我们要把cpp中的foo以c的方式来编译，那么只需在cppfunc.cpp文件中加入extern “C”的声明</p>\n<p><code>extern &quot;C&quot; int foo(int a, int b);</code></p>\n<p>就可以了。</p>\n<p>总结，由于C++发明之前，已经存在着大量的C语言库，为了使C++能够兼容，引入了extern “C”关键字。原因是c++中会重载，因此函数编译时会加入类型，而C语言中没有重载，编译时只会有函数名。</p>\n<p>函数默认是extern的，所以想引用其他文件的函数时，只需写一遍函数声明，不需要extern</p>\n<p>而static修饰的函数是静态函数（内部函数），不能被其他文件所用</p>\n<p>定义静态函数的好处</p>\n<p>其他文件中可以定义相同名字的函数，不会发生冲突</p>\n<p>static函数在内存中只有一份，普通函数在每个调用中保存一份拷贝</p>\n"},{"title":"剑指 Offer 33. 二叉搜索树的后序遍历序列","url":"/2021/03/18/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer33.%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E5%BA%8F%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210318100724852.png\" alt=\"image-20210318100724852\"></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">verifyPostorder</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; postorder)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(<span class=\"number\">0</span>, postorder.size() - <span class=\"number\">1</span>, postorder);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> r, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; postorder)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l &gt;= r) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> root = postorder[r];</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = l;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(k &lt; r &amp;&amp; postorder[k] &lt; root) k++;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = k; i &lt; r; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(postorder[i] &lt; root)</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfs(l, k - <span class=\"number\">1</span>, postorder) &amp;&amp; dfs(k, r - <span class=\"number\">1</span>, postorder);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"深拷贝浅拷贝","url":"/2021/03/18/c++/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>简而言之，浅拷贝拷贝指针变量的值，深拷贝拷贝指针所指向的内存空间</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">foo</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    foo() &#123;</span><br><span class=\"line\">\t\tp = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ~foo() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> *p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\">foo <span class=\"title\">bar</span><span class=\"params\">(foo&amp; r)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    foo a;</span><br><span class=\"line\">    foo b = bar(a);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上述代码有问题吗？</p>\n<p>有问题，注意bar函数，传入的是引用，但是返回不是引用，返回时会执行拷贝构造，那么会执行浅拷贝。也就是说foo变量a 和b 中的指针p会执行同一片内存</p>\n<p>如何改正？加一个拷贝构造函数即可</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">foo(<span class=\"keyword\">const</span> foo&amp; r) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;copy constructor\\n&quot;</span>;</span><br><span class=\"line\">        p = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">        *p = *(r.p);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n"},{"title":"剑指 Offer 53 - I. 在排序数组中查找数字 I","url":"/2021/03/18/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer53-I.%E5%9C%A8%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E6%9F%A5%E6%89%BE%E6%95%B0%E5%AD%97I/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>二分</p>\n<p>注意边界</p>\n<p>当nums为空时，特判一下</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">search</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums.empty()) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &gt;= target) r = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums[r] != target) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = r;</span><br><span class=\"line\">        l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r + <span class=\"number\">1</span> &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &lt;= target) l = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> r = mid - <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r - k + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 53 - II. 0～n-1中缺失的数字","url":"/2021/03/18/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer53-II.0%EF%BD%9En-1%E4%B8%AD%E7%BC%BA%E5%A4%B1%E7%9A%84%E6%95%B0%E5%AD%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"二分\"><a href=\"#二分\" class=\"headerlink\" title=\"二分\"></a>二分</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">missingNumber</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = <span class=\"number\">0</span>, r = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt; r) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> mid = l + r &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[mid] &gt; mid) r = mid;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(nums[mid] == mid) l = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//对于[0, 1, 2]这种情况，应该返回3。那么此时num[r] == r,我们将r++即可</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums[r] == r) r++;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"计算\"><a href=\"#计算\" class=\"headerlink\" title=\"计算\"></a>计算</h2><p>将全部值计算出来，然后减去数组中的值，就能找出缺失的值。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">missingNumber</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = (<span class=\"number\">0</span> + nums.size()) * (nums.size() + <span class=\"number\">1</span>) / <span class=\"number\">2</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.size(); i++) res -= nums[i];</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 52. 两个链表的第一个公共节点","url":"/2021/03/18/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer52.%E4%B8%A4%E4%B8%AA%E9%93%BE%E8%A1%A8%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%85%AC%E5%85%B1%E8%8A%82%E7%82%B9/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>走到头了，从另一个链表的开头继续走，直到两指针相遇。</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210318111205802.png\" alt=\"image-20210318111205802\"></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct ListNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode *next;</span></span><br><span class=\"line\"><span class=\"comment\"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">ListNode *<span class=\"title\">getIntersectionNode</span><span class=\"params\">(ListNode *headA, ListNode *headB)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> a = headA, b = headB;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(a != b) &#123;</span><br><span class=\"line\">            a = a ? a-&gt;next : headB;</span><br><span class=\"line\">            b = b ? b-&gt;next : headA;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offerd"]},{"title":"剑指 Offer 54. 二叉搜索树的第k大节点","url":"/2021/03/18/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer54.%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E7%AC%ACk%E5%A4%A7%E8%8A%82%E7%82%B9/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>二叉搜索树的中序遍历是递增的</p>\n<p>那如果先遍历右子树再遍历根节点，然后遍历左子树，那么得到的序列就是递减的了。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> res;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">kthLargest</span><span class=\"params\">(TreeNode* root, <span class=\"keyword\">int</span> k)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root, k);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root, <span class=\"keyword\">int</span> &amp;k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        <span class=\"comment\">//先遍历右子树</span></span><br><span class=\"line\">        dfs(root-&gt;right, k);</span><br><span class=\"line\">        k--;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(k == <span class=\"number\">0</span>) res = root-&gt;val;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(k &gt; <span class=\"number\">0</span>) dfs(root-&gt;left, k);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 55 - I. 二叉树的深度","url":"/2021/03/18/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer55-I.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%B7%B1%E5%BA%A6/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxDepth</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> max(maxDepth(root-&gt;left), maxDepth(root-&gt;right)) + <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"url":"/2021/03/18/HTTP%E7%8A%B6%E6%80%81%E7%A0%81/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210318163905856.png\" alt=\"image-20210318163905856\"></p>\n"},{"title":"3.18美团面试","url":"/2021/03/18/%E9%9D%A2%E8%AF%95/3.18%E7%BE%8E%E5%9B%A2%E4%B8%80%E9%9D%A2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"大体情况\"><a href=\"#大体情况\" class=\"headerlink\" title=\"大体情况\"></a>大体情况</h2><p>晚上起点开始，面的是美团测试开发工程师，大约40分钟。没问什么技术知识，让介绍了一下项目，对测试的理解。</p>\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>1、自我介绍</p>\n<p>2、问你最近的一个项目，你是什么角色，遇到什么问题，排查思路，最后是怎么解决的</p>\n<p>3、对于项目的一个问题，你的解决方案是怎么得出的</p>\n<p>4、你认为测试开发是在干什么</p>\n<p>5、场景题，测试微信评论功能</p>\n<p>6、一道简单的算法，给定一个<strong>链表</strong>删除重复元素</p>\n<p>删除无序链表中重复出现的节点。给定一个无序链表，删除其中值重复出现的节点（保留当中顺序遍历的第一个出现的节点）</p>\n<p>输入 [1, 3, 2, 3, 1]    输出 [1, 3, 2];</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">ListNode* <span class=\"title\">deleteDuplicateNode</span><span class=\"params\">(ListNode* head)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">auto</span> dummy = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">-1</span>);</span><br><span class=\"line\">    <span class=\"built_in\">unordered_set</span>&lt;<span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">    dummy-&gt;next = head;</span><br><span class=\"line\">    <span class=\"keyword\">auto</span> a = dummy, b = dummy-&gt;next;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(b) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(hash.count(b-&gt;val)) &#123;</span><br><span class=\"line\">            a-&gt;next = b-&gt;next;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> t = b;</span><br><span class=\"line\">            b = b-&gt;next;</span><br><span class=\"line\">            <span class=\"keyword\">delete</span> t;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            hash.insert(b-&gt;val);</span><br><span class=\"line\">            a = a-&gt;next;</span><br><span class=\"line\">            b = b-&gt;next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dummy-&gt;next;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>7、你知道哪些linux中的常用命令</p>\n<p>如何用cp跨主机复制文件</p>\n<p>如何找出文件的后500行文本          <code>tail -n 500 hello.c</code></p>\n<p>如何找出文件中出现的某一个单词</p>\n"},{"title":"剑指 Offer 55 - II. 平衡二叉树","url":"/2021/03/18/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer55-II.%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">bool</span> ans = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">bool</span> <span class=\"title\">isBalanced</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> l = dfs(root-&gt;left);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> r = dfs(root-&gt;right);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">abs</span>(l - r) &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            ans = <span class=\"literal\">false</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> max(l, r) + <span class=\"number\">1</span>;        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 57 - II. 和为s的连续正数序列","url":"/2021/03/19/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer57-II.%E5%92%8C%E4%B8%BAs%E7%9A%84%E8%BF%9E%E7%BB%AD%E6%AD%A3%E6%95%B0%E5%BA%8F%E5%88%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"DFS\"><a href=\"#DFS\" class=\"headerlink\" title=\"DFS\"></a>DFS</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; path;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">findContinuousSequence</span><span class=\"params\">(<span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; target; i++)</span><br><span class=\"line\">            dfs(target, i, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"keyword\">int</span> target, <span class=\"keyword\">int</span> u, <span class=\"keyword\">int</span> sum)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (sum &gt; target) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (sum == target) &#123;</span><br><span class=\"line\">            res.push_back(path);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            sum += u;</span><br><span class=\"line\">            path.push_back(u);</span><br><span class=\"line\">            dfs(target, u + <span class=\"number\">1</span>, sum);</span><br><span class=\"line\">            sum -= u;</span><br><span class=\"line\">            path.pop_back();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"双指针\"><a href=\"#双指针\" class=\"headerlink\" title=\"双指针\"></a>双指针</h2><p>i和j均只会向前移动，j向前会使和增大，i向前会使和减小。</p>\n<p>一开始i, j都指向开头</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">findContinuousSequence</span><span class=\"params\">(<span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>, j = <span class=\"number\">1</span>, sum = <span class=\"number\">1</span>; i &lt; target; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(sum &lt; target) j++, sum += j;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(sum == target) &#123;</span><br><span class=\"line\">                <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; path;</span><br><span class=\"line\">                <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> k = i; k &lt;= j; k++) path.push_back(k);</span><br><span class=\"line\">                res.push_back(path);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            sum -= i;<span class=\"comment\">//因为i要向前移动一位</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"面试题34. 二叉树中和为某一值的路径","url":"/2021/03/19/%E5%89%91%E6%8C%87offer/%E9%9D%A2%E8%AF%95%E9%A2%9834.%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E5%92%8C%E4%B8%BA%E6%9F%90%E4%B8%80%E5%80%BC%E7%9A%84%E8%B7%AF%E5%BE%84/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"DFS\"><a href=\"#DFS\" class=\"headerlink\" title=\"DFS\"></a>DFS</h2><p>当这个节点是叶子节点时，即<code>root-&gt;left = nullptr, root-&gt;right = nullptr;</code>，判断和是否与target相等</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; <span class=\"title\">pathSum</span><span class=\"params\">(TreeNode* root, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root, target, &#123;&#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root, <span class=\"keyword\">int</span> target, <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; path, <span class=\"keyword\">int</span> sum)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        path.push_back(root-&gt;val);</span><br><span class=\"line\">        sum += root-&gt;val;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(sum == target &amp;&amp; !root-&gt;left &amp;&amp; !root-&gt;right) &#123;</span><br><span class=\"line\">            res.push_back(path);</span><br><span class=\"line\">        &#125;<span class=\"comment\">//判断到这里就行了，不用判断其他条件，因为接下来继续递归，会遇到第一句 if(!root)，就直接返回了</span></span><br><span class=\"line\">        dfs(root-&gt;left, target, path, sum);</span><br><span class=\"line\">        dfs(root-&gt;right, target, path, sum);</span><br><span class=\"line\">        path.pop_back();</span><br><span class=\"line\">        sum -= root-&gt;val;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 56 - I. 数组中数字出现的次数","url":"/2021/03/19/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer56-I.%E6%95%B0%E7%BB%84%E4%B8%AD%E6%95%B0%E5%AD%97%E5%87%BA%E7%8E%B0%E7%9A%84%E6%AC%A1%E6%95%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>先说一些性质</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\">已知 A ^ B = C</span><br><span class=\"line\">则  B ^ A = C</span><br><span class=\"line\">    C ^ A = B</span><br><span class=\"line\">    C ^ B = A</span><br><span class=\"line\">    A ^ A = <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<p>先把所有值异或一遍，就可以得到两个不相同值的异或结果，比如 a, b</p>\n<p>有了a ^ b之后，如何找出a, b呢？我们直到，异或运算不是可逆的，我们无法从结果中退出原来的数字</p>\n<p>但是原来的数字在数组中啊，我们可以将数组分为两部分，一部分包含a， 另一部分包含b</p>\n<p>我们可以找到异或结果中为1的一位，这表明a和b在该位上不相同，我们可以据此将数组分开。</p>\n<p>相同的数字一定会被分到同一个部分</p>\n<p>因此，最终结果就是，第一部分包含a和成对的数字，将它们异或之后就可以得到a。另一部分则包含b和成对的数字</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">singleNumbers</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//sum为不相同的两个数字的异或结果</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) sum ^= x;        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//找到不相同数字中的不同的一位</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(!(sum &gt;&gt; k &amp; <span class=\"number\">1</span>)) k++;        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> first = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//将数组分为两部分，异或结果即为其中一个数字</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(x &gt;&gt; k &amp; <span class=\"number\">1</span>) first ^= x;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//A ^ B = C，则C ^ A = B</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;first, sum ^ first&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"面试题30. 包含min函数的栈","url":"/2021/03/19/%E5%89%91%E6%8C%87offer/%E9%9D%A2%E8%AF%95%E9%A2%9830.%E5%8C%85%E5%90%ABmin%E5%87%BD%E6%95%B0%E7%9A%84%E6%A0%88/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MinStack</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">stack</span>&lt;<span class=\"keyword\">int</span>&gt; stk, stkmin;</span><br><span class=\"line\">    <span class=\"comment\">/** initialize your data structure here. */</span></span><br><span class=\"line\">    MinStack() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">push</span><span class=\"params\">(<span class=\"keyword\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">        stk.push(x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(stkmin.empty() || stkmin.top() &gt;= x) stkmin.push(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">pop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> t = stk.top();</span><br><span class=\"line\">        stk.pop();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(t == stkmin.top()) stkmin.pop();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">top</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> stk.top();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">min</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> stkmin.top();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your MinStack object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * MinStack* obj = new MinStack();</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;push(x);</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;pop();</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_3 = obj-&gt;top();</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_4 = obj-&gt;min();</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"剑指 Offer 57. 和为s的两个数字","url":"/2021/03/19/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer57.%E5%92%8C%E4%B8%BAs%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%95%B0%E5%AD%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"哈希表\"><a href=\"#哈希表\" class=\"headerlink\" title=\"哈希表\"></a>哈希表</h2><p>该算法没有利用到数组递增的性质</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">twoSum</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_set</span>&lt;<span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : nums) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(hash.count(target - x)) <span class=\"keyword\">return</span> &#123;target - x, x&#125;;</span><br><span class=\"line\">            hash.insert(x);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"双指针\"><a href=\"#双指针\" class=\"headerlink\" title=\"双指针\"></a>双指针</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">twoSum</span><span class=\"params\">(<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&amp; nums, <span class=\"keyword\">int</span> target)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = nums.size() - <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(i &lt; j) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> t = nums[i] + nums[j];</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (t &gt; target) j--;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (t &lt; target) i++;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> &#123;nums[i], nums[j]&#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"2021暑期实习面试进度","url":"/2021/03/19/%E9%9D%A2%E8%AF%95/%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E8%BF%9B%E5%BA%A6/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><table>\n<thead>\n<tr>\n<th align=\"center\">时间</th>\n<th align=\"center\">部门</th>\n<th align=\"center\">结果</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">2021/3/13</td>\n<td align=\"center\">美团笔试</td>\n<td align=\"center\"><a href=\"http://zhouruifa.top/2021/03/13/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95/3.13%E7%BE%8E%E5%9B%A2%E7%AC%94%E8%AF%95/\"><font color=\"green\">通过</font></a></td>\n</tr>\n<tr>\n<td align=\"center\">2021/3/14</td>\n<td align=\"center\">字节跳动笔试</td>\n<td align=\"center\"><a href=\"http://zhouruifa.top/2021/03/14/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95/3.14%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E7%AC%94%E8%AF%95/\"><font color=\"green\">通过</font></a></td>\n</tr>\n<tr>\n<td align=\"center\">2021/3/16</td>\n<td align=\"center\">字节跳动飞书一二面</td>\n<td align=\"center\"><a href=\"http://zhouruifa.top/2021/03/16/%E9%9D%A2%E8%AF%95/3.16%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E4%B8%80%E9%9D%A2%E4%BA%8C%E9%9D%A2/\"><font color=\"green\">通过</font></a></td>\n</tr>\n<tr>\n<td align=\"center\">2021/3/18</td>\n<td align=\"center\">美团测开一面</td>\n<td align=\"center\"><a href=\"http://zhouruifa.top/2021/03/18/%E9%9D%A2%E8%AF%95/3.18%E7%BE%8E%E5%9B%A2%E4%B8%80%E9%9D%A2/\"><font color=\"green\">通过</font></a></td>\n</tr>\n<tr>\n<td align=\"center\">2021/3/21</td>\n<td align=\"center\">百度笔试</td>\n<td align=\"center\"><a href=\"http://zhouruifa.top/2021/03/21/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95/3.21%E7%99%BE%E5%BA%A6%E7%AC%94%E8%AF%95/\"><font color=\"green\">通过</font></a></td>\n</tr>\n<tr>\n<td align=\"center\">2021/3/22</td>\n<td align=\"center\">美团测开二面</td>\n<td align=\"center\"><a href=\"http://zhouruifa.top/2021/03/22/%E9%9D%A2%E8%AF%95/3.22%E7%BE%8E%E5%9B%A2%E4%BA%8C%E9%9D%A2/\"><font color=\"red\">失败</font></a></td>\n</tr>\n<tr>\n<td align=\"center\">2021/3/25</td>\n<td align=\"center\">字节跳动飞书三面</td>\n<td align=\"center\"><a href=\"http://zhouruifa.top/2021/03/25/%E9%9D%A2%E8%AF%95/3,25%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E4%B8%89%E9%9D%A2/\"><font color=\"red\">失败</font></a></td>\n</tr>\n<tr>\n<td align=\"center\">2021/3/27</td>\n<td align=\"center\">百度一二三面</td>\n<td align=\"center\"><a href=\"http://zhouruifa.top/2021/03/27/%E9%9D%A2%E8%AF%95/3.27%E7%99%BE%E5%BA%A6%E4%B8%80%E9%9D%A2%E4%BA%8C%E9%9D%A2%E4%B8%89%E9%9D%A2/\"><font color=\"green\">通过</font></a></td>\n</tr>\n<tr>\n<td align=\"center\">2021/3/27</td>\n<td align=\"center\">网易笔试</td>\n<td align=\"center\"><font color=\"red\">失败</font></td>\n</tr>\n<tr>\n<td align=\"center\">2021/3/27</td>\n<td align=\"center\">猿辅导笔试</td>\n<td align=\"center\"><font color=\"grey\">待定</font></td>\n</tr>\n<tr>\n<td align=\"center\">2021/4/1</td>\n<td align=\"center\">百度offer call</td>\n<td align=\"center\"><font color=\"green\">通过</font></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n"},{"title":"剑指 Offer 58 - II. 左旋转字符串","url":"/2021/03/20/%E5%89%91%E6%8C%87offer/%E5%89%91%E6%8C%87Offer58-II.%E5%B7%A6%E6%97%8B%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>我们把它想象成一个数组</p>\n<h2 id=\"算法一\"><a href=\"#算法一\" class=\"headerlink\" title=\"算法一\"></a>算法一</h2><p>空间复杂度为O(n)，时间复杂度为多少？</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">reverseLeftWords</span><span class=\"params\">(<span class=\"built_in\">string</span> s, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> s.substr(n) + s.substr(<span class=\"number\">0</span>, n);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"算法二\"><a href=\"#算法二\" class=\"headerlink\" title=\"算法二\"></a>算法二</h2><p>该算法可以达到最优，时间复杂度O(n)，空间复杂度O(1);</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">string</span> <span class=\"title\">reverseLeftWords</span><span class=\"params\">(<span class=\"built_in\">string</span> s, <span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        reverse(s.begin(), s.end());</span><br><span class=\"line\">        reverse(s.begin(), s.begin() + s.size() - n);</span><br><span class=\"line\">        reverse(s.begin() + s.size() -n, s.end());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> s;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["剑指Offer"]},{"title":"5694. 设计一个验证系统","url":"/2021/03/20/%E5%8A%9B%E6%89%A3%E5%91%A8%E8%B5%9B/5694.%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E9%AA%8C%E8%AF%81%E7%B3%BB%E7%BB%9F/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>该题为模拟题，很简单，一个哈希表就可以了。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AuthenticationManager</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> TTL;</span><br><span class=\"line\">    <span class=\"built_in\">unordered_map</span>&lt;<span class=\"built_in\">string</span>, <span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">    AuthenticationManager(<span class=\"keyword\">int</span> timeToLive) &#123;</span><br><span class=\"line\">        TTL = timeToLive;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">generate</span><span class=\"params\">(<span class=\"built_in\">string</span> tokenId, <span class=\"keyword\">int</span> currentTime)</span> </span>&#123;</span><br><span class=\"line\">        hash[tokenId] = currentTime;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">renew</span><span class=\"params\">(<span class=\"built_in\">string</span> tokenId, <span class=\"keyword\">int</span> currentTime)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!hash.count(tokenId) || hash[tokenId] + TTL &lt;= currentTime);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            hash[tokenId] = currentTime;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">countUnexpiredTokens</span><span class=\"params\">(<span class=\"keyword\">int</span> currentTime)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> x : hash) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(x .second + TTL &gt; currentTime)</span><br><span class=\"line\">                res++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your AuthenticationManager object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * AuthenticationManager* obj = new AuthenticationManager(timeToLive);</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;generate(tokenId,currentTime);</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;renew(tokenId,currentTime);</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_3 = obj-&gt;countUnexpiredTokens(currentTime);</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["力扣周赛"]},{"title":"5693. 字符串中第二大的数字","url":"/2021/03/20/%E5%8A%9B%E6%89%A3%E5%91%A8%E8%B5%9B/5693.%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%AC%AC%E4%BA%8C%E5%A4%A7%E7%9A%84%E6%95%B0%E5%AD%97/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>签到题</p>\n<h2 id=\"解法一\"><a href=\"#解法一\" class=\"headerlink\" title=\"解法一\"></a>解法一</h2><p>由于数字不能重复，因此用一个哈希表记录是否重复。因为哈希表不支持排序，所以我们可以用一个优先队列快速找到第二大的值</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">secondHighest</span><span class=\"params\">(<span class=\"built_in\">string</span> s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">unordered_set</span>&lt;<span class=\"keyword\">int</span>&gt; hash;</span><br><span class=\"line\">        <span class=\"built_in\">priority_queue</span>&lt;<span class=\"keyword\">int</span>&gt; q;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> c : s) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> t = c- <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(t &lt;= <span class=\"number\">9</span> &amp;&amp; t &gt;= <span class=\"number\">0</span> &amp;&amp; !hash.count(t)) &#123;</span><br><span class=\"line\">                hash.insert(t);</span><br><span class=\"line\">            \tq.push(t);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(q.size() &lt; <span class=\"number\">2</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        q.pop();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> q.top();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"解法二\"><a href=\"#解法二\" class=\"headerlink\" title=\"解法二\"></a>解法二</h2><p>set，去重，并且自动排序，从小到大</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">secondHighest</span><span class=\"params\">(<span class=\"built_in\">string</span> s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">set</span>&lt;<span class=\"keyword\">int</span>&gt; _set;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> c : s) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> t = c- <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(t &lt;= <span class=\"number\">9</span> &amp;&amp; t &gt;= <span class=\"number\">0</span> &amp;&amp; !_set.count(t)) &#123;</span><br><span class=\"line\">                _set.insert(t);</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(_set.size() &lt; <span class=\"number\">2</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> *(++_set.rbegin());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"],"tags":["力扣周赛"]},{"title":"2021/3/21百度笔试","url":"/2021/03/21/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95/3.21%E7%99%BE%E5%BA%A6%E7%AC%94%E8%AF%95/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>11道单选，9道不定项</p>\n<p>考察内容有 数据库，计算机网络，操作系统，数据结构，c++等基础知识。</p>\n<p>3道编程题</p>\n<p>1、</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210321203139909.png\" alt=\"image-20210321203139909\"></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> T;</span><br><span class=\"line\">    <span class=\"built_in\">cin</span> &gt;&gt; T;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(T--) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//n为美食数量，m为吃撑的饱腹感 </span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\">        <span class=\"built_in\">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt;&gt; res;</span><br><span class=\"line\">        <span class=\"comment\">//接下来读入n中美食的饱腹感 </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> t;</span><br><span class=\"line\">            <span class=\"built_in\">cin</span> &gt;&gt; t;</span><br><span class=\"line\">            <span class=\"comment\">//由于输出时要输出第几个美食，因此要把下标也保存起来 </span></span><br><span class=\"line\">            res.push_back(&#123;t, i&#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//将n中美食的饱腹感从小到大排序</span></span><br><span class=\"line\">        <span class=\"comment\">//注意vector是可以排序的，容器是可以比较大小的 </span></span><br><span class=\"line\">        sort(res.begin(), res.end());</span><br><span class=\"line\">        <span class=\"keyword\">int</span> ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> k = <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"comment\">//吃的策略，从饱腹感最大的食物开始吃 </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = res.size() - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">            ans += res[i][<span class=\"number\">0</span>];</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(ans &gt;= m) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//已经吃撑了</span></span><br><span class=\"line\">                <span class=\"comment\">//k表示从最大饱腹感的食物吃到第i个 </span></span><br><span class=\"line\">                k = i;</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//如果k==-1，表示吃完所有的食物也吃不饱 </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(k == <span class=\"number\">-1</span>) <span class=\"built_in\">cout</span> &lt;&lt; <span class=\"number\">-1</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//输出吃了后k个饱腹感最大的食物的下标 </span></span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = res.size() - <span class=\"number\">1</span>; i &gt;= k; i--)</span><br><span class=\"line\">                <span class=\"built_in\">cout</span> &lt;&lt; res[i][<span class=\"number\">1</span>] &lt;&lt; <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">            <span class=\"built_in\">cout</span> &lt;&lt; <span class=\"built_in\">endl</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2、</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210321203242039.png\" alt=\"image-20210321203242039\"></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> T;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;T);</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(T--) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//n表示有n个小伙伴，m表示有m个职位 </span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">pair</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt;&gt; hope;<span class=\"comment\">//表示小伙伴的期望 </span></span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">pair</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt;&gt; real; <span class=\"comment\">//表示现实的值 </span></span><br><span class=\"line\">        <span class=\"comment\">//读入n个小伙伴的期望值 </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> k;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;k);</span><br><span class=\"line\">            hope.push_back(&#123;k, i&#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//读入m个现实的值</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;= m; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> k;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;k);</span><br><span class=\"line\">            real.push_back(&#123;k, i&#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        sort(hope.begin(), hope.end());</span><br><span class=\"line\">        sort(real.begin(), real.end());</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//保存每个小伙伴可以找到的角色 </span></span><br><span class=\"line\">        <span class=\"comment\">//pair的第一个为小伙伴下标，第二个为角色下标 </span></span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"built_in\">pair</span>&lt;<span class=\"keyword\">int</span>, <span class=\"keyword\">int</span>&gt;&gt; ans;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>; i &lt; hope.size(); i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//找到第一个大于等于hope[i]的real值</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span>(j &lt; real.size() &amp;&amp; hope[i].first &gt; real[j].first) j++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(j == real.size()) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//表示没找到，应该输出-1</span></span><br><span class=\"line\">                ans.push_back(&#123;hope[i].second, <span class=\"number\">-1</span>&#125;); </span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                ans.push_back(&#123;hope[i].second, real[j].second&#125;);</span><br><span class=\"line\">                <span class=\"comment\">//一个角色只能有一个人 </span></span><br><span class=\"line\">                j++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//输出,按照小伙伴的排列顺序输出 </span></span><br><span class=\"line\">        sort(ans.begin(), ans.end());</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; ans.size(); i++)</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>, ans[i].second);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;\\n&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3、</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210321205635182.png\" alt=\"image-20210321205635182\"></p>\n"},{"title":"460. LFU 缓存","url":"/2021/03/22/%E5%8A%9B%E6%89%A3/460.LFU%E7%BC%93%E5%AD%98/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>可以向LRU那样去做</p>\n<p>一个双向链表，左边为旧元素，右边为新元素，如果要插入一个数字，比如3，那么要把3插在所有3的前面，保证了如果使用频率相同，那么可以删除最左边的点。</p>\n<p>注意，每次插入的时间复杂度是O(n),因为我需要遍历整个链表，找到应该插入的地方。</p>\n<p>每次插入操作，把cnt加一。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LFUCache</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> &#123;</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> key, val;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Node *left, *right;</span><br><span class=\"line\">        Node(<span class=\"keyword\">int</span> _k, <span class=\"keyword\">int</span> _v) : key(_k), val(_v), left(<span class=\"literal\">nullptr</span>), right(<span class=\"literal\">nullptr</span>) &#123;&#125;;</span><br><span class=\"line\">    &#125;*L, *R;</span><br><span class=\"line\">    <span class=\"built_in\">unordered_map</span>&lt;<span class=\"keyword\">int</span>, Node*&gt; hash;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">insert</span><span class=\"params\">(Node *p)</span> </span>&#123;</span><br><span class=\"line\">        p-&gt;cnt++;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> t = L-&gt;right;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(t != R &amp;&amp; t-&gt;cnt &lt;= p-&gt;cnt) &#123;</span><br><span class=\"line\">            t = t-&gt;right;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        p-&gt;right = t;</span><br><span class=\"line\">        p-&gt;left = t-&gt;left;</span><br><span class=\"line\">        t-&gt;left-&gt;right = p;</span><br><span class=\"line\">        t-&gt;left = p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">(Node *p)</span> </span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        p-&gt;left-&gt;right = p-&gt;right;</span><br><span class=\"line\">        p-&gt;right-&gt;left = p-&gt;left;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    LFUCache(<span class=\"keyword\">int</span> capacity) &#123;</span><br><span class=\"line\">        n = capacity;</span><br><span class=\"line\">        L = <span class=\"keyword\">new</span> Node(<span class=\"number\">-1</span>, <span class=\"number\">-1</span>);</span><br><span class=\"line\">        R = <span class=\"keyword\">new</span> Node(<span class=\"number\">-1</span>, <span class=\"number\">-1</span>);</span><br><span class=\"line\">        L-&gt;right = R;</span><br><span class=\"line\">        R-&gt;left = L;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> key)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!hash.count(key)) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">auto</span> p = hash[key];</span><br><span class=\"line\">        remove(p);</span><br><span class=\"line\">        insert(p);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> p-&gt;val;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(<span class=\"keyword\">int</span> key, <span class=\"keyword\">int</span> value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(n == <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(hash.count(key)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> p = hash[key];</span><br><span class=\"line\">            p-&gt;val = value;</span><br><span class=\"line\">            remove(p);</span><br><span class=\"line\">            insert(p);</span><br><span class=\"line\">            hash[key] = p;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(hash.size() == n) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">auto</span> p = L-&gt;right;</span><br><span class=\"line\">                remove(p);</span><br><span class=\"line\">                hash.erase(p-&gt;key);</span><br><span class=\"line\">                <span class=\"keyword\">delete</span> p;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> p = <span class=\"keyword\">new</span> Node(key, value);</span><br><span class=\"line\">            insert(p);</span><br><span class=\"line\">            hash[key] = p;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your LFUCache object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * LFUCache* obj = new LFUCache(capacity);</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_1 = obj-&gt;get(key);</span></span><br><span class=\"line\"><span class=\"comment\"> * obj-&gt;put(key,value);</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n"},{"title":"3.22美团测开二面","url":"/2021/03/22/%E9%9D%A2%E8%AF%95/3.22%E7%BE%8E%E5%9B%A2%E4%BA%8C%E9%9D%A2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>大体情况，非常水，面试官不听你说话，面试官能力低下。</p>\n<p>1、自我介绍</p>\n<p>2、她让我把项目从头到尾介绍了一遍，没有问问题，她也没听我在说什么，只是在我说完后回答嗯，我知道了。这些东西在一面时都问过了，二面又问了一遍。</p>\n<p>3、一道算法题，面试官自己都描述不清楚题意。</p>\n<p>给定一个数组和一个数字n，找出所有和为n的子数组。</p>\n<p><a href=\"https://leetcode-cn.com/problems/subarray-sum-equals-k/\">560. 和为K的子数组</a></p>\n<p>总结，可能是测试岗的原因，他们不在意你的技术，只在意你能不能立马去实习，去的时间越长越好，充当廉价劳动力。</p>\n"},{"title":"191. 位1的个数","url":"/2021/03/22/%E5%8A%9B%E6%89%A3%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/191.%E4%BD%8D1%E7%9A%84%E4%B8%AA%E6%95%B0/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"算法一、直接求出每一位是否为一\"><a href=\"#算法一、直接求出每一位是否为一\" class=\"headerlink\" title=\"算法一、直接求出每一位是否为一\"></a>算法一、直接求出每一位是否为一</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hammingWeight</span><span class=\"params\">(<span class=\"keyword\">uint32_t</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n) &#123;</span><br><span class=\"line\">            res += n &amp; <span class=\"number\">1</span>;</span><br><span class=\"line\">            n &gt;&gt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"算法二、除k取余法\"><a href=\"#算法二、除k取余法\" class=\"headerlink\" title=\"算法二、除k取余法\"></a>算法二、除k取余法</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hammingWeight</span><span class=\"params\">(<span class=\"keyword\">uint32_t</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n) &#123;</span><br><span class=\"line\">            res += n % <span class=\"number\">2</span>;</span><br><span class=\"line\">            n /= <span class=\"number\">2</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"算法三、找出二进制中最后一个1\"><a href=\"#算法三、找出二进制中最后一个1\" class=\"headerlink\" title=\"算法三、找出二进制中最后一个1\"></a>算法三、找出二进制中最后一个1</h2><p>n &amp; (n - 1)可以去掉n中最后一个1</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hammingWeight</span><span class=\"params\">(<span class=\"keyword\">uint32_t</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n) &#123;</span><br><span class=\"line\">            n = n &amp; (n - <span class=\"number\">1</span>);</span><br><span class=\"line\">            res++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>n &amp; (~n + 1)</p>\n<p>对于n</p>\n<p>——1000</p>\n<p>取反(注意，下面用-表示的数字和原来的n的表示，全部相反)</p>\n<p>——0111</p>\n<p>加一</p>\n<p>—–1000</p>\n<p>这样n &amp; (n - 1)就可以找出最后一个1</p>\n<p>结果为</p>\n<p>0000001000</p>\n<p>-x即为 ~x + 1</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">uint32_t</span> <span class=\"title\">lowbit</span><span class=\"params\">(<span class=\"keyword\">uint32_t</span> x)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> x &amp; -x;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">hammingWeight</span><span class=\"params\">(<span class=\"keyword\">uint32_t</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n) n -= lowbit(n), res++;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>左移，舍去高位，低位补0</p>\n<p>右移，分为逻辑右移和算数右移</p>\n<p>逻辑右移高位补0</p>\n<p>算数右移高位补最高有效位的值</p>\n<p>无符号数，右移是逻辑的</p>\n<p>c++中, &gt;&gt;表示算数右移</p>\n","categories":["力扣每日一题"]},{"title":"字节对齐","url":"/2021/03/24/c++/%E5%AD%97%E8%8A%82%E5%AF%B9%E9%BD%90/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>有效对齐值 是 #pragma pack() 和 最长数据类型中较小的一个</p>\n<p>结构体的第一个成员的偏移量为0，以后每个成员相对于结构体首地址的偏移量是该成员大小和有效对齐值中较小那个的整数倍</p>\n<p>结构体的总大小是 有效对齐值 的整数倍</p>\n<p>简化了处理器和内存系统之间接口的硬件设计，提高了效率</p>\n<p>比如一个double型，如果我们把所有的double类型数据的地址对齐成8的倍数，那么就可以用一个内存操作来读或者写值了</p>\n<p>否则，可能需要执行两次内存访问，因为对象可能被分放在两个8字节的内存块中。</p>\n<p>无论数据是否对齐，都能正常工作，不过，还是建议对齐数据以提高内存系统的性能</p>\n"},{"url":"/2021/03/23/%E5%88%B7%E9%9D%A2%E7%BB%8F/6/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>​    </p>\n<h3 id=\"1、C-和java的区别\"><a href=\"#1、C-和java的区别\" class=\"headerlink\" title=\"1、C++和java的区别\"></a>1、C++和java的区别</h3><p>Java语言不需要程序对内存进行分配和回收，有垃圾回收机制，c++需要程序员自己管理内存</p>\n<p>c++只用到编译器，java用编译器和解释器</p>\n<p>Java是纯面向对象的语言，c++依然存在面向过程的部分</p>\n<p>Java执行速度较慢</p>\n<p>c++优点是速度快，灵活，面向底层；缺点是开发周期长，不易维护。</p>\n<p>Java优点是开发周期短，容易维护，移植性好；缺点是速度较慢，面向底层的东西不太适应。</p>\n<p>主要是看需求吧</p>\n<h3 id=\"map底层\"><a href=\"#map底层\" class=\"headerlink\" title=\"map底层\"></a>map底层</h3><p>map底层使用红黑树实现的</p>\n"},{"title":"3.25字节跳动三面","url":"/2021/03/25/%E9%9D%A2%E8%AF%95/3,25%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E4%B8%89%E9%9D%A2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>1、自我介绍</p>\n<p>2、lambda表达式</p>\n<p>3、struct和class的区别</p>\n<p>C++中的 struct 和 class 基本是通用的，唯有几个细节不同：</p>\n<ul>\n<li>使用 class 时，类中的成员默认都是 private 属性的；而使用 struct 时，结构体中的成员默认都是 public 属性的。</li>\n<li>class 继承默认是 private 继承，而 struct 继承默认是 public 继承（《<a href=\"http://c.biancheng.net/cpp/biancheng/cpp/rumen_11/\">C++继承与派生</a>》一章会讲解继承）。</li>\n<li>class 可以使用模板，而 struct 不能（《<a href=\"http://c.biancheng.net/cpp/biancheng/cpp/rumen_14/\">模板、字符串和异常</a>》一章会讲解模板）。</li>\n</ul>\n<p>4、虚函数</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>&#123;</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">printA</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;A\\n&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span>&#123;</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">printB</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">cout</span> &lt;&lt; <span class=\"string\">&quot;B\\n&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    A *pa = <span class=\"keyword\">new</span> A();</span><br><span class=\"line\">    B *pb;</span><br><span class=\"line\">    pb = (B*)pa;</span><br><span class=\"line\">    pb-&gt;printB();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>5、给定一个数组，和一个排序的index，里面保存下标，让你在O(n)时间,O(1)空间中删除数组中下标为index[i]的元素。</p>\n"},{"title":"3.27百度一面二面三面","url":"/2021/03/27/%E9%9D%A2%E8%AF%95/3.27%E7%99%BE%E5%BA%A6%E4%B8%80%E9%9D%A2%E4%BA%8C%E9%9D%A2%E4%B8%89%E9%9D%A2/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"大体情况\"><a href=\"#大体情况\" class=\"headerlink\" title=\"大体情况\"></a>大体情况</h1><p>11点开始一面，大约45分钟；12点二面，大约40分钟；一点多三面，大概50分钟。问的内容比较基础，算法题也比较简单。</p>\n<h1 id=\"一面\"><a href=\"#一面\" class=\"headerlink\" title=\"一面\"></a>一面</h1><p>1、自我介绍</p>\n<p>2、介绍项目</p>\n<p>3、线程同步</p>\n<p>4、信号量，如何解决生产者消费者问题</p>\n<p>5、socket TCP 协议</p>\n<p>6、c++11新特性</p>\n<p>7、右值引用</p>\n<p>8、移动构造函数 如何实现</p>\n<p>9、算法 从一个有序数组中，找到某一个数的下标，用二分即可</p>\n<p>10、如果有多个重复的值，如何把左右边界二分出来</p>\n<h1 id=\"二面\"><a href=\"#二面\" class=\"headerlink\" title=\"二面\"></a>二面</h1><p>1、算法题，实现strcpy函数</p>\n<p>2、算法题，实现string类的拷贝构造函数</p>\n<p>3、string类中字符串是如何保存的，和字符数组有何区别</p>\n<p>4、vector扩容原理</p>\n<p>5、为什么new或malloc一块内存速度慢，在堆上分配内存为什么要比栈上慢</p>\n<p>6、map和unordered_map区别</p>\n<p>7、TCP三次握手，四次挥手</p>\n<p>8、为什么是三次握手，不是两次握手、四次握手或更多次握手</p>\n<p>9、算法题，<a href=\"https://leetcode-cn.com/problems/fu-za-lian-biao-de-fu-zhi-lcof/\">复杂链表的复制</a></p>\n<h1 id=\"三面\"><a href=\"#三面\" class=\"headerlink\" title=\"三面\"></a>三面</h1><p>1、自我介绍</p>\n<p>2、你感到最委屈的一件事</p>\n<p>3、你接下来有什么学习路线</p>\n<p>4、你认为你的优点和缺点是什么</p>\n<p>5、你近一年有没有学习使用什么新技术</p>\n<p>6、你近一年最大的压力是哪件事，是如何解决的</p>\n<p>7、给你一个新技术，你在多长时间能够掌握</p>\n<p>8、对百度的看法</p>\n<p>还有一些忘了</p>\n"},{"title":"pascal编译器问题反馈","url":"/2021/05/05/pascal%E7%BC%96%E8%AF%91%E5%99%A8%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>请在下方评论处贴上导致bug的pascal源代码，并给出相应的bug分析，我们会尽快处理~</p>\n"},{"title":"vim基础教程3","url":"/2021/05/06/vim/vim3/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>1、f + 一个字母 ： 跳到下一个该字母处  F + 一个字母 向前</p>\n<p>t + 一个字母 ： 跳到下一个该字母处的前一个字母  T + 一个字母 向前</p>\n<p>2、</p>\n<p>3、x删除当前字母  s删除当前字母并进入插入模式</p>\n<p>4、cw 删除从单词（从光标处开始） 并入插入模式</p>\n"},{"title":"bashrc、profile等的区别","url":"/2021/06/07/bashrc%E3%80%81profile/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"交互式终端与非交互式终端\"><a href=\"#交互式终端与非交互式终端\" class=\"headerlink\" title=\"交互式终端与非交互式终端\"></a>交互式终端与非交互式终端</h2><p>对于交互式终端，有两种登录方式，<strong>需要登录</strong>和<strong>不需要登录</strong>的。</p>\n<p>当我们平时用ssh连接远程服务器时，我们就进入了交互式登录的终端。</p>\n<p>在已经登录到终端后，如果我们输入<code>bash</code>命令，那么我们会进入一个新的bash中，此时就是交互式不需要登录的终端。</p>\n<p>当一个脚本fork了一个子shell用来执行命令，那么这个shell就是非交互的shell。</p>\n<p>非交互shell不会执行任何启动文件(如.bashrc等)，它会从父shell继承环境变量。</p>\n<h2 id=\"Bash启动文件\"><a href=\"#Bash启动文件\" class=\"headerlink\" title=\"Bash启动文件\"></a>Bash启动文件</h2><p>当一个shell启动时，会自动执行启动文件里面的命令。这会在显示出提示符(command prompt)前执行</p>\n<h2 id=\"bash-profile\"><a href=\"#bash-profile\" class=\"headerlink\" title=\".bash_profile\"></a>.bash_profile</h2><p>这部分比较麻烦，先暂时写到这里吧</p>\n<p><code>/etc/profile, .profile, .bash_profile, .bashrc, .bash_login</code></p>\n"},{"title":"安装pyenv","url":"/2021/06/07/%E5%AE%89%E8%A3%85pyenv/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>1、首先安装构建python需要的工具<a href=\"https://github.com/pyenv/pyenv/wiki#suggested-build-environment\">官网教程</a></p>\n<p>对于Ubuntu，执行下列命令（注意，命令可能会过时，以官网为准）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo apt-get update; sudo apt-get install make build-essential libssl-dev zlib1g-dev \\</span><br><span class=\"line\">libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm \\</span><br><span class=\"line\">libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev</span><br></pre></td></tr></table></figure>\n\n<p>2、clone pyenv的代码库，clone到~/.pyenv</p>\n<p><code> git clone https://github.com/pyenv/pyenv.git ~/.pyenv</code></p>\n<p>如果无法访问github，那么可以使用镜像</p>\n<p><code> git clone https://github.com.cnpmjs.org/pyenv/pyenv.git ~/.pyenv</code></p>\n<p>3、将pyenv添加到环境变量</p>\n<p>刚才克隆的pyenv代码库其中已经包含了编译好的pyenv文件了，在<code>~/.pyenv/bin/</code>中，我们只需要将其加入环境变量中就可以了。</p>\n<p><a href=\"https://github.com/pyenv/pyenv#basic-github-checkout\">参考官网</a></p>\n<p>对于Ubuntu来说</p>\n<p>在<code>~/.profile</code>文件的最上面加入</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> PYENV_ROOT=<span class=\"string\">&quot;<span class=\"variable\">$HOME</span>/.pyenv&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"string\">&quot;<span class=\"variable\">$PYENV_ROOT</span>/bin:<span class=\"variable\">$PATH</span>&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">eval</span> <span class=\"string\">&quot;<span class=\"subst\">$(pyenv init --path)</span>&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>加好之后执行<code>source ~/.profile</code>或者重启终端</p>\n<p>4、此时已经安装好了pyenv，在命令行中输入<code>pyenv</code>应该可以看见以下输出</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210607105417677.png\" alt=\"image-20210607105417677\"></p>\n<p>5、下载python</p>\n<p>如果直接用pyenv的命令安装python，它是从python官网下载python包的，比较慢。我们可以先从镜像下载好放到<code>~/.pyenv/cache</code>中，然后再执行<code>pyenv install 3.x.x</code>，pyenv会先在cache中查找相应的安装包，如果找到了就直接安装。</p>\n<p><code>v=3.7.3;wget https://npm.taobao.org/mirrors/python/$v/Python-$v.tar.xz -P ~/.pyenv/cache/;pyenv install $v</code></p>\n<p>v表示python版本号，然后从淘宝源上下载放进<code>~/.pyenv/cache</code>中，然后安装。</p>\n<p>6、安装好后，执行<code>pyenv global 3.x.x</code>就可以让安装好的python全局生效了。</p>\n<p>文章中的内容可能会过时，请以pyenv<a href=\"https://github.com/pyenv/pyenv\">官网</a>为准！</p>\n"},{"title":"145. 二叉树的后序遍历","url":"/2021/03/14/%E5%8A%9B%E6%89%A3/145.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>递归很简单</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">postorderTraversal</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        dfs(root);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!root) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        dfs(root-&gt;left);</span><br><span class=\"line\">        dfs(root-&gt;right);</span><br><span class=\"line\">        res.push_back(root-&gt;val);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>前序遍历得到 根左右</p>\n<p>换一下得到 根右左</p>\n<p>逆序得到  左右根</p>\n<p>注：只能遍历 二叉树</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Definition for a binary tree node.</span></span><br><span class=\"line\"><span class=\"comment\"> * struct TreeNode &#123;</span></span><br><span class=\"line\"><span class=\"comment\"> *     int val;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *left;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode *right;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode() : val(0), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * &#125;;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> &#123;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">postorderTraversal</span><span class=\"params\">(TreeNode* root)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; res;</span><br><span class=\"line\">        <span class=\"built_in\">stack</span>&lt;TreeNode*&gt; stk;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(root || stk.size()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(root) &#123;</span><br><span class=\"line\">                res.push_back(root-&gt;val);</span><br><span class=\"line\">                stk.push(root);</span><br><span class=\"line\">                root = root-&gt;right;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            root = stk.top();</span><br><span class=\"line\">            stk.pop();</span><br><span class=\"line\">            root = root-&gt;left;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        reverse(res.begin(), res.end());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["LeetCode"]},{"title":"图床测试","url":"/2021/01/01/%E5%9B%BE%E5%BA%8A%E6%B5%8B%E8%AF%95/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img src=\"https://i.loli.net/2021/01/01/FT8fAWpjEdLKsOy.png\" alt=\"image-20210101185711624\"></p>\n"},{"title":"标题","url":"/2021/06/07/%E6%A8%A1%E6%9D%BF/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>"},{"title":"Hadoop 的安装、启动与作业提交","url":"/2021/06/07/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9E%E9%AA%8C/Hadoop%20%E7%9A%84%E5%AE%89%E8%A3%85%E3%80%81%E5%90%AF%E5%8A%A8%E4%B8%8E%E4%BD%9C%E4%B8%9A%E6%8F%90%E4%BA%A4/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"前提条件\"><a href=\"#前提条件\" class=\"headerlink\" title=\"前提条件\"></a>前提条件</h2><p>建议在服务器上做，如果在自己电脑上开一个虚拟机，在开一个IDEA，会非常卡，这也是大多数同学抱怨大数据这门课的原因。非常卡！</p>\n<p>老师申请了华为云的500元优惠券（不是满减，可以直接够买云服务器），可以直接购买ESC云服务器。我们小组在做大作业时买了一个月，16G内存。刚好到500元，一分钱不用花就可以白嫖一台高性能服务器一个月，太爽啦！</p>\n<h2 id=\"服务器配置\"><a href=\"#服务器配置\" class=\"headerlink\" title=\"服务器配置\"></a>服务器配置</h2><h3 id=\"配置服务器\"><a href=\"#配置服务器\" class=\"headerlink\" title=\"配置服务器\"></a>配置服务器</h3><p>我们选的操作系统版本是Ubuntu18.04LTS。</p>\n<p>将机器名改为bd，这个可以在华为云控制台上改，如果没有生效，那么可以在<code>/etc/hostname</code>中改<img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210607113731066.png\" alt=\"image-20210607113731066\"></p>\n<p>然后，建立一个用户<code>moon</code>都和老师的一致就可以啦。</p>\n<p><code>adduser moon</code>，输入密码后一路回车就可以了。</p>\n<p>这样，服务器就配置好了。</p>\n<p>那么如何连接服务器呢？</p>\n<h3 id=\"在本机使用ssh连接服务器。\"><a href=\"#在本机使用ssh连接服务器。\" class=\"headerlink\" title=\"在本机使用ssh连接服务器。\"></a>在本机使用ssh连接服务器。</h3><h4 id=\"免输ip\"><a href=\"#免输ip\" class=\"headerlink\" title=\"免输ip\"></a>免输ip</h4><p>为了不用输入ip，可以在<strong>本机</strong>host中加入一项</p>\n<p><code>bd 114.1xx.xxx.xxx</code></p>\n<p>windows系统：百度一下hosts文件位置，然后添加一项，注意可能会有权限问题，百度即可。</p>\n<p>linux系统：<code>vim /etc/hosts</code>加入一项即可。注意，这是<strong>本机</strong>，不是服务器。</p>\n<h4 id=\"免输密码\"><a href=\"#免输密码\" class=\"headerlink\" title=\"免输密码\"></a>免输密码</h4><p>将本机的公钥加入服务器的<code>~/.ssh/authorized_keys</code>中即可。</p>\n<p>如果本机没有生成公钥，先要生成一下<code>ssh-keygen</code>，一路回车。</p>\n<p>然后将id_ras.pub里面的内容加入服务器的<code>~/.ssh/authorized_keys</code>中。</p>\n<p>linux可以使用<code>ssh-copy-id moon@bd</code></p>\n<p>Windows没有这个命令，可以手动添加进去。</p>\n<h2 id=\"安装jdk\"><a href=\"#安装jdk\" class=\"headerlink\" title=\"安装jdk\"></a>安装jdk</h2><p><code>sudo apt-get install openjdk-8-jdk</code></p>\n<p>只需执行这一行命令就可以了。</p>\n<h2 id=\"服务器连接服务器\"><a href=\"#服务器连接服务器\" class=\"headerlink\" title=\"服务器连接服务器\"></a>服务器连接服务器</h2><p>听上去有点绕，其实就是在服务器的终端中在用ssh连接一次。</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210607115314308.png\" alt=\"image-20210607115314308\"></p>\n<p>首先，把bd这个域名对应到127.0.1.1的ip上。</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210607114856077.png\" alt=\"image-20210607114856077\"></p>\n<p><del>重要的一点来了，如果我们是在vm虚拟机中执行的这个bd就对应127.0.1.1</del></p>\n<p><del>但是如果在服务器上也这么配置，那么我们就无法在本机访问hadoop的web界面了。</del></p>\n<p><del>这个192ip是怎么来的呢？</del></p>\n<p><del>首先，它<strong>不是</strong>服务器的公网ip，而是服务器的内网ip！</del></p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210607115100996.png\" alt=\"image-20210607115100996\"></p>\n<p><del>我不知道为什么这么配，但这样确实可以。如果有知道原理的小伙伴可以在评论区留言。</del></p>\n<p>==<strong>不要把hadoop暴露在公网ip！！！！！</strong>==</p>\n<p><strong>==我的服务器就是因为暴露了hadoop webui 的50070端口，导致服务器中挖矿病毒，只能重装系统，之前配好的环境得再来一遍！！！==</strong></p>\n<p>在执行hadoop启动命令时，服务器会执行ssh bd，也就是连接自己。由于我们没有配置免密登录（刚才配置的是本机连接服务器的免密登录），需要多次输入密码，所以可以配置一下免密登录。</p>\n<p>这个<del><code>ssh-copy-id bd</code>还是这个</del><code>ssh-copy-id moon@bd</code><del>，我记不清了，可以试一试。</del></p>\n<h2 id=\"安装Hadoop\"><a href=\"#安装Hadoop\" class=\"headerlink\" title=\"安装Hadoop\"></a>安装Hadoop</h2><p>首先在自己<strong>本机</strong>上下载Hadoop(用老师要求的版本)，<a href>地址</a></p>\n<p>下载好后，可以用ftp/sftp将文件发送到服务器上。</p>\n<p>注意端口，防火墙可能没有开启ftp的21端口，需要在华为云控制台的安全组里面添加一条规则。接下来的步骤中还要开启50070等端口，操作是一样的。</p>\n<p>接下来的操作基本按照ppt就可以了，注意ppt的hadoop路径是<code>~/hadoop/hadoop-2.10.1</code>,实际上我们的路径应该为<code>~/hadoop-2.10.1</code>，注意一下就可以了。</p>\n<p>等配置好后启动了hadoop，那么可以在本机浏览器中输入你的服务器ip:50070就可以看到hadoop的web界面啦！</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>本文主要介绍了如何配置服务器，如何在本机访问服务器hadoop的web界面。有问题可以在评论区留言，我会及时答复的~</p>\n"},{"title":"adduser与useradd","url":"/2021/06/07/linux/adduser/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><code>useradd</code>是一个linux命令，它提供了很多参数。</p>\n<p><code>adduser</code>是一个perl脚本，在使用的时候会出现类似人机交互的界面，提供选项让用户填写和选择。</p>\n<p>CentOS下useradd和adduser是没有区别的</p>\n<p>两者都会在home下自动创建目录，没有设置免密，需要使用passwd修改密码</p>\n<p>不同之处主要体现在Ubuntu上</p>\n<p>在使用<code>useradd</code>时，如果后面不加任何选项，那么默认创建的用户是“三无”用户</p>\n<p>即无家目录，无密码，无系统shell</p>\n<p>使用adduser时，系统将会提示输入创建用户所需的各种信息，只要跟着系统提示就可以完成用户的创建。</p>\n<p>所以，<strong>adduser</strong>适合的对象更偏向于初学者；而<strong>useradd</strong>适合的人群是有一定经验的，用户可以通过命令加参数的方式快速创建出用户，避免了<strong>adduser</strong>的繁琐。</p>\n","categories":["Linux"]},{"title":"酒店数据库设计","url":"/2021/06/07/%E9%85%92%E5%BA%97%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>数据库采用sqlite</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sqlite3</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\">logging.basicConfig(</span><br><span class=\"line\">    format=<span class=\"string\">&#x27;%(asctime)s %(levelname)-8s %(message)s&#x27;</span>,</span><br><span class=\"line\">    level=logging.INFO,</span><br><span class=\"line\">    datefmt=<span class=\"string\">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class=\"line\">exist = os.path.exists(<span class=\"string\">&#x27;./hotel.db&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> exist:</span><br><span class=\"line\">    logging.warning(<span class=\"string\">&#x27;hotel.db already exists, do you want to delete it and create new one? y/n:&#x27;</span>)</span><br><span class=\"line\">    str = input()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> str == <span class=\"string\">&#x27;y&#x27;</span>:</span><br><span class=\"line\">        logging.info(<span class=\"string\">&#x27;delete hotel.db&#x27;</span>)</span><br><span class=\"line\">        os.remove(<span class=\"string\">&#x27;./hotel.db&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        exit()</span><br><span class=\"line\"></span><br><span class=\"line\">con = sqlite3.connect(<span class=\"string\">&#x27;hotel.db&#x27;</span>)</span><br><span class=\"line\">logging.info(<span class=\"string\">&#x27;create and connect to totel.db&#x27;</span>)</span><br><span class=\"line\">create_sql_list = list()</span><br><span class=\"line\">CREATE_TABEL_DEVICE = <span class=\"string\">&#x27;&#x27;&#x27;create table tbDevice(</span></span><br><span class=\"line\"><span class=\"string\">    roomID             text,</span></span><br><span class=\"line\"><span class=\"string\">    isPower            integer,</span></span><br><span class=\"line\"><span class=\"string\">    targetTemperature  integer,</span></span><br><span class=\"line\"><span class=\"string\">    currentTemperature integer,</span></span><br><span class=\"line\"><span class=\"string\">    windSpeed          integer,</span></span><br><span class=\"line\"><span class=\"string\">    isAskAir           integer,</span></span><br><span class=\"line\"><span class=\"string\">    isSupplyAir        integer,</span></span><br><span class=\"line\"><span class=\"string\">    cost               float,</span></span><br><span class=\"line\"><span class=\"string\">    primary            key(roomID)</span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_DEVICE)</span><br><span class=\"line\">CREATE_TABEL_ORDER = <span class=\"string\">&#x27;&#x27;&#x27;create table tbOrder(</span></span><br><span class=\"line\"><span class=\"string\">    userID       text,</span></span><br><span class=\"line\"><span class=\"string\">    roomID       text,</span></span><br><span class=\"line\"><span class=\"string\">    orderID      text,</span></span><br><span class=\"line\"><span class=\"string\">    createdTime  datetime,</span></span><br><span class=\"line\"><span class=\"string\">    finishedTime datetime,</span></span><br><span class=\"line\"><span class=\"string\">    state        text,</span></span><br><span class=\"line\"><span class=\"string\">    primary      key(orderID)</span></span><br><span class=\"line\"><span class=\"string\">    </span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_ORDER)</span><br><span class=\"line\">CREATE_TABEL_BILL = <span class=\"string\">&#x27;&#x27;&#x27;create table tbBill(</span></span><br><span class=\"line\"><span class=\"string\">    orderID   text,</span></span><br><span class=\"line\"><span class=\"string\">    billID    text,</span></span><br><span class=\"line\"><span class=\"string\">    totalCost float,</span></span><br><span class=\"line\"><span class=\"string\">    primary   key(billID),</span></span><br><span class=\"line\"><span class=\"string\">    foreign   key(orderID) references tbOrder(orderID)</span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_BILL)</span><br><span class=\"line\">CREATE_TABEL_DETAILLIST = <span class=\"string\">&#x27;&#x27;&#x27;create table tbDetailList(</span></span><br><span class=\"line\"><span class=\"string\">    orderID     text,</span></span><br><span class=\"line\"><span class=\"string\">    DetailList  text,</span></span><br><span class=\"line\"><span class=\"string\">    startTime   datetime,</span></span><br><span class=\"line\"><span class=\"string\">    endtime     datetime,</span></span><br><span class=\"line\"><span class=\"string\">    widSpeed    int, </span></span><br><span class=\"line\"><span class=\"string\">    cost        float,</span></span><br><span class=\"line\"><span class=\"string\">    billingRate float,</span></span><br><span class=\"line\"><span class=\"string\">    primary     key(DetailList, startTime),</span></span><br><span class=\"line\"><span class=\"string\">    foreign     key(orderID) references tbOrder(orderID)</span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_DETAILLIST)</span><br><span class=\"line\">CREATE_TABEL_USAGERECORD = <span class=\"string\">&#x27;&#x27;&#x27;create table tbUsageRecord(</span></span><br><span class=\"line\"><span class=\"string\">    orderID     text,</span></span><br><span class=\"line\"><span class=\"string\">    startTime   datetime,</span></span><br><span class=\"line\"><span class=\"string\">    endTime     datetime,</span></span><br><span class=\"line\"><span class=\"string\">    windSpeed   integer,</span></span><br><span class=\"line\"><span class=\"string\">    cost        float,</span></span><br><span class=\"line\"><span class=\"string\">    billingRate float,</span></span><br><span class=\"line\"><span class=\"string\">    primary     key(orderID, startTime),</span></span><br><span class=\"line\"><span class=\"string\">    foreign     key(orderID) references tbOrder(orderID)</span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_USAGERECORD)</span><br><span class=\"line\">CREATE_TABEL_POWER = <span class=\"string\">&#x27;&#x27;&#x27;create table tbPower(</span></span><br><span class=\"line\"><span class=\"string\">    roomID     text,</span></span><br><span class=\"line\"><span class=\"string\">    startTime  datetime,</span></span><br><span class=\"line\"><span class=\"string\">    endTime    datetime,</span></span><br><span class=\"line\"><span class=\"string\">    powerState integer,</span></span><br><span class=\"line\"><span class=\"string\">    primary    key(roomID, startTime),</span></span><br><span class=\"line\"><span class=\"string\">    foreign    key(roomID) references tbDevice(roomID) </span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_POWER)</span><br><span class=\"line\">CREATE_TABEL_TARGETTEM = <span class=\"string\">&#x27;&#x27;&#x27;create table tbTargetTem(</span></span><br><span class=\"line\"><span class=\"string\">    roomID     text,</span></span><br><span class=\"line\"><span class=\"string\">    startTime  datetime,</span></span><br><span class=\"line\"><span class=\"string\">    endTime    datetime,</span></span><br><span class=\"line\"><span class=\"string\">    targetTem  integer,</span></span><br><span class=\"line\"><span class=\"string\">    primary    key(roomID, startTime),</span></span><br><span class=\"line\"><span class=\"string\">    foreign    key(roomID) references tbDevice(roomID)</span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_TARGETTEM)</span><br><span class=\"line\">CREATE_TABEL_REACHTEM = <span class=\"string\">&#x27;&#x27;&#x27;create table tbReachTem(</span></span><br><span class=\"line\"><span class=\"string\">    roomID  text,</span></span><br><span class=\"line\"><span class=\"string\">    time    datetime,</span></span><br><span class=\"line\"><span class=\"string\">    primary key(roomID, time),</span></span><br><span class=\"line\"><span class=\"string\">    foreign key(roomID) references tbDevice(roomID)</span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_REACHTEM)</span><br><span class=\"line\">CREATE_TABEL_WINDSPEED = <span class=\"string\">&#x27;&#x27;&#x27;create table tbWindSpeed(</span></span><br><span class=\"line\"><span class=\"string\">    roomID    text,</span></span><br><span class=\"line\"><span class=\"string\">    startTime datetime,</span></span><br><span class=\"line\"><span class=\"string\">    endTime   datetime,</span></span><br><span class=\"line\"><span class=\"string\">    windSpeed integer,</span></span><br><span class=\"line\"><span class=\"string\">    primary   key(roomID, startTime),</span></span><br><span class=\"line\"><span class=\"string\">    foreign   key(roomID) references tbDevice(roomID)</span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_WINDSPEED)</span><br><span class=\"line\">CREATE_TABEL_SCHEDULING = <span class=\"string\">&#x27;&#x27;&#x27;create table tbScheduling(</span></span><br><span class=\"line\"><span class=\"string\">    roomID  text,</span></span><br><span class=\"line\"><span class=\"string\">    time    datetime,</span></span><br><span class=\"line\"><span class=\"string\">    primary key(roomID, time),</span></span><br><span class=\"line\"><span class=\"string\">    foreign key(roomID) references tbDevice(roomID)</span></span><br><span class=\"line\"><span class=\"string\">);&#x27;&#x27;&#x27;</span></span><br><span class=\"line\">create_sql_list.append(CREATE_TABEL_SCHEDULING)</span><br><span class=\"line\"></span><br><span class=\"line\">logging.info(<span class=\"string\">&quot;start create tables...&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> create_sql <span class=\"keyword\">in</span> create_sql_list:</span><br><span class=\"line\">    cur = con.cursor()</span><br><span class=\"line\">    logging.info(<span class=\"string\">&#x27;create table &#x27;</span> + create_sql.split(<span class=\"string\">&#x27; &#x27;</span>)[<span class=\"number\">2</span>][:<span class=\"number\">-2</span>])</span><br><span class=\"line\">    cur.execute(create_sql)</span><br><span class=\"line\">    con.commit()</span><br><span class=\"line\">logging.info(<span class=\"string\">&#x27;all table created&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>运行结果</p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210607165457173.png\" alt=\"image-20210607165457173\"></p>\n"},{"title":"百度cppGoodCoder认证","url":"/2021/06/08/%E7%99%BE%E5%BA%A6c++GoodCoder%E8%AE%A4%E8%AF%81/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"【用C-C-实现】寻找两个有序数组的中位数\"><a href=\"#【用C-C-实现】寻找两个有序数组的中位数\" class=\"headerlink\" title=\"【用C/C++实现】寻找两个有序数组的中位数\"></a>【用C/C++实现】寻找两个有序数组的中位数</h1><h2 id=\"题目描述\"><a href=\"#题目描述\" class=\"headerlink\" title=\"题目描述\"></a>题目描述</h2><p>给定两个大小为 m 和 n 的有序数组 nums1 和 nums2。<br>请你找出这两个有序数组的中位数，并且要求算法的时间复杂度为<code> O(log(m + n))</code>。<br>你可以假设 nums1 和 nums2 不会同时为空。</p>\n<p>示例 1:<br>nums1 = [1, 3]<br>nums2 = [2]<br>则中位数是 2.0<br> 示例 2:<br>nums1 = [1, 2]<br>nums2 = [3, 4]<br>则中位数是 (2 + 3)/2 = 2.5</p>\n<h2 id=\"设计思路\"><a href=\"#设计思路\" class=\"headerlink\" title=\"设计思路\"></a>设计思路</h2><h3 id=\"思路一-暴力\"><a href=\"#思路一-暴力\" class=\"headerlink\" title=\"思路一 暴力\"></a>思路一 暴力</h3><p>最好想的做法是：首先直接将一个数组拼接到另一个数组后面，然后sort一遍，再找出中位数。但是复杂度为O((n+m)log((n+m)))，不符合题目要求。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> p[N], q[N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> s[<span class=\"number\">2</span> * N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> n, m;<span class=\"comment\">//n, m分别为两个数组的长度</span></span><br><span class=\"line\">  <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">  <span class=\"comment\">//读入两个数组</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;p[i]);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">  <span class=\"comment\">//合并两个数组</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) s[i] = p[i];</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++) s[i + n] = q[i];</span><br><span class=\"line\">  <span class=\"comment\">//排序合并后的数组</span></span><br><span class=\"line\">  sort(s, s + m + n);</span><br><span class=\"line\">  <span class=\"keyword\">int</span> k = (m + n) / <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>((m + n) % <span class=\"number\">2</span> == <span class=\"number\">0</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%f&quot;</span>, s[k] + s[k - <span class=\"number\">1</span>]) / <span class=\"number\">2.0</span>); </span><br><span class=\"line\">  <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%f&quot;</span>, s[k]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>时间复杂度：O((n + m)log(n + m))</p>\n<h3 id=\"思路二-归并排序思想\"><a href=\"#思路二-归并排序思想\" class=\"headerlink\" title=\"思路二 归并排序思想\"></a>思路二 归并排序思想</h3><p>刚才合并时我们是直接把一个数组放在另一个数组后面，有没有更好的合并方法呢？我们可以借鉴归并排序的合并，这样我们就可以在O(n+m)的时间复杂度内把两个有序数组合并成一个有序数组了。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">10010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> p[N], q[N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> s[<span class=\"number\">2</span> * N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> n, m;<span class=\"comment\">//n, m分别为两个数组的长度</span></span><br><span class=\"line\">  <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">  <span class=\"comment\">//读入两个数组</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;p[i]);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">  <span class=\"comment\">//利用归并排序思想合并两个数组</span></span><br><span class=\"line\">  i = <span class=\"number\">0</span>, j = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> k = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt; n &amp;&amp; j &lt; m) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(p[i] &lt;= q[j]) s[k++] = p[i++];</span><br><span class=\"line\">    <span class=\"keyword\">else</span> s[k++] = q[j++];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(i &lt; n) s[k++] = p[i++];</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(j &lt; n) s[k++] = q[j++];</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(k % <span class=\"number\">2</span> == <span class=\"number\">0</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%f&quot;</span>, (s[k] + s[k - <span class=\"number\">1</span>]) / <span class=\"number\">2.0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%f&quot;</span>, s[k]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>时间复杂度：O(n + m)</p>\n<h3 id=\"思路三-递归\"><a href=\"#思路三-递归\" class=\"headerlink\" title=\"思路三 递归\"></a>思路三 递归</h3><p>中位数在哪呢？是不是数组从小到大排列后第(n + m) / 2个数。</p>\n<p>假设我们要找第k个数，怎么找呢？我们可以分别在两个数组（数组为A和B）中找到第k / 2个数（暂时不考虑k的奇偶问题），所以现在就有了三种情况。</p>\n<h4 id=\"1、A-k-2-lt-B-k-2\"><a href=\"#1、A-k-2-lt-B-k-2\" class=\"headerlink\" title=\"1、A[k / 2] &lt; B[k / 2]\"></a>1、A[k / 2] &lt; B[k / 2]</h4><p>此时，小于等于A[k / 2]的个数有多少个呢？</p>\n<p>在A数组里面，显然第k/2个数以及之前的数都是小于等于A[k / 2]的，即有k / 2个</p>\n<p>在B数组里面，由于B数组的第k / 2个数的值严格大于A[k / 2]，所以B数组中小于等于A[k / 2]的数的个数就小于k / 2个</p>\n<p>总的来说，小于等于A[k / 2]的数的个数小于k。</p>\n<p>也就是说，A数组的前k / 2个数，不可能是我们要找的第k个数</p>\n<h4 id=\"2、A-k-2-gt-B-k-2\"><a href=\"#2、A-k-2-gt-B-k-2\" class=\"headerlink\" title=\"2、A[k / 2] &gt; B[k / 2]\"></a>2、A[k / 2] &gt; B[k / 2]</h4><p>同理可得，B数组的前k / 2个数不可能有第k个数。</p>\n<h4 id=\"3、A-k-2-B-k-2\"><a href=\"#3、A-k-2-B-k-2\" class=\"headerlink\" title=\"3、A[k / 2] == B[k / 2]\"></a>3、A[k / 2] == B[k / 2]</h4><p>说明A[k / 2]和B[k / 2]恰好就是第k个元素</p>\n<p>每次比较完之后，一定能删掉k / 2个元素，然后就变成了一个递归的子问题。</p>\n<p>每次k都会除以2，k最多减到1（当k==1时，直接就能得出结果），所以最多递归log(k)次，也就是log((m + n) / 2)，即log(m + n)</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">10010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> p[N], q[N];</span><br><span class=\"line\"><span class=\"keyword\">int</span> s[<span class=\"number\">2</span> * N];</span><br><span class=\"line\"><span class=\"comment\">/** findKthNumber：找到两个数组的第k个数</span></span><br><span class=\"line\"><span class=\"comment\"> * @param p:第一个数组p</span></span><br><span class=\"line\"><span class=\"comment\"> * @param i:p数组的起始位置</span></span><br><span class=\"line\"><span class=\"comment\"> * @param q:第二个数组q</span></span><br><span class=\"line\"><span class=\"comment\"> * @param j:q数组的其实位置</span></span><br><span class=\"line\"><span class=\"comment\"> * @param k:要找到第k个数，k从1开始</span></span><br><span class=\"line\"><span class=\"comment\"> * @param n:数组p的长度</span></span><br><span class=\"line\"><span class=\"comment\"> * @param m:数组q的长度</span></span><br><span class=\"line\"><span class=\"comment\"> * @return int: 第k个数的值</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">findKthNumber</span><span class=\"params\">(<span class=\"keyword\">int</span> p[], <span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> q[], <span class=\"keyword\">int</span> j, <span class=\"keyword\">int</span> k, <span class=\"keyword\">int</span> n, <span class=\"keyword\">int</span> m)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//如果p的长度大于q的长度，交换一下</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n - i &gt; m - j) <span class=\"keyword\">return</span> findKthNumber(q, j, p, i, k, n, m);</span><br><span class=\"line\">    <span class=\"comment\">//处理边界</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n == i) <span class=\"keyword\">return</span> q[j + k - <span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> min(p[i], q[j]);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> si = min(i + k / <span class=\"number\">2</span>, n), sj = j + k / <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p[si - <span class=\"number\">1</span>] &gt; q[sj - <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> findKthNumber(p, i, q, j + k / <span class=\"number\">2</span>, k - k / <span class=\"number\">2</span>, n, m);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> findKthNumber(p, si, q, j, k - (si - i), n, m);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> n, m;<span class=\"comment\">//n, m分别为两个数组的长度</span></span><br><span class=\"line\">  <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">  <span class=\"comment\">//读入两个数组</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;p[i]);</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; m; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">  <span class=\"keyword\">if</span>((n + m) % <span class=\"number\">2</span> == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> left = findKthNumber(p, <span class=\"number\">0</span>, q, <span class=\"number\">0</span>, (m + n) / <span class=\"number\">2</span>, n, m);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> right = findKthNumber(p, <span class=\"number\">0</span>, q, <span class=\"number\">0</span>, (m + n) / <span class=\"number\">2</span> + <span class=\"number\">1</span>, n, m);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%f&quot;</span>, (left + right) / <span class=\"number\">2.0</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%f&quot;</span>, findKthNumber(p, <span class=\"number\">0</span>, q, <span class=\"number\">0</span>, (m + n) / <span class=\"number\">2</span> + <span class=\"number\">1</span>, n, m));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>时间复杂度：O(log(m + n))</p>\n<h2 id=\"基本使用说明\"><a href=\"#基本使用说明\" class=\"headerlink\" title=\"基本使用说明\"></a>基本使用说明</h2><p>输入</p>\n<p>第一行为两个整数，表示两个数组的长度</p>\n<p>第二、三行为两个数组</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">4 5</span><br><span class=\"line\">1 4 6 9</span><br><span class=\"line\">8 9 2 7 8</span><br></pre></td></tr></table></figure>\n\n"},{"title":"AcWing 3646. 分水果","url":"/2021/06/08/AcWing%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/AcWing3646.%E5%88%86%E6%B0%B4%E6%9E%9C/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><p>有三种水果，每个小朋友至少有一个水果，最多有每种一个水果，即三个。</p>\n<p>所以，对于一个小朋友，一共有七种选法，{0,0,1}, {0,1,0}, {1,0,0}, {0,1,1}, {1,0,1}, {1,1,0}, {1,1,1}</p>\n<p>现在一个小朋友有七个选法，这七种选法最多有128种组合。</p>\n<p>可以用二进制来表示，假设一个7位的二进制数，0表示不选，1表示选。如1001000，表示第一个和第四个选，其他不选。</p>\n<p>那么从0 ~ 1 &lt;&lt; 7，就表示了所有的选法。</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> x[<span class=\"number\">7</span>][<span class=\"number\">3</span>] = &#123;&#123;<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>&#125;, &#123;<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>&#125;, &#123;<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>&#125;, &#123;<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>&#125;, &#123;<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>&#125;, &#123;<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>&#125;, &#123;<span class=\"number\">1</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>&#125;&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> T;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;T);</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(T--) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a, b, c;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">      \t<span class=\"comment\">//遍历每一种选法</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">7</span>; i++) &#123;</span><br><span class=\"line\">          \t<span class=\"comment\">//比如1001000</span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> ta = <span class=\"number\">0</span>, tb = <span class=\"number\">0</span>, tc = <span class=\"number\">0</span>, cnt = <span class=\"number\">0</span>;</span><br><span class=\"line\">          \t<span class=\"comment\">//判断选了哪种选法，第一位和第四位为1，说明选择了&#123;0,0,1&#125;和&#123;0,1,1&#125;</span></span><br><span class=\"line\">          \t<span class=\"comment\">//cnt表示该二进制中有多少个1，即有多少个小朋友</span></span><br><span class=\"line\">          \t<span class=\"comment\">//ta,tbtc记录每种水果的总数量，最后判断是否合法。</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">7</span>; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>((i &gt;&gt; j &amp; <span class=\"number\">1</span>) == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                    cnt++;</span><br><span class=\"line\">                    ta += x[j][<span class=\"number\">0</span>];</span><br><span class=\"line\">                    tb += x[j][<span class=\"number\">1</span>];</span><br><span class=\"line\">                    tc += x[j][<span class=\"number\">2</span>];</span><br><span class=\"line\">                    </span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(ta &lt;= a &amp;&amp; tb &lt;= b &amp;&amp; tc &lt;= c) res = max(res, cnt);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, res);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/1A50E8AF45A0C56C0291ED60E9D631CF.jpg\" alt=\"1A50E8AF45A0C56C0291ED60E9D631CF\"></p>\n","categories":["AcWing"]},{"title":"AcWing 3636. 数组延伸","url":"/2021/06/08/AcWing%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/AcWing3636.%E6%95%B0%E7%BB%84%E5%BB%B6%E4%BC%B8/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><p>一个数组，延伸之后得到另外一个数组，注意这两个数组的和是一样的。</p>\n<p>新得到的数组也可以继续延伸。</p>\n<p>延伸到什么时候呢？比如一个数字8，除数是2，那么可以变成4，2，1.</p>\n<p>所以在一个数组中，找出最小可以被除次数的那个数。最小被除的次数就是拓展的次数。</p>\n<p>拓展了n次，那么结果为数组和*(n + 1)</p>\n<p>注意还要加上不能延伸数字之前的那个数组的和。</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"keyword\">long</span> <span class=\"keyword\">long</span> LL;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> N = <span class=\"number\">100010</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> q[N];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> T;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;T);</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(T--) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> n, m;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;q[i]);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> cnt = N;</span><br><span class=\"line\">        LL sum = <span class=\"number\">0</span>, psum = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//sum表示该数组的总和</span></span><br><span class=\"line\">            sum += q[i];</span><br><span class=\"line\">            <span class=\"keyword\">int</span> c = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"comment\">//c表示该数能被除多少次</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = q[i]; j % m == <span class=\"number\">0</span>; j /= m) &#123;</span><br><span class=\"line\">                c++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(c &lt; cnt) &#123;</span><br><span class=\"line\">                cnt = c;</span><br><span class=\"line\">                <span class=\"comment\">//sum表示从0到i数字的总和，psum表示0到i - 1的总和</span></span><br><span class=\"line\">                psum = sum - q[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%lld\\n&quot;</span>, sum * (cnt + <span class=\"number\">1</span>) + psum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/63FC0D523BE45F3B5E7CFE4C844F7F30.jpg\" alt=\"63FC0D523BE45F3B5E7CFE4C844F7F30\"></p>\n","categories":["AcWing"]},{"title":"ssh保持连接不断","url":"/2021/06/09/linux/adduser%E7%9A%84%E5%89%AF%E6%9C%AC/","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"服务器端主动保持连接\"><a href=\"#服务器端主动保持连接\" class=\"headerlink\" title=\"服务器端主动保持连接\"></a>服务器端主动保持连接</h2><p><code>sudo vim /etc/ssh/sshd_config</code></p>\n<p><img src=\"https://p-icgo.oss-cn-beijing.aliyuncs.com/image/image-20210609002721479.png\" alt=\"image-20210609002721479\"></p>\n<p>在最下面加上两行</p>\n<p><code>ClientAliveInterval 60</code>表示服务器每隔60s相客户端发送一个空数据包</p>\n<p><code>ClientAliveCountMax 600</code>表示服务器最多会发送600次</p>\n<p>然后重启sshd服务</p>\n<p><code>sudo systemctl restart sshd</code></p>\n<h2 id=\"客户端主动保持连接\"><a href=\"#客户端主动保持连接\" class=\"headerlink\" title=\"客户端主动保持连接\"></a>客户端主动保持连接</h2><p><code>vim ~/.ssh/config</code></p>\n<p>添加</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Host remotehost</span><br><span class=\"line\">    HostName remotehost.com</span><br><span class=\"line\">    ServerAliveInterval 240</span><br></pre></td></tr></table></figure>\n\n<p>表示客户端每隔240秒回相服务器发送一个数据包</p>\n<p>如果想让客户端向所有的服务器都发送keep-alive包，那么这样配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Host *</span><br><span class=\"line\">    ServerAliveInterval 240</span><br></pre></td></tr></table></figure>\n\n<p>一定注意，这是在客户端配置的。</p>\n","categories":["Linux"]}]